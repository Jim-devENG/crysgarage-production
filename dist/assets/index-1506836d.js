(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var u_=Object.defineProperty,h_=(t,e,n)=>e in t?u_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ah=(t,e,n)=>(h_(t,typeof e!="symbol"?e+"":e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();function d_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xx={exports:{}},lh={},Sx={exports:{}},ie={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var yl=Symbol.for("react.element"),f_=Symbol.for("react.portal"),p_=Symbol.for("react.fragment"),m_=Symbol.for("react.strict_mode"),g_=Symbol.for("react.profiler"),y_=Symbol.for("react.provider"),v_=Symbol.for("react.context"),b_=Symbol.for("react.forward_ref"),w_=Symbol.for("react.suspense"),x_=Symbol.for("react.memo"),S_=Symbol.for("react.lazy"),Jv=Symbol.iterator;function E_(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var Ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tx=Object.assign,kx={};function bo(t,e,n){this.props=t,this.context=e,this.refs=kx,this.updater=n||Ex}bo.prototype.isReactComponent={};bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cx(){}Cx.prototype=bo.prototype;function _m(t,e,n){this.props=t,this.context=e,this.refs=kx,this.updater=n||Ex}var Am=_m.prototype=new Cx;Am.constructor=_m;Tx(Am,bo.prototype);Am.isPureReactComponent=!0;var Zv=Array.isArray,Ix=Object.prototype.hasOwnProperty,Pm={current:null},Nx={key:!0,ref:!0,__self:!0,__source:!0};function _x(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ix.call(e,r)&&!Nx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yl,type:t,key:s,ref:o,props:i,_owner:Pm.current}}function T_(t,e){return{$$typeof:yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rm(t){return typeof t=="object"&&t!==null&&t.$$typeof===yl}function k_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e0=/\/+/g;function Dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k_(""+t.key):e.toString(36)}function Pc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yl:case f_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Dd(o,0):r,Zv(i)?(n="",t!=null&&(n=t.replace(e0,"$&/")+"/"),Pc(i,e,n,"",function(u){return u})):i!=null&&(Rm(i)&&(i=T_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(e0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zv(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Dd(s,a);o+=Pc(s,e,n,c,i)}else if(c=E_(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Dd(s,a++),o+=Pc(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nc(t,e,n){if(t==null)return t;var r=[],i=0;return Pc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function C_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Rc={transition:null},I_={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:Pm};function Ax(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:nc,forEach:function(t,e,n){nc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nc(t,function(){e++}),e},toArray:function(t){return nc(t,function(e){return e})||[]},only:function(t){if(!Rm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=bo;ie.Fragment=p_;ie.Profiler=g_;ie.PureComponent=_m;ie.StrictMode=m_;ie.Suspense=w_;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I_;ie.act=Ax;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Ix.call(e,c)&&!Nx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yl,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:v_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y_,_context:t},t.Consumer=t};ie.createElement=_x;ie.createFactory=function(t){var e=_x.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:b_,render:t}};ie.isValidElement=Rm;ie.lazy=function(t){return{$$typeof:S_,_payload:{_status:-1,_result:t},_init:C_}};ie.memo=function(t,e){return{$$typeof:x_,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Rc.transition;Rc.transition={};try{t()}finally{Rc.transition=e}};ie.unstable_act=Ax;ie.useCallback=function(t,e){return _t.current.useCallback(t,e)};ie.useContext=function(t){return _t.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ie.useEffect=function(t,e){return _t.current.useEffect(t,e)};ie.useId=function(){return _t.current.useId()};ie.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return _t.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ie.useRef=function(t){return _t.current.useRef(t)};ie.useState=function(t){return _t.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return _t.current.useTransition()};ie.version="18.3.1";Sx.exports=ie;var z=Sx.exports;const ch=d_(z);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var N_=z,__=Symbol.for("react.element"),A_=Symbol.for("react.fragment"),P_=Object.prototype.hasOwnProperty,R_=N_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D_={key:!0,ref:!0,__self:!0,__source:!0};function Px(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)P_.call(e,r)&&!D_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:__,type:t,key:s,ref:o,props:i,_owner:R_.current}}lh.Fragment=A_;lh.jsx=Px;lh.jsxs=Px;xx.exports=lh;var g=xx.exports,zf={},Rx={exports:{}},Xt={},Dx={exports:{}},Ox={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e($,K){var Z=$.length;$.push(K);e:for(;0<Z;){var Q=Z-1>>>1,re=$[Q];if(0<i(re,K))$[Q]=K,$[Z]=re,Z=Q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],Z=$.pop();if(Z!==K){$[0]=Z;e:for(var Q=0,re=$.length,Ie=re>>>1;Q<Ie;){var Zt=2*(Q+1)-1,en=$[Zt],xt=Zt+1,Bt=$[xt];if(0>i(en,Z))xt<re&&0>i(Bt,en)?($[Q]=Bt,$[xt]=Z,Q=xt):($[Q]=en,$[Zt]=Z,Q=Zt);else if(xt<re&&0>i(Bt,Z))$[Q]=Bt,$[xt]=Z,Q=xt;else break e}}return K}function i($,K){var Z=$.sortIndex-K.sortIndex;return Z!==0?Z:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,f=null,m=3,y=!1,b=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=$)r(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(u)}}function P($){if(N=!1,E($),!b)if(n(c)!==null)b=!0,Ge(L);else{var K=n(u);K!==null&&We(P,K.startTime-$)}}function L($,K){b=!1,N&&(N=!1,S(w),w=-1),y=!0;var Z=m;try{for(E(K),f=n(c);f!==null&&(!(f.expirationTime>K)||$&&!_());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var re=Q(f.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(c)&&r(c),E(K)}else r(c);f=n(c)}if(f!==null)var Ie=!0;else{var Zt=n(u);Zt!==null&&We(P,Zt.startTime-K),Ie=!1}return Ie}finally{f=null,m=Z,y=!1}}var U=!1,k=null,w=-1,T=5,I=-1;function _(){return!(t.unstable_now()-I<T)}function A(){if(k!==null){var $=t.unstable_now();I=$;var K=!0;try{K=k(!0,$)}finally{K?C():(U=!1,k=null)}}else U=!1}var C;if(typeof v=="function")C=function(){v(A)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=A,C=function(){pe.postMessage(null)}}else C=function(){R(A,0)};function Ge($){k=$,U||(U=!0,C())}function We($,K){w=R(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,Ge(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Z=m;m=K;try{return $()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=m;m=$;try{return K()}finally{m=Z}},t.unstable_scheduleCallback=function($,K,Z){var Q=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Q+Z:Q):Z=Q,$){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,$={id:h++,callback:K,priorityLevel:$,startTime:Z,expirationTime:re,sortIndex:-1},Z>Q?($.sortIndex=Z,e(u,$),n(c)===null&&$===n(u)&&(N?(S(w),w=-1):N=!0,We(P,Z-Q))):($.sortIndex=re,e(c,$),b||y||(b=!0,Ge(L))),$},t.unstable_shouldYield=_,t.unstable_wrapCallback=function($){var K=m;return function(){var Z=m;m=K;try{return $.apply(this,arguments)}finally{m=Z}}}})(Ox);Dx.exports=Ox;var O_=Dx.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var M_=z,Qt=O_;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mx=new Set,Ba={};function ls(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(Ba[t]=e,t=0;t<e.length;t++)Mx.add(e[t])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bf=Object.prototype.hasOwnProperty,L_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function j_(t){return Bf.call(n0,t)?!0:Bf.call(t0,t)?!1:L_.test(t)?n0[t]=!0:(t0[t]=!0,!1)}function F_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U_(t,e,n,r){if(e===null||typeof e>"u"||F_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dm=/[\-:]([a-z])/g;function Om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dm,Om);lt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dm,Om);lt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dm,Om);lt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var i=lt.hasOwnProperty(e)?lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U_(e,n,i,r)&&(n=null),r||i===null?j_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Er=M_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rc=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Lm=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),Lx=Symbol.for("react.provider"),jx=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),qf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),Fm=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Fx=Symbol.for("react.offscreen"),r0=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=r0&&t[r0]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Od;function ua(t){if(Od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Od=e&&e[1]||""}return`
`+Od+t}var Md=!1;function Ld(t,e){if(!t||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ua(t):""}function V_(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function Gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case Ns:return"Portal";case $f:return"Profiler";case Lm:return"StrictMode";case qf:return"Suspense";case Hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jx:return(t.displayName||"Context")+".Consumer";case Lx:return(t._context.displayName||"Context")+".Provider";case jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fm:return e=t.displayName||null,e!==null?e:Gf(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return Gf(t(e))}catch{}}return null}function z_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gf(e);case 8:return e===Lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ux(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B_(t){var e=Ux(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=B_(t))}function Vx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ux(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ou(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wf(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zx(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function Kf(t,e){zx(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qf(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qf(t,e,n){(e!=="number"||ou(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ha=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(ha(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function Bx(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $x(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$x(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sc,qx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$_=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){$_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function Hx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function Gx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var q_=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jf(t,e){if(e){if(q_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function Zf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ep=null;function Um(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tp=null,Hs=null,Gs=null;function l0(t){if(t=wl(t)){if(typeof tp!="function")throw Error(V(280));var e=t.stateNode;e&&(e=ph(e),tp(t.stateNode,t.type,e))}}function Wx(t){Hs?Gs?Gs.push(t):Gs=[t]:Hs=t}function Kx(){if(Hs){var t=Hs,e=Gs;if(Gs=Hs=null,l0(t),e)for(t=0;t<e.length;t++)l0(e[t])}}function Qx(t,e){return t(e)}function Yx(){}var jd=!1;function Xx(t,e,n){if(jd)return t(e,n);jd=!0;try{return Qx(t,e,n)}finally{jd=!1,(Hs!==null||Gs!==null)&&(Yx(),Kx())}}function qa(t,e){var n=t.stateNode;if(n===null)return null;var r=ph(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var np=!1;if(pr)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){np=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{np=!1}function H_(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ea=!1,au=null,lu=!1,rp=null,G_={onError:function(t){Ea=!0,au=t}};function W_(t,e,n,r,i,s,o,a,c){Ea=!1,au=null,H_.apply(G_,arguments)}function K_(t,e,n,r,i,s,o,a,c){if(W_.apply(this,arguments),Ea){if(Ea){var u=au;Ea=!1,au=null}else throw Error(V(198));lu||(lu=!0,rp=u)}}function cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c0(t){if(cs(t)!==t)throw Error(V(188))}function Q_(t){var e=t.alternate;if(!e){if(e=cs(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c0(i),t;if(s===r)return c0(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function Zx(t){return t=Q_(t),t!==null?eS(t):null}function eS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eS(t);if(e!==null)return e;t=t.sibling}return null}var tS=Qt.unstable_scheduleCallback,u0=Qt.unstable_cancelCallback,Y_=Qt.unstable_shouldYield,X_=Qt.unstable_requestPaint,je=Qt.unstable_now,J_=Qt.unstable_getCurrentPriorityLevel,Vm=Qt.unstable_ImmediatePriority,nS=Qt.unstable_UserBlockingPriority,cu=Qt.unstable_NormalPriority,Z_=Qt.unstable_LowPriority,rS=Qt.unstable_IdlePriority,uh=null,jn=null;function e2(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(uh,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:r2,t2=Math.log,n2=Math.LN2;function r2(t){return t>>>=0,t===0?32:31-(t2(t)/n2|0)|0}var oc=64,ac=4194304;function da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=da(a):(s&=o,s!==0&&(r=da(s)))}else o=n&~i,o!==0?r=da(o):s!==0&&(r=da(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function i2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=i2(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function ip(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iS(){var t=oc;return oc<<=1,!(oc&4194240)&&(oc=64),t}function Fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function o2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function sS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oS,Bm,aS,lS,cS,sp=!1,lc=[],Hr=null,Gr=null,Wr=null,Ha=new Map,Ga=new Map,jr=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ga.delete(e.pointerId)}}function Ko(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wl(e),e!==null&&Bm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l2(t,e,n,r,i){switch(e){case"focusin":return Hr=Ko(Hr,t,e,n,r,i),!0;case"dragenter":return Gr=Ko(Gr,t,e,n,r,i),!0;case"mouseover":return Wr=Ko(Wr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ha.set(s,Ko(Ha.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ga.set(s,Ko(Ga.get(s)||null,t,e,n,r,i)),!0}return!1}function uS(t){var e=ji(t.target);if(e!==null){var n=cs(e);if(n!==null){if(e=n.tag,e===13){if(e=Jx(n),e!==null){t.blockedOn=e,cS(t.priority,function(){aS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=op(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ep=r,n.target.dispatchEvent(r),ep=null}else return e=wl(n),e!==null&&Bm(e),t.blockedOn=n,!1;e.shift()}return!0}function d0(t,e,n){Dc(t)&&n.delete(e)}function c2(){sp=!1,Hr!==null&&Dc(Hr)&&(Hr=null),Gr!==null&&Dc(Gr)&&(Gr=null),Wr!==null&&Dc(Wr)&&(Wr=null),Ha.forEach(d0),Ga.forEach(d0)}function Qo(t,e){t.blockedOn===e&&(t.blockedOn=null,sp||(sp=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,c2)))}function Wa(t){function e(i){return Qo(i,t)}if(0<lc.length){Qo(lc[0],t);for(var n=1;n<lc.length;n++){var r=lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hr!==null&&Qo(Hr,t),Gr!==null&&Qo(Gr,t),Wr!==null&&Qo(Wr,t),Ha.forEach(e),Ga.forEach(e),n=0;n<jr.length;n++)r=jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jr.length&&(n=jr[0],n.blockedOn===null);)uS(n),n.blockedOn===null&&jr.shift()}var Ws=Er.ReactCurrentBatchConfig,hu=!0;function u2(t,e,n,r){var i=ge,s=Ws.transition;Ws.transition=null;try{ge=1,$m(t,e,n,r)}finally{ge=i,Ws.transition=s}}function h2(t,e,n,r){var i=ge,s=Ws.transition;Ws.transition=null;try{ge=4,$m(t,e,n,r)}finally{ge=i,Ws.transition=s}}function $m(t,e,n,r){if(hu){var i=op(t,e,n,r);if(i===null)Kd(t,e,r,du,n),h0(t,r);else if(l2(i,t,e,n,r))r.stopPropagation();else if(h0(t,r),e&4&&-1<a2.indexOf(t)){for(;i!==null;){var s=wl(i);if(s!==null&&oS(s),s=op(t,e,n,r),s===null&&Kd(t,e,r,du,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Kd(t,e,r,null,n)}}var du=null;function op(t,e,n,r){if(du=null,t=Um(r),t=ji(t),t!==null)if(e=cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return du=t,null}function hS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J_()){case Vm:return 1;case nS:return 4;case cu:case Z_:return 16;case rS:return 536870912;default:return 16}default:return 16}}var Br=null,qm=null,Oc=null;function dS(){if(Oc)return Oc;var t,e=qm,n=e.length,r,i="value"in Br?Br.value:Br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Oc=i.slice(t,1<r?1-r:void 0)}function Mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cc(){return!0}function f0(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cc:f0,this.isPropagationStopped=f0,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hm=Jt(wo),bl=Re({},wo,{view:0,detail:0}),d2=Jt(bl),Ud,Vd,Yo,hh=Re({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yo&&(Yo&&t.type==="mousemove"?(Ud=t.screenX-Yo.screenX,Vd=t.screenY-Yo.screenY):Vd=Ud=0,Yo=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:Vd}}),p0=Jt(hh),f2=Re({},hh,{dataTransfer:0}),p2=Jt(f2),m2=Re({},bl,{relatedTarget:0}),zd=Jt(m2),g2=Re({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),y2=Jt(g2),v2=Re({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b2=Jt(v2),w2=Re({},wo,{data:0}),m0=Jt(w2),x2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E2[t])?!!e[t]:!1}function Gm(){return T2}var k2=Re({},bl,{key:function(t){if(t.key){var e=x2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(t){return t.type==="keypress"?Mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C2=Jt(k2),I2=Re({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=Jt(I2),N2=Re({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),_2=Jt(N2),A2=Re({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),P2=Jt(A2),R2=Re({},hh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=Jt(R2),O2=[9,13,27,32],Wm=pr&&"CompositionEvent"in window,Ta=null;pr&&"documentMode"in document&&(Ta=document.documentMode);var M2=pr&&"TextEvent"in window&&!Ta,fS=pr&&(!Wm||Ta&&8<Ta&&11>=Ta),y0=String.fromCharCode(32),v0=!1;function pS(t,e){switch(t){case"keyup":return O2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function L2(t,e){switch(t){case"compositionend":return mS(e);case"keypress":return e.which!==32?null:(v0=!0,y0);case"textInput":return t=e.data,t===y0&&v0?null:t;default:return null}}function j2(t,e){if(As)return t==="compositionend"||!Wm&&pS(t,e)?(t=dS(),Oc=qm=Br=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fS&&e.locale!=="ko"?null:e.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!F2[t.type]:e==="textarea"}function gS(t,e,n,r){Wx(r),e=fu(e,"onChange"),0<e.length&&(n=new Hm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ka=null,Ka=null;function U2(t){IS(t,0)}function dh(t){var e=Ds(t);if(Vx(e))return t}function V2(t,e){if(t==="change")return e}var yS=!1;if(pr){var Bd;if(pr){var $d="oninput"in document;if(!$d){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),$d=typeof w0.oninput=="function"}Bd=$d}else Bd=!1;yS=Bd&&(!document.documentMode||9<document.documentMode)}function x0(){ka&&(ka.detachEvent("onpropertychange",vS),Ka=ka=null)}function vS(t){if(t.propertyName==="value"&&dh(Ka)){var e=[];gS(e,Ka,t,Um(t)),Xx(U2,e)}}function z2(t,e,n){t==="focusin"?(x0(),ka=e,Ka=n,ka.attachEvent("onpropertychange",vS)):t==="focusout"&&x0()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dh(Ka)}function $2(t,e){if(t==="click")return dh(e)}function q2(t,e){if(t==="input"||t==="change")return dh(e)}function H2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:H2;function Qa(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bf.call(e,i)||!In(t[i],e[i]))return!1}return!0}function S0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E0(t,e){var n=S0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S0(n)}}function bS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wS(){for(var t=window,e=ou();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ou(t.document)}return e}function Km(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G2(t){var e=wS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bS(n.ownerDocument.documentElement,n)){if(r!==null&&Km(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E0(n,s);var o=E0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W2=pr&&"documentMode"in document&&11>=document.documentMode,Ps=null,ap=null,Ca=null,lp=!1;function T0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lp||Ps==null||Ps!==ou(r)||(r=Ps,"selectionStart"in r&&Km(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ca&&Qa(Ca,r)||(Ca=r,r=fu(ap,"onSelect"),0<r.length&&(e=new Hm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},qd={},xS={};pr&&(xS=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function fh(t){if(qd[t])return qd[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xS)return qd[t]=e[n];return t}var SS=fh("animationend"),ES=fh("animationiteration"),TS=fh("animationstart"),kS=fh("transitionend"),CS=new Map,k0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){CS.set(t,e),ls(e,[t])}for(var Hd=0;Hd<k0.length;Hd++){var Gd=k0[Hd],K2=Gd.toLowerCase(),Q2=Gd[0].toUpperCase()+Gd.slice(1);gi(K2,"on"+Q2)}gi(SS,"onAnimationEnd");gi(ES,"onAnimationIteration");gi(TS,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(kS,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function C0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K_(r,e,void 0,t),t.currentTarget=null}function IS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;C0(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;C0(i,a,u),s=c}}}if(lu)throw t=rp,lu=!1,rp=null,t}function Ee(t,e){var n=e[fp];n===void 0&&(n=e[fp]=new Set);var r=t+"__bubble";n.has(r)||(NS(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),NS(n,t,r,e)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Ya(t){if(!t[hc]){t[hc]=!0,Mx.forEach(function(n){n!=="selectionchange"&&(Y2.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hc]||(e[hc]=!0,Wd("selectionchange",!1,e))}}function NS(t,e,n,r){switch(hS(e)){case 1:var i=u2;break;case 4:i=h2;break;default:i=$m}n=i.bind(null,e,n,t),i=void 0,!np||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Kd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ji(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Xx(function(){var u=s,h=Um(n),f=[];e:{var m=CS.get(t);if(m!==void 0){var y=Hm,b=t;switch(t){case"keypress":if(Mc(n)===0)break e;case"keydown":case"keyup":y=C2;break;case"focusin":b="focus",y=zd;break;case"focusout":b="blur",y=zd;break;case"beforeblur":case"afterblur":y=zd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=p2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_2;break;case SS:case ES:case TS:y=y2;break;case kS:y=P2;break;case"scroll":y=d2;break;case"wheel":y=D2;break;case"copy":case"cut":case"paste":y=b2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=g0}var N=(e&4)!==0,R=!N&&t==="scroll",S=N?m!==null?m+"Capture":null:m;N=[];for(var v=u,E;v!==null;){E=v;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,S!==null&&(P=qa(v,S),P!=null&&N.push(Xa(v,P,E)))),R)break;v=v.return}0<N.length&&(m=new y(m,b,null,n,h),f.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==ep&&(b=n.relatedTarget||n.fromElement)&&(ji(b)||b[mr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?ji(b):null,b!==null&&(R=cs(b),b!==R||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(N=p0,P="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(N=g0,P="onPointerLeave",S="onPointerEnter",v="pointer"),R=y==null?m:Ds(y),E=b==null?m:Ds(b),m=new N(P,v+"leave",y,n,h),m.target=R,m.relatedTarget=E,P=null,ji(h)===u&&(N=new N(S,v+"enter",b,n,h),N.target=E,N.relatedTarget=R,P=N),R=P,y&&b)t:{for(N=y,S=b,v=0,E=N;E;E=xs(E))v++;for(E=0,P=S;P;P=xs(P))E++;for(;0<v-E;)N=xs(N),v--;for(;0<E-v;)S=xs(S),E--;for(;v--;){if(N===S||S!==null&&N===S.alternate)break t;N=xs(N),S=xs(S)}N=null}else N=null;y!==null&&I0(f,m,y,N,!1),b!==null&&R!==null&&I0(f,R,b,N,!0)}}e:{if(m=u?Ds(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var L=V2;else if(b0(m))if(yS)L=q2;else{L=B2;var U=z2}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=$2);if(L&&(L=L(t,u))){gS(f,L,n,h);break e}U&&U(t,m,u),t==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&Qf(m,"number",m.value)}switch(U=u?Ds(u):window,t){case"focusin":(b0(U)||U.contentEditable==="true")&&(Ps=U,ap=u,Ca=null);break;case"focusout":Ca=ap=Ps=null;break;case"mousedown":lp=!0;break;case"contextmenu":case"mouseup":case"dragend":lp=!1,T0(f,n,h);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":T0(f,n,h)}var k;if(Wm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else As?pS(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(fS&&n.locale!=="ko"&&(As||w!=="onCompositionStart"?w==="onCompositionEnd"&&As&&(k=dS()):(Br=h,qm="value"in Br?Br.value:Br.textContent,As=!0)),U=fu(u,w),0<U.length&&(w=new m0(w,t,null,n,h),f.push({event:w,listeners:U}),k?w.data=k:(k=mS(n),k!==null&&(w.data=k)))),(k=M2?L2(t,n):j2(t,n))&&(u=fu(u,"onBeforeInput"),0<u.length&&(h=new m0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=k))}IS(f,e)})}function Xa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qa(t,n),s!=null&&r.unshift(Xa(t,s,i)),s=qa(t,e),s!=null&&r.push(Xa(t,s,i))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=qa(n,s),c!=null&&o.unshift(Xa(n,c,a))):i||(c=qa(n,s),c!=null&&o.push(Xa(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var X2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function N0(t){return(typeof t=="string"?t:""+t).replace(X2,`
`).replace(J2,"")}function dc(t,e,n){if(e=N0(e),N0(t)!==e&&n)throw Error(V(425))}function pu(){}var cp=null,up=null;function hp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(t){return _0.resolve(null).then(t).catch(tA)}:dp;function tA(t){setTimeout(function(){throw t})}function Qd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wa(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Mn="__reactFiber$"+xo,Ja="__reactProps$"+xo,mr="__reactContainer$"+xo,fp="__reactEvents$"+xo,nA="__reactListeners$"+xo,rA="__reactHandles$"+xo;function ji(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=A0(t);t!==null;){if(n=t[Mn])return n;t=A0(t)}return e}t=n,n=t.parentNode}return null}function wl(t){return t=t[Mn]||t[mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function ph(t){return t[Ja]||null}var pp=[],Os=-1;function yi(t){return{current:t}}function ke(t){0>Os||(t.current=pp[Os],pp[Os]=null,Os--)}function be(t,e){Os++,pp[Os]=t.current,t.current=e}var si={},bt=yi(si),jt=yi(!1),Xi=si;function no(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function mu(){ke(jt),ke(bt)}function P0(t,e,n){if(bt.current!==si)throw Error(V(168));be(bt,e),be(jt,n)}function _S(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,z_(t)||"Unknown",i));return Re({},n,r)}function gu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,Xi=bt.current,be(bt,t),be(jt,jt.current),!0}function R0(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=_S(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,ke(jt),ke(bt),be(bt,t)):ke(jt),be(jt,n)}var nr=null,mh=!1,Yd=!1;function AS(t){nr===null?nr=[t]:nr.push(t)}function iA(t){mh=!0,AS(t)}function vi(){if(!Yd&&nr!==null){Yd=!0;var t=0,e=ge;try{var n=nr;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}nr=null,mh=!1}catch(i){throw nr!==null&&(nr=nr.slice(t+1)),tS(Vm,vi),i}finally{ge=e,Yd=!1}}return null}var Ms=[],Ls=0,yu=null,vu=0,on=[],an=0,Ji=null,ir=1,sr="";function Pi(t,e){Ms[Ls++]=vu,Ms[Ls++]=yu,yu=t,vu=e}function PS(t,e,n){on[an++]=ir,on[an++]=sr,on[an++]=Ji,Ji=t;var r=ir;t=sr;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ir=1<<32-En(e)+i|n<<i|r,sr=s+t}else ir=1<<s|n<<i|r,sr=t}function Qm(t){t.return!==null&&(Pi(t,1),PS(t,1,0))}function Ym(t){for(;t===yu;)yu=Ms[--Ls],Ms[Ls]=null,vu=Ms[--Ls],Ms[Ls]=null;for(;t===Ji;)Ji=on[--an],on[an]=null,sr=on[--an],on[an]=null,ir=on[--an],on[an]=null}var Wt=null,Ht=null,Ne=!1,xn=null;function RS(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:ir,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Ht=null,!0):!1;default:return!1}}function mp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gp(t){if(Ne){var e=Ht;if(e){var n=e;if(!D0(t,e)){if(mp(t))throw Error(V(418));e=Kr(n.nextSibling);var r=Wt;e&&D0(t,e)?RS(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Wt=t)}}else{if(mp(t))throw Error(V(418));t.flags=t.flags&-4097|2,Ne=!1,Wt=t}}}function O0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function fc(t){if(t!==Wt)return!1;if(!Ne)return O0(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hp(t.type,t.memoizedProps)),e&&(e=Ht)){if(mp(t))throw DS(),Error(V(418));for(;e;)RS(t,e),e=Kr(e.nextSibling)}if(O0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Wt?Kr(t.stateNode.nextSibling):null;return!0}function DS(){for(var t=Ht;t;)t=Kr(t.nextSibling)}function ro(){Ht=Wt=null,Ne=!1}function Xm(t){xn===null?xn=[t]:xn.push(t)}var sA=Er.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function pc(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M0(t){var e=t._init;return e(t._payload)}function OS(t){function e(S,v){if(t){var E=S.deletions;E===null?(S.deletions=[v],S.flags|=16):E.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function i(S,v){return S=Jr(S,v),S.index=0,S.sibling=null,S}function s(S,v,E){return S.index=E,t?(E=S.alternate,E!==null?(E=E.index,E<v?(S.flags|=2,v):E):(S.flags|=2,v)):(S.flags|=1048576,v)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,v,E,P){return v===null||v.tag!==6?(v=rf(E,S.mode,P),v.return=S,v):(v=i(v,E),v.return=S,v)}function c(S,v,E,P){var L=E.type;return L===_s?h(S,v,E.props.children,P,E.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&M0(L)===v.type)?(P=i(v,E.props),P.ref=Xo(S,v,E),P.return=S,P):(P=Bc(E.type,E.key,E.props,null,S.mode,P),P.ref=Xo(S,v,E),P.return=S,P)}function u(S,v,E,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=sf(E,S.mode,P),v.return=S,v):(v=i(v,E.children||[]),v.return=S,v)}function h(S,v,E,P,L){return v===null||v.tag!==7?(v=Ki(E,S.mode,P,L),v.return=S,v):(v=i(v,E),v.return=S,v)}function f(S,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=rf(""+v,S.mode,E),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rc:return E=Bc(v.type,v.key,v.props,null,S.mode,E),E.ref=Xo(S,null,v),E.return=S,E;case Ns:return v=sf(v,S.mode,E),v.return=S,v;case Or:var P=v._init;return f(S,P(v._payload),E)}if(ha(v)||Go(v))return v=Ki(v,S.mode,E,null),v.return=S,v;pc(S,v)}return null}function m(S,v,E,P){var L=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(S,v,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rc:return E.key===L?c(S,v,E,P):null;case Ns:return E.key===L?u(S,v,E,P):null;case Or:return L=E._init,m(S,v,L(E._payload),P)}if(ha(E)||Go(E))return L!==null?null:h(S,v,E,P,null);pc(S,E)}return null}function y(S,v,E,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(E)||null,a(v,S,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case rc:return S=S.get(P.key===null?E:P.key)||null,c(v,S,P,L);case Ns:return S=S.get(P.key===null?E:P.key)||null,u(v,S,P,L);case Or:var U=P._init;return y(S,v,E,U(P._payload),L)}if(ha(P)||Go(P))return S=S.get(E)||null,h(v,S,P,L,null);pc(v,P)}return null}function b(S,v,E,P){for(var L=null,U=null,k=v,w=v=0,T=null;k!==null&&w<E.length;w++){k.index>w?(T=k,k=null):T=k.sibling;var I=m(S,k,E[w],P);if(I===null){k===null&&(k=T);break}t&&k&&I.alternate===null&&e(S,k),v=s(I,v,w),U===null?L=I:U.sibling=I,U=I,k=T}if(w===E.length)return n(S,k),Ne&&Pi(S,w),L;if(k===null){for(;w<E.length;w++)k=f(S,E[w],P),k!==null&&(v=s(k,v,w),U===null?L=k:U.sibling=k,U=k);return Ne&&Pi(S,w),L}for(k=r(S,k);w<E.length;w++)T=y(k,S,w,E[w],P),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?w:T.key),v=s(T,v,w),U===null?L=T:U.sibling=T,U=T);return t&&k.forEach(function(_){return e(S,_)}),Ne&&Pi(S,w),L}function N(S,v,E,P){var L=Go(E);if(typeof L!="function")throw Error(V(150));if(E=L.call(E),E==null)throw Error(V(151));for(var U=L=null,k=v,w=v=0,T=null,I=E.next();k!==null&&!I.done;w++,I=E.next()){k.index>w?(T=k,k=null):T=k.sibling;var _=m(S,k,I.value,P);if(_===null){k===null&&(k=T);break}t&&k&&_.alternate===null&&e(S,k),v=s(_,v,w),U===null?L=_:U.sibling=_,U=_,k=T}if(I.done)return n(S,k),Ne&&Pi(S,w),L;if(k===null){for(;!I.done;w++,I=E.next())I=f(S,I.value,P),I!==null&&(v=s(I,v,w),U===null?L=I:U.sibling=I,U=I);return Ne&&Pi(S,w),L}for(k=r(S,k);!I.done;w++,I=E.next())I=y(k,S,w,I.value,P),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?w:I.key),v=s(I,v,w),U===null?L=I:U.sibling=I,U=I);return t&&k.forEach(function(A){return e(S,A)}),Ne&&Pi(S,w),L}function R(S,v,E,P){if(typeof E=="object"&&E!==null&&E.type===_s&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case rc:e:{for(var L=E.key,U=v;U!==null;){if(U.key===L){if(L=E.type,L===_s){if(U.tag===7){n(S,U.sibling),v=i(U,E.props.children),v.return=S,S=v;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&M0(L)===U.type){n(S,U.sibling),v=i(U,E.props),v.ref=Xo(S,U,E),v.return=S,S=v;break e}n(S,U);break}else e(S,U);U=U.sibling}E.type===_s?(v=Ki(E.props.children,S.mode,P,E.key),v.return=S,S=v):(P=Bc(E.type,E.key,E.props,null,S.mode,P),P.ref=Xo(S,v,E),P.return=S,S=P)}return o(S);case Ns:e:{for(U=E.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(S,v.sibling),v=i(v,E.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=sf(E,S.mode,P),v.return=S,S=v}return o(S);case Or:return U=E._init,R(S,v,U(E._payload),P)}if(ha(E))return b(S,v,E,P);if(Go(E))return N(S,v,E,P);pc(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(S,v.sibling),v=i(v,E),v.return=S,S=v):(n(S,v),v=rf(E,S.mode,P),v.return=S,S=v),o(S)):n(S,v)}return R}var io=OS(!0),MS=OS(!1),bu=yi(null),wu=null,js=null,Jm=null;function Zm(){Jm=js=wu=null}function eg(t){var e=bu.current;ke(bu),t._currentValue=e}function yp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){wu=t,Jm=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(wu===null)throw Error(V(308));js=t,wu.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Fi=null;function tg(t){Fi===null?Fi=[t]:Fi.push(t)}function LS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,tg(e)):(n.next=i.next,i.next=n),e.interleaved=n,gr(t,r)}function gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mr=!1;function ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gr(t,n)}return i=r.interleaved,i===null?(e.next=e,tg(r)):(e.next=i.next,i.next=e),r.interleaved=e,gr(t,n)}function Lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zm(t,n)}}function L0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,r){var i=t.updateQueue;Mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,h=u=c=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,N=a;switch(m=e,y=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){f=b.call(y,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,m=typeof b=="function"?b.call(y,f,m):b,m==null)break e;f=Re({},f,m);break e;case 2:Mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=f}}function j0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var xl={},Fn=yi(xl),Za=yi(xl),el=yi(xl);function Ui(t){if(t===xl)throw Error(V(174));return t}function rg(t,e){switch(be(el,e),be(Za,t),be(Fn,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xf(e,t)}ke(Fn),be(Fn,e)}function so(){ke(Fn),ke(Za),ke(el)}function FS(t){Ui(el.current);var e=Ui(Fn.current),n=Xf(e,t.type);e!==n&&(be(Za,t),be(Fn,n))}function ig(t){Za.current===t&&(ke(Fn),ke(Za))}var _e=yi(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xd=[];function sg(){for(var t=0;t<Xd.length;t++)Xd[t]._workInProgressVersionPrimary=null;Xd.length=0}var jc=Er.ReactCurrentDispatcher,Jd=Er.ReactCurrentBatchConfig,Zi=0,Pe=null,Ke=null,et=null,Eu=!1,Ia=!1,tl=0,oA=0;function dt(){throw Error(V(321))}function og(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function ag(t,e,n,r,i,s){if(Zi=s,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?uA:hA,t=n(r,i),Ia){s=0;do{if(Ia=!1,tl=0,25<=s)throw Error(V(301));s+=1,et=Ke=null,e.updateQueue=null,jc.current=dA,t=n(r,i)}while(Ia)}if(jc.current=Tu,e=Ke!==null&&Ke.next!==null,Zi=0,et=Ke=Pe=null,Eu=!1,e)throw Error(V(300));return t}function lg(){var t=tl!==0;return tl=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Pe.memoizedState=et=t:et=et.next=t,et}function fn(){if(Ke===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=et===null?Pe.memoizedState:et.next;if(e!==null)et=e,Ke=t;else{if(t===null)throw Error(V(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},et===null?Pe.memoizedState=et=t:et=et.next=t}return et}function nl(t,e){return typeof e=="function"?e(t):e}function Zd(t){var e=fn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var h=u.lane;if((Zi&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Pe.lanes|=h,es|=h}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,In(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pe.lanes|=s,es|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ef(t){var e=fn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);In(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function US(){}function VS(t,e){var n=Pe,r=fn(),i=e(),s=!In(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,cg($S.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,rl(9,BS.bind(null,n,r,i,e),void 0,null),tt===null)throw Error(V(349));Zi&30||zS(n,e,i)}return i}function zS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BS(t,e,n,r){e.value=n,e.getSnapshot=r,qS(e)&&HS(t)}function $S(t,e,n){return n(function(){qS(e)&&HS(t)})}function qS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function HS(t){var e=gr(t,1);e!==null&&Tn(e,t,1,-1)}function F0(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:t},e.queue=t,t=t.dispatch=cA.bind(null,Pe,t),[e.memoizedState,t]}function rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GS(){return fn().memoizedState}function Fc(t,e,n,r){var i=Rn();Pe.flags|=t,i.memoizedState=rl(1|e,n,void 0,r===void 0?null:r)}function gh(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&og(r,o.deps)){i.memoizedState=rl(e,n,s,r);return}}Pe.flags|=t,i.memoizedState=rl(1|e,n,s,r)}function U0(t,e){return Fc(8390656,8,t,e)}function cg(t,e){return gh(2048,8,t,e)}function WS(t,e){return gh(4,2,t,e)}function KS(t,e){return gh(4,4,t,e)}function QS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YS(t,e,n){return n=n!=null?n.concat([t]):null,gh(4,4,QS.bind(null,e,t),n)}function ug(){}function XS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&og(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JS(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&og(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZS(t,e,n){return Zi&21?(In(n,e)||(n=iS(),Pe.lanes|=n,es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function aA(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Jd.transition;Jd.transition={};try{t(!1),e()}finally{ge=n,Jd.transition=r}}function eE(){return fn().memoizedState}function lA(t,e,n){var r=Xr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tE(t))nE(e,n);else if(n=LS(t,e,n,r),n!==null){var i=Nt();Tn(n,t,r,i),rE(n,e,r)}}function cA(t,e,n){var r=Xr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tE(t))nE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,In(a,o)){var c=e.interleaved;c===null?(i.next=i,tg(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=LS(t,e,i,r),n!==null&&(i=Nt(),Tn(n,t,r,i),rE(n,e,r))}}function tE(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function nE(t,e){Ia=Eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zm(t,n)}}var Tu={readContext:dn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},uA={readContext:dn,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:U0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,QS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lA.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:F0,useDebugValue:ug,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=F0(!1),e=t[0];return t=aA.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=Rn();if(Ne){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),tt===null)throw Error(V(349));Zi&30||zS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,U0($S.bind(null,r,s,t),[t]),r.flags|=2048,rl(9,BS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=tt.identifierPrefix;if(Ne){var n=sr,r=ir;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hA={readContext:dn,useCallback:XS,useContext:dn,useEffect:cg,useImperativeHandle:YS,useInsertionEffect:WS,useLayoutEffect:KS,useMemo:JS,useReducer:Zd,useRef:GS,useState:function(){return Zd(nl)},useDebugValue:ug,useDeferredValue:function(t){var e=fn();return ZS(e,Ke.memoizedState,t)},useTransition:function(){var t=Zd(nl)[0],e=fn().memoizedState;return[t,e]},useMutableSource:US,useSyncExternalStore:VS,useId:eE,unstable_isNewReconciler:!1},dA={readContext:dn,useCallback:XS,useContext:dn,useEffect:cg,useImperativeHandle:YS,useInsertionEffect:WS,useLayoutEffect:KS,useMemo:JS,useReducer:ef,useRef:GS,useState:function(){return ef(nl)},useDebugValue:ug,useDeferredValue:function(t){var e=fn();return Ke===null?e.memoizedState=t:ZS(e,Ke.memoizedState,t)},useTransition:function(){var t=ef(nl)[0],e=fn().memoizedState;return[t,e]},useMutableSource:US,useSyncExternalStore:VS,useId:eE,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yh={isMounted:function(t){return(t=t._reactInternals)?cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Xr(t),s=cr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qr(t,s,i),e!==null&&(Tn(e,t,i,r),Lc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Xr(t),s=cr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qr(t,s,i),e!==null&&(Tn(e,t,i,r),Lc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Xr(t),i=cr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qr(t,i,r),e!==null&&(Tn(e,t,r,n),Lc(e,t,r))}};function V0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qa(n,r)||!Qa(i,s):!0}function iE(t,e,n){var r=!1,i=si,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=Ft(e)?Xi:bt.current,r=e.contextTypes,s=(r=r!=null)?no(t,i):si),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function z0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yh.enqueueReplaceState(e,e.state,null)}function bp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ng(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=Ft(e)?Xi:bt.current,i.context=no(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yh.enqueueReplaceState(i,i.state,null),xu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do n+=V_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fA=typeof WeakMap=="function"?WeakMap:Map;function sE(t,e,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cu||(Cu=!0,_p=r),wp(t,e)},n}function oE(t,e,n){n=cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wp(t,e),typeof r!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=IA.bind(null,t,e,n),e.then(t,t))}function $0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function q0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cr(-1,1),e.tag=2,Qr(n,e,1))),n.lanes|=1),t)}var pA=Er.ReactCurrentOwner,Lt=!1;function Ct(t,e,n,r){e.child=t===null?MS(e,null,n,r):io(e,t.child,n,r)}function H0(t,e,n,r,i){n=n.render;var s=e.ref;return Ks(e,i),r=ag(t,e,n,r,s,i),n=lg(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yr(t,e,i)):(Ne&&n&&Qm(e),e.flags|=1,Ct(t,e,r,i),e.child)}function G0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aE(t,e,s,r,i)):(t=Bc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(o,r)&&t.ref===e.ref)return yr(t,e,i)}return e.flags|=1,t=Jr(s,r),t.ref=e.ref,t.return=e,e.child=t}function aE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qa(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,yr(t,e,i)}return xp(t,e,n,r,i)}function lE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Us,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Us,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(Us,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(Us,qt),qt|=r;return Ct(t,e,i,n),e.child}function cE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xp(t,e,n,r,i){var s=Ft(n)?Xi:bt.current;return s=no(e,s),Ks(e,i),n=ag(t,e,n,r,s,i),r=lg(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yr(t,e,i)):(Ne&&r&&Qm(e),e.flags|=1,Ct(t,e,n,i),e.child)}function W0(t,e,n,r,i){if(Ft(n)){var s=!0;gu(e)}else s=!1;if(Ks(e,i),e.stateNode===null)Uc(t,e),iE(e,n,r),bp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dn(u):(u=Ft(n)?Xi:bt.current,u=no(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&z0(e,o,r,u),Mr=!1;var m=e.memoizedState;o.state=m,xu(e,r,o,i),c=e.memoizedState,a!==r||m!==c||jt.current||Mr?(typeof h=="function"&&(vp(e,n,h,r),c=e.memoizedState),(a=Mr||V0(e,n,a,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:bn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=dn(c):(c=Ft(n)?Xi:bt.current,c=no(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==c)&&z0(e,o,r,c),Mr=!1,m=e.memoizedState,o.state=m,xu(e,r,o,i);var b=e.memoizedState;a!==f||m!==b||jt.current||Mr?(typeof y=="function"&&(vp(e,n,y,r),b=e.memoizedState),(u=Mr||V0(e,n,u,r,m,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Sp(t,e,n,r,s,i)}function Sp(t,e,n,r,i,s){cE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&R0(e,n,!1),yr(t,e,s);r=e.stateNode,pA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=io(e,t.child,null,s),e.child=io(e,null,a,s)):Ct(t,e,a,s),e.memoizedState=r.state,i&&R0(e,n,!0),e.child}function uE(t){var e=t.stateNode;e.pendingContext?P0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P0(t,e.context,!1),rg(t,e.containerInfo)}function K0(t,e,n,r,i){return ro(),Xm(i),e.flags|=256,Ct(t,e,n,r),e.child}var Ep={dehydrated:null,treeContext:null,retryLane:0};function Tp(t){return{baseLanes:t,cachePool:null,transitions:null}}function hE(t,e,n){var r=e.pendingProps,i=_e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(_e,i&1),t===null)return gp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wh(o,r,0,null),t=Ki(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tp(n),e.memoizedState=Ep,t):hg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Jr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Jr(a,s):(s=Ki(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Tp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ep,r}return s=t.child,t=s.sibling,r=Jr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hg(t,e){return e=wh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mc(t,e,n,r){return r!==null&&Xm(r),io(e,t.child,null,n),t=hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tf(Error(V(422))),mc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wh({mode:"visible",children:r.children},i,0,null),s=Ki(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&io(e,t.child,null,o),e.child.memoizedState=Tp(o),e.memoizedState=Ep,s);if(!(e.mode&1))return mc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(V(419)),r=tf(s,r,void 0),mc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Lt||a){if(r=tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gr(t,i),Tn(r,t,i,-1))}return yg(),r=tf(Error(V(421))),mc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=Kr(i.nextSibling),Wt=e,Ne=!0,xn=null,t!==null&&(on[an++]=ir,on[an++]=sr,on[an++]=Ji,ir=t.id,sr=t.overflow,Ji=e),e=hg(e,r.children),e.flags|=4096,e)}function Q0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yp(t.return,e,n)}function nf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ct(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q0(t,n,e);else if(t.tag===19)Q0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(_e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Su(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nf(e,!0,n,null,s);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gA(t,e,n){switch(e.tag){case 3:uE(e),ro();break;case 5:FS(e);break;case 1:Ft(e.type)&&gu(e);break;case 4:rg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?hE(t,e,n):(be(_e,_e.current&1),t=yr(t,e,n),t!==null?t.sibling:null);be(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,lE(t,e,n)}return yr(t,e,n)}var fE,kp,pE,mE;fE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kp=function(){};pE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ui(Fn.current);var s=null;switch(n){case"input":i=Wf(t,i),r=Wf(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=Yf(t,i),r=Yf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pu)}Jf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ba.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ba.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jo(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yA(t,e,n){var r=e.pendingProps;switch(Ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Ft(e.type)&&mu(),ft(e),null;case 3:return r=e.stateNode,so(),ke(jt),ke(bt),sg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(Rp(xn),xn=null))),kp(t,e),ft(e),null;case 5:ig(e);var i=Ui(el.current);if(n=e.type,t!==null&&e.stateNode!=null)pE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return ft(e),null}if(t=Ui(Fn.current),fc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[Ja]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<fa.length;i++)Ee(fa[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":i0(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":o0(r,s),Ee("invalid",r)}Jf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",""+a]):Ba.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":ic(r),s0(r,s,!0);break;case"textarea":ic(r),a0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=pu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$x(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Ja]=r,fE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zf(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<fa.length;i++)Ee(fa[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":i0(t,r),i=Wf(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":o0(t,r),i=Yf(t,r),Ee("invalid",t);break;default:i=r}Jf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Gx(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qx(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$a(t,c):typeof c=="number"&&$a(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ba.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ee("scroll",t):c!=null&&Mm(t,s,c,o))}switch(n){case"input":ic(t),s0(t,r,!1);break;case"textarea":ic(t),a0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qs(t,!!r.multiple,s,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)mE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=Ui(el.current),Ui(Fn.current),fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return ft(e),null;case 13:if(ke(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Ht!==null&&e.mode&1&&!(e.flags&128))DS(),ro(),e.flags|=98560,s=!1;else if(s=fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[Mn]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),s=!1}else xn!==null&&(Rp(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Qe===0&&(Qe=3):yg())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return so(),kp(t,e),t===null&&Ya(e.stateNode.containerInfo),ft(e),null;case 10:return eg(e.type._context),ft(e),null;case 17:return Ft(e.type)&&mu(),ft(e),null;case 19:if(ke(_e),s=e.memoizedState,s===null)return ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jo(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Su(t),o!==null){for(e.flags|=128,Jo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(_e,_e.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>ao&&(e.flags|=128,r=!0,Jo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Su(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return ft(e),null}else 2*je()-s.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,r=!0,Jo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=_e.current,be(_e,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return gg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function vA(t,e){switch(Ym(e),e.tag){case 1:return Ft(e.type)&&mu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),ke(jt),ke(bt),sg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ig(e),null;case 13:if(ke(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(_e),null;case 4:return so(),null;case 10:return eg(e.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var gc=!1,yt=!1,bA=typeof WeakSet=="function"?WeakSet:Set,G=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function gE(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Y0=!1;function wA(t,e){if(cp=hu,t=wS(),Km(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(up={focusedElem:t,selectionRange:n},hu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,R=b.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?N:bn(e.type,N),R);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(P){Me(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return b=Y0,Y0=!1,b}function Na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gE(e,n,s)}i=i.next}while(i!==r)}}function vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yE(t){var e=t.alternate;e!==null&&(t.alternate=null,yE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Ja],delete e[fp],delete e[nA],delete e[rA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vE(t){return t.tag===5||t.tag===3||t.tag===4}function X0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pu));else if(r!==4&&(t=t.child,t!==null))for(Ip(t,e,n),t=t.sibling;t!==null;)Ip(t,e,n),t=t.sibling}function Np(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Np(t,e,n),t=t.sibling;t!==null;)Np(t,e,n),t=t.sibling}var rt=null,wn=!1;function _r(t,e,n){for(n=n.child;n!==null;)bE(t,e,n),n=n.sibling}function bE(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(uh,n)}catch{}switch(n.tag){case 5:yt||Fs(n,e);case 6:var r=rt,i=wn;rt=null,_r(t,e,n),rt=r,wn=i,rt!==null&&(wn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(wn?(t=rt,n=n.stateNode,t.nodeType===8?Qd(t.parentNode,n):t.nodeType===1&&Qd(t,n),Wa(t)):Qd(rt,n.stateNode));break;case 4:r=rt,i=wn,rt=n.stateNode.containerInfo,wn=!0,_r(t,e,n),rt=r,wn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gE(n,e,o),i=i.next}while(i!==r)}_r(t,e,n);break;case 1:if(!yt&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,_r(t,e,n),yt=r):_r(t,e,n);break;default:_r(t,e,n)}}function J0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bA),e.forEach(function(r){var i=_A.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,wn=!1;break e;case 3:rt=a.stateNode.containerInfo,wn=!0;break e;case 4:rt=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(rt===null)throw Error(V(160));bE(s,o,i),rt=null,wn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Me(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wE(e,t),e=e.sibling}function wE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),Pn(t),r&4){try{Na(3,t,t.return),vh(3,t)}catch(N){Me(t,t.return,N)}try{Na(5,t,t.return)}catch(N){Me(t,t.return,N)}}break;case 1:gn(e,t),Pn(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(gn(e,t),Pn(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var i=t.stateNode;try{$a(i,"")}catch(N){Me(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&zx(i,s),Zf(a,o);var u=Zf(a,s);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Gx(i,f):h==="dangerouslySetInnerHTML"?qx(i,f):h==="children"?$a(i,f):Mm(i,h,f,u)}switch(a){case"input":Kf(i,s);break;case"textarea":Bx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?qs(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?qs(i,!!s.multiple,s.defaultValue,!0):qs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ja]=s}catch(N){Me(t,t.return,N)}}break;case 6:if(gn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Me(t,t.return,N)}}break;case 3:if(gn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wa(e.containerInfo)}catch(N){Me(t,t.return,N)}break;case 4:gn(e,t),Pn(t);break;case 13:gn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pg=je())),r&4&&J0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(u=yt)||h,gn(e,t),yt=u):gn(e,t),Pn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(m=G,y=m.child,m.tag){case 0:case 11:case 14:case 15:Na(4,m,m.return);break;case 1:Fs(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Me(r,n,N)}}break;case 5:Fs(m,m.return);break;case 22:if(m.memoizedState!==null){eb(f);continue}}y!==null?(y.return=m,G=y):eb(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Hx("display",o))}catch(N){Me(t,t.return,N)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(N){Me(t,t.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gn(e,t),Pn(t),r&4&&J0(t);break;case 21:break;default:gn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vE(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($a(i,""),r.flags&=-33);var s=X0(t);Np(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=X0(t);Ip(t,a,o);break;default:throw Error(V(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xA(t,e,n){G=t,xE(t)}function xE(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gc;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||yt;a=gc;var u=yt;if(gc=o,(yt=c)&&!u)for(G=i;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?tb(i):c!==null?(c.return=o,G=c):tb(i);for(;s!==null;)G=s,xE(s),s=s.sibling;G=i,gc=a,yt=u}Z0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Z0(t)}}function Z0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||vh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Wa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}yt||e.flags&512&&Cp(e)}catch(m){Me(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function eb(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function tb(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vh(4,e)}catch(c){Me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Me(e,i,c)}}var s=e.return;try{Cp(e)}catch(c){Me(e,s,c)}break;case 5:var o=e.return;try{Cp(e)}catch(c){Me(e,o,c)}}}catch(c){Me(e,e.return,c)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var SA=Math.ceil,ku=Er.ReactCurrentDispatcher,dg=Er.ReactCurrentOwner,un=Er.ReactCurrentBatchConfig,de=0,tt=null,$e=null,at=0,qt=0,Us=yi(0),Qe=0,il=null,es=0,bh=0,fg=0,_a=null,Dt=null,pg=0,ao=1/0,tr=null,Cu=!1,_p=null,Yr=null,yc=!1,$r=null,Iu=0,Aa=0,Ap=null,Vc=-1,zc=0;function Nt(){return de&6?je():Vc!==-1?Vc:Vc=je()}function Xr(t){return t.mode&1?de&2&&at!==0?at&-at:sA.transition!==null?(zc===0&&(zc=iS()),zc):(t=ge,t!==0||(t=window.event,t=t===void 0?16:hS(t.type)),t):1}function Tn(t,e,n,r){if(50<Aa)throw Aa=0,Ap=null,Error(V(185));vl(t,n,r),(!(de&2)||t!==tt)&&(t===tt&&(!(de&2)&&(bh|=n),Qe===4&&Fr(t,at)),Ut(t,r),n===1&&de===0&&!(e.mode&1)&&(ao=je()+500,mh&&vi()))}function Ut(t,e){var n=t.callbackNode;s2(t,e);var r=uu(t,t===tt?at:0);if(r===0)n!==null&&u0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u0(n),e===1)t.tag===0?iA(nb.bind(null,t)):AS(nb.bind(null,t)),eA(function(){!(de&6)&&vi()}),n=null;else{switch(sS(r)){case 1:n=Vm;break;case 4:n=nS;break;case 16:n=cu;break;case 536870912:n=rS;break;default:n=cu}n=_E(n,SE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function SE(t,e){if(Vc=-1,zc=0,de&6)throw Error(V(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=uu(t,t===tt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nu(t,r);else{e=r;var i=de;de|=2;var s=TE();(tt!==t||at!==e)&&(tr=null,ao=je()+500,Wi(t,e));do try{kA();break}catch(a){EE(t,a)}while(1);Zm(),ku.current=s,de=i,$e!==null?e=0:(tt=null,at=0,e=Qe)}if(e!==0){if(e===2&&(i=ip(t),i!==0&&(r=i,e=Pp(t,i))),e===1)throw n=il,Wi(t,0),Fr(t,r),Ut(t,je()),n;if(e===6)Fr(t,r);else{if(i=t.current.alternate,!(r&30)&&!EA(i)&&(e=Nu(t,r),e===2&&(s=ip(t),s!==0&&(r=s,e=Pp(t,s))),e===1))throw n=il,Wi(t,0),Fr(t,r),Ut(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:Ri(t,Dt,tr);break;case 3:if(Fr(t,r),(r&130023424)===r&&(e=pg+500-je(),10<e)){if(uu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dp(Ri.bind(null,t,Dt,tr),e);break}Ri(t,Dt,tr);break;case 4:if(Fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SA(r/1960))-r,10<r){t.timeoutHandle=dp(Ri.bind(null,t,Dt,tr),r);break}Ri(t,Dt,tr);break;case 5:Ri(t,Dt,tr);break;default:throw Error(V(329))}}}return Ut(t,je()),t.callbackNode===n?SE.bind(null,t):null}function Pp(t,e){var n=_a;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=Nu(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&Rp(e)),t}function Rp(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function EA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!In(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fr(t,e){for(e&=~fg,e&=~bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function nb(t){if(de&6)throw Error(V(327));Qs();var e=uu(t,0);if(!(e&1))return Ut(t,je()),null;var n=Nu(t,e);if(t.tag!==0&&n===2){var r=ip(t);r!==0&&(e=r,n=Pp(t,r))}if(n===1)throw n=il,Wi(t,0),Fr(t,e),Ut(t,je()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,Dt,tr),Ut(t,je()),null}function mg(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(ao=je()+500,mh&&vi())}}function ts(t){$r!==null&&$r.tag===0&&!(de&6)&&Qs();var e=de;de|=1;var n=un.transition,r=ge;try{if(un.transition=null,ge=1,t)return t()}finally{ge=r,un.transition=n,de=e,!(de&6)&&vi()}}function gg(){qt=Us.current,ke(Us)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z2(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Ym(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mu();break;case 3:so(),ke(jt),ke(bt),sg();break;case 5:ig(r);break;case 4:so();break;case 13:ke(_e);break;case 19:ke(_e);break;case 10:eg(r.type._context);break;case 22:case 23:gg()}n=n.return}if(tt=t,$e=t=Jr(t.current,null),at=qt=e,Qe=0,il=null,fg=bh=es=0,Dt=_a=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fi=null}return t}function EE(t,e){do{var n=$e;try{if(Zm(),jc.current=Tu,Eu){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Eu=!1}if(Zi=0,et=Ke=Pe=null,Ia=!1,tl=0,dg.current=null,n===null||n.return===null){Qe=1,il=e,$e=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=at,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=$0(o);if(y!==null){y.flags&=-257,q0(y,o,a,s,e),y.mode&1&&B0(s,u,e),e=y,c=u;var b=e.updateQueue;if(b===null){var N=new Set;N.add(c),e.updateQueue=N}else b.add(c);break e}else{if(!(e&1)){B0(s,u,e),yg();break e}c=Error(V(426))}}else if(Ne&&a.mode&1){var R=$0(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),q0(R,o,a,s,e),Xm(oo(c,a));break e}}s=c=oo(c,a),Qe!==4&&(Qe=2),_a===null?_a=[s]:_a.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=sE(s,c,e);L0(s,S);break e;case 1:a=c;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Yr===null||!Yr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=oE(s,a,e);L0(s,P);break e}}s=s.return}while(s!==null)}CE(n)}catch(L){e=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(1)}function TE(){var t=ku.current;return ku.current=Tu,t===null?Tu:t}function yg(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(es&268435455)&&!(bh&268435455)||Fr(tt,at)}function Nu(t,e){var n=de;de|=2;var r=TE();(tt!==t||at!==e)&&(tr=null,Wi(t,e));do try{TA();break}catch(i){EE(t,i)}while(1);if(Zm(),de=n,ku.current=r,$e!==null)throw Error(V(261));return tt=null,at=0,Qe}function TA(){for(;$e!==null;)kE($e)}function kA(){for(;$e!==null&&!Y_();)kE($e)}function kE(t){var e=NE(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?CE(t):$e=e,dg.current=null}function CE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vA(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,$e=null;return}}else if(n=yA(n,e,qt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Qe===0&&(Qe=5)}function Ri(t,e,n){var r=ge,i=un.transition;try{un.transition=null,ge=1,CA(t,e,n,r)}finally{un.transition=i,ge=r}return null}function CA(t,e,n,r){do Qs();while($r!==null);if(de&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(o2(t,s),t===tt&&($e=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,_E(cu,function(){return Qs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=ge;ge=1;var a=de;de|=4,dg.current=null,wA(t,n),wE(n,t),G2(up),hu=!!cp,up=cp=null,t.current=n,xA(n),X_(),de=a,ge=o,un.transition=s}else t.current=n;if(yc&&(yc=!1,$r=t,Iu=i),s=t.pendingLanes,s===0&&(Yr=null),e2(n.stateNode),Ut(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cu)throw Cu=!1,t=_p,_p=null,t;return Iu&1&&t.tag!==0&&Qs(),s=t.pendingLanes,s&1?t===Ap?Aa++:(Aa=0,Ap=t):Aa=0,vi(),null}function Qs(){if($r!==null){var t=sS(Iu),e=un.transition,n=ge;try{if(un.transition=null,ge=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,Iu=0,de&6)throw Error(V(331));var i=de;for(de|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Na(8,h,s)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var m=h.sibling,y=h.return;if(yE(h),h===u){G=null;break}if(m!==null){m.return=y,G=m;break}G=y}}}var b=s.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Na(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,G=S;break e}G=s.return}}var v=t.current;for(G=v;G!==null;){o=G;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,G=E;else e:for(o=v;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vh(9,a)}}catch(L){Me(a,a.return,L)}if(a===o){G=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,G=P;break e}G=a.return}}if(de=i,vi(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(uh,t)}catch{}r=!0}return r}finally{ge=n,un.transition=e}}return!1}function rb(t,e,n){e=oo(n,e),e=sE(t,e,1),t=Qr(t,e,1),e=Nt(),t!==null&&(vl(t,1,e),Ut(t,e))}function Me(t,e,n){if(t.tag===3)rb(t,t,n);else for(;e!==null;){if(e.tag===3){rb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yr===null||!Yr.has(r))){t=oo(n,t),t=oE(e,t,1),e=Qr(e,t,1),t=Nt(),e!==null&&(vl(e,1,t),Ut(e,t));break}}e=e.return}}function IA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Qe===4||Qe===3&&(at&130023424)===at&&500>je()-pg?Wi(t,0):fg|=n),Ut(t,e)}function IE(t,e){e===0&&(t.mode&1?(e=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):e=1);var n=Nt();t=gr(t,e),t!==null&&(vl(t,e,n),Ut(t,n))}function NA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IE(t,n)}function _A(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),IE(t,n)}var NE;NE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,gA(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ne&&e.flags&1048576&&PS(e,vu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uc(t,e),t=e.pendingProps;var i=no(e,bt.current);Ks(e,n),i=ag(null,e,r,t,i,n);var s=lg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,gu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ng(e),i.updater=yh,e.stateNode=i,i._reactInternals=e,bp(e,r,t,n),e=Sp(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Qm(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PA(r),t=bn(r,t),i){case 0:e=xp(null,e,r,t,n);break e;case 1:e=W0(null,e,r,t,n);break e;case 11:e=H0(null,e,r,t,n);break e;case 14:e=G0(null,e,r,bn(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),xp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),W0(t,e,r,i,n);case 3:e:{if(uE(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jS(t,e),xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oo(Error(V(423)),e),e=K0(t,e,r,n,i);break e}else if(r!==i){i=oo(Error(V(424)),e),e=K0(t,e,r,n,i);break e}else for(Ht=Kr(e.stateNode.containerInfo.firstChild),Wt=e,Ne=!0,xn=null,n=MS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),r===i){e=yr(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return FS(e),t===null&&gp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hp(r,i)?o=null:s!==null&&hp(r,s)&&(e.flags|=32),cE(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&gp(e),null;case 13:return hE(t,e,n);case 4:return rg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=io(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),H0(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(bu,r._currentValue),r._currentValue=o,s!==null)if(In(s.value,o)){if(s.children===i.children&&!jt.current){e=yr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=cr(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),yp(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ks(e,n),i=dn(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=bn(r,e.pendingProps),i=bn(r.type,i),G0(t,e,r,i,n);case 15:return aE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Uc(t,e),e.tag=1,Ft(r)?(t=!0,gu(e)):t=!1,Ks(e,n),iE(e,r,i),bp(e,r,i,n),Sp(null,e,r,!0,t,n);case 19:return dE(t,e,n);case 22:return lE(t,e,n)}throw Error(V(156,e.tag))};function _E(t,e){return tS(t,e)}function AA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new AA(t,e,n,r)}function vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PA(t){if(typeof t=="function")return vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jm)return 11;if(t===Fm)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _s:return Ki(n.children,i,s,e);case Lm:o=8,i|=8;break;case $f:return t=cn(12,n,e,i|2),t.elementType=$f,t.lanes=s,t;case qf:return t=cn(13,n,e,i),t.elementType=qf,t.lanes=s,t;case Hf:return t=cn(19,n,e,i),t.elementType=Hf,t.lanes=s,t;case Fx:return wh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lx:o=10;break e;case jx:o=9;break e;case jm:o=11;break e;case Fm:o=14;break e;case Or:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ki(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function wh(t,e,n,r){return t=cn(22,t,r,e),t.elementType=Fx,t.lanes=n,t.stateNode={isHidden:!1},t}function rf(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function sf(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bg(t,e,n,r,i,s,o,a,c){return t=new RA(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(s),t}function DA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AE(t){if(!t)return si;t=t._reactInternals;e:{if(cs(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(Ft(n))return _S(t,n,e)}return e}function PE(t,e,n,r,i,s,o,a,c){return t=bg(n,r,!0,t,i,s,o,a,c),t.context=AE(null),n=t.current,r=Nt(),i=Xr(n),s=cr(r,i),s.callback=e??null,Qr(n,s,i),t.current.lanes=i,vl(t,i,r),Ut(t,r),t}function xh(t,e,n,r){var i=e.current,s=Nt(),o=Xr(i);return n=AE(n),e.context===null?e.context=n:e.pendingContext=n,e=cr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qr(i,e,o),t!==null&&(Tn(t,i,o,s),Lc(t,i,o)),o}function _u(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ib(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wg(t,e){ib(t,e),(t=t.alternate)&&ib(t,e)}function OA(){return null}var RE=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}Sh.prototype.render=xg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));xh(t,e,null,null)};Sh.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ts(function(){xh(null,t,null,null)}),e[mr]=null}};function Sh(t){this._internalRoot=t}Sh.prototype.unstable_scheduleHydration=function(t){if(t){var e=lS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jr.length&&e!==0&&e<jr[n].priority;n++);jr.splice(n,0,t),n===0&&uS(t)}};function Sg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sb(){}function MA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_u(o);s.call(u)}}var o=PE(e,r,t,0,null,!1,!1,"",sb);return t._reactRootContainer=o,t[mr]=o.current,Ya(t.nodeType===8?t.parentNode:t),ts(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=_u(c);a.call(u)}}var c=bg(t,0,!1,null,null,!1,!1,"",sb);return t._reactRootContainer=c,t[mr]=c.current,Ya(t.nodeType===8?t.parentNode:t),ts(function(){xh(e,c,n,r)}),c}function Th(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=_u(o);a.call(c)}}xh(e,o,t,i)}else o=MA(n,e,t,i,r);return _u(o)}oS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=da(e.pendingLanes);n!==0&&(zm(e,n|1),Ut(e,je()),!(de&6)&&(ao=je()+500,vi()))}break;case 13:ts(function(){var r=gr(t,1);if(r!==null){var i=Nt();Tn(r,t,1,i)}}),wg(t,1)}};Bm=function(t){if(t.tag===13){var e=gr(t,134217728);if(e!==null){var n=Nt();Tn(e,t,134217728,n)}wg(t,134217728)}};aS=function(t){if(t.tag===13){var e=Xr(t),n=gr(t,e);if(n!==null){var r=Nt();Tn(n,t,e,r)}wg(t,e)}};lS=function(){return ge};cS=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};tp=function(t,e,n){switch(e){case"input":if(Kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ph(r);if(!i)throw Error(V(90));Vx(r),Kf(r,i)}}}break;case"textarea":Bx(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};Qx=mg;Yx=ts;var LA={usingClientEntryPoint:!1,Events:[wl,Ds,ph,Wx,Kx,mg]},Zo={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jA={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zx(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||OA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{uh=vc.inject(jA),jn=vc}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sg(e))throw Error(V(200));return DA(t,e,null,n)};Xt.createRoot=function(t,e){if(!Sg(t))throw Error(V(299));var n=!1,r="",i=RE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bg(t,1,!1,null,null,n,!1,r,i),t[mr]=e.current,Ya(t.nodeType===8?t.parentNode:t),new xg(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=Zx(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return ts(t)};Xt.hydrate=function(t,e,n){if(!Eh(e))throw Error(V(200));return Th(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Sg(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PE(e,null,t,1,n??null,i,!1,s,o),t[mr]=e.current,Ya(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sh(e)};Xt.render=function(t,e,n){if(!Eh(e))throw Error(V(200));return Th(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Eh(t))throw Error(V(40));return t._reactRootContainer?(ts(function(){Th(null,null,t,!1,function(){t._reactRootContainer=null,t[mr]=null})}),!0):!1};Xt.unstable_batchedUpdates=mg;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Eh(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Th(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function DE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DE)}catch(t){console.error(t)}}DE(),Rx.exports=Xt;var FA=Rx.exports,ob=FA;zf.createRoot=ob.createRoot,zf.hydrateRoot=ob.hydrateRoot;const UA=()=>{};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ME={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const a=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||a==null||c==null)throw new zA;const u=s<<2|o>>4;if(r.push(u),a!==64){const h=o<<4&240|a>>2;if(r.push(h),c!==64){const f=a<<6&192|c;r.push(f)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(t){const e=OE(t);return ME.encodeByteArray(e,!0)},Au=function(t){return BA(t).replace(/\./g,"")},LE=function(t){try{return ME.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qA=()=>$A().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},kh=()=>{try{return UA()||qA()||HA()||GA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jE=t=>{var e,n;return(n=(e=kh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},WA=t=>{const e=jE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FE=()=>{var t;return(t=kh())==null?void 0:t.config},UE=t=>{var e;return(e=kh())==null?void 0:e[`_${t}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function So(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function VE(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Au(JSON.stringify(n)),Au(JSON.stringify(o)),a].join(".")}const Pa={};function YA(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pa))Pa[e]?t.emulator.push(e):t.prod.push(e);return t}function XA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ab=!1;function zE(t,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||Pa[t]===e||Pa[t]||ab)return;Pa[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=YA().prod.length>0;function s(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{ab=!0,s()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=XA(r),m=n("text"),y=document.getElementById(m)||document.createElement("span"),b=n("learnmore"),N=document.getElementById(b)||document.createElement("a"),R=n("preprendIcon"),S=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;o(v),u(N,b);const E=c();a(S,R),v.append(S,y,N,E),document.body.appendChild(v)}i?(y.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function ZA(){var t;const e=(t=kh())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nP(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rP(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $E(){try{return typeof indexedDB=="object"}catch{return!1}}function qE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function iP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sP="FirebaseError";class An extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sP,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,us.prototype.create)}}class us{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?oP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new An(i,a,r)}}function oP(t,e){return t.replace(aP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aP=/\{\$([^}]+)}/g;function lP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lb(s)&&lb(o)){if(!oi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lb(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,i]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ma(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cP(t,e){const n=new uP(t,e);return n.subscribe.bind(n)}class uP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=of),i.error===void 0&&(i.error=of),i.complete===void 0&&(i.complete=of);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function of(){}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dP=1e3,fP=2,pP=4*60*60*1e3,mP=.5;function cb(t,e=dP,n=fP){const r=e*Math.pow(n,t),i=Math.round(mP*r*(Math.random()-.5)*2);return Math.min(pP,r+i)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ve(t){return t&&t._delegate?t._delegate:t}class Nn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Di="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vP(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yP(t){return t===Di?void 0:t}function vP(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const wP={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},xP=oe.INFO,SP={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},EP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=SP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ch{constructor(e){this.name=e,this._logLevel=xP,this._logHandler=EP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const TP=(t,e)=>e.some(n=>t instanceof n);let ub,hb;function kP(){return ub||(ub=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CP(){return hb||(hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HE=new WeakMap,Dp=new WeakMap,GE=new WeakMap,af=new WeakMap,Eg=new WeakMap;function IP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HE.set(n,t)}).catch(()=>{}),Eg.set(e,t),e}function NP(t){if(Dp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dp.set(t,e)}let Op={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _P(t){Op=t(Op)}function AP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lf(this),e,...n);return GE.set(r,e.sort?e.sort():[e]),Zr(r)}:CP().includes(t)?function(...e){return t.apply(lf(this),e),Zr(HE.get(this))}:function(...e){return Zr(t.apply(lf(this),e))}}function PP(t){return typeof t=="function"?AP(t):(t instanceof IDBTransaction&&NP(t),TP(t,kP())?new Proxy(t,Op):t)}function Zr(t){if(t instanceof IDBRequest)return IP(t);if(af.has(t))return af.get(t);const e=PP(t);return e!==t&&(af.set(t,e),Eg.set(e,t)),e}const lf=t=>Eg.get(t);function WE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Zr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Zr(o.result),c.oldVersion,c.newVersion,Zr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const RP=["get","getKey","getAll","getAllKeys","count"],DP=["put","add","delete","clear"],cf=new Map;function db(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cf.get(e))return cf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=DP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RP.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return cf.set(e,s),s}_P(t=>({...t,get:(e,n,r)=>db(e,n)||t.get(e,n,r),has:(e,n)=>!!db(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(MP(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function MP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mp="@firebase/app",fb="0.14.2";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vr=new Ch("@firebase/app"),LP="@firebase/app-compat",jP="@firebase/analytics-compat",FP="@firebase/analytics",UP="@firebase/app-check-compat",VP="@firebase/app-check",zP="@firebase/auth",BP="@firebase/auth-compat",$P="@firebase/database",qP="@firebase/data-connect",HP="@firebase/database-compat",GP="@firebase/functions",WP="@firebase/functions-compat",KP="@firebase/installations",QP="@firebase/installations-compat",YP="@firebase/messaging",XP="@firebase/messaging-compat",JP="@firebase/performance",ZP="@firebase/performance-compat",eR="@firebase/remote-config",tR="@firebase/remote-config-compat",nR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",sR="@firebase/ai",oR="@firebase/firestore-compat",aR="firebase",lR="12.2.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lp="[DEFAULT]",cR={[Mp]:"fire-core",[LP]:"fire-core-compat",[FP]:"fire-analytics",[jP]:"fire-analytics-compat",[VP]:"fire-app-check",[UP]:"fire-app-check-compat",[zP]:"fire-auth",[BP]:"fire-auth-compat",[$P]:"fire-rtdb",[qP]:"fire-data-connect",[HP]:"fire-rtdb-compat",[GP]:"fire-fn",[WP]:"fire-fn-compat",[KP]:"fire-iid",[QP]:"fire-iid-compat",[YP]:"fire-fcm",[XP]:"fire-fcm-compat",[JP]:"fire-perf",[ZP]:"fire-perf-compat",[eR]:"fire-rc",[tR]:"fire-rc-compat",[nR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[oR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[aR]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pu=new Map,uR=new Map,jp=new Map;function pb(t,e){try{t.container.addComponent(e)}catch(n){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gn(t){const e=t.name;if(jp.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,t);for(const n of Pu.values())pb(n,t);for(const n of uR.values())pb(n,t);return!0}function hs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ot(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new us("app","Firebase",hR);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Eo=lR;function KE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Lp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ei.create("bad-app-name",{appName:String(i)});if(n||(n=FE()),!n)throw ei.create("no-options");const s=Pu.get(i);if(s){if(oi(n,s.options)&&oi(r,s.config))return s;throw ei.create("duplicate-app",{appName:i})}const o=new bP(i);for(const c of jp.values())o.addComponent(c);const a=new dR(n,r,o);return Pu.set(i,a),a}function Tg(t=Lp){const e=Pu.get(t);if(!e&&t===Lp&&FE())return KE();if(!e)throw ei.create("no-app",{appName:t});return e}function hn(t,e,n){let r=cR[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(o.join(" "));return}Gn(new Nn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fR="firebase-heartbeat-database",pR=1,sl="firebase-heartbeat-store";let uf=null;function QE(){return uf||(uf=WE(fR,pR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),uf}async function mR(t){try{const e=(await QE()).transaction(sl),n=await e.objectStore(sl).get(YE(t));return await e.done,n}catch(e){if(e instanceof An)vr.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vr.warn(n.message)}}}async function mb(t,e){try{const n=(await QE()).transaction(sl,"readwrite");await n.objectStore(sl).put(e,YE(t)),await n.done}catch(n){if(n instanceof An)vr.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vr.warn(r.message)}}}function YE(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gR=1024,yR=30;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>yR){const s=xR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gb(),{heartbeatsToSend:r,unsentEntries:i}=bR(this._heartbeatsCache.heartbeats),s=Au(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return vr.warn(n),""}}}function gb(){return new Date().toISOString().substring(0,10)}function bR(t,e=gR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $E()?qE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await mR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yb(t){return Au(JSON.stringify({version:2,heartbeats:t})).length}function xR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SR(t){Gn(new Nn("platform-logger",e=>new OP(e),"PRIVATE")),Gn(new Nn("heartbeat",e=>new vR(e),"PRIVATE")),hn(Mp,fb,t),hn(Mp,fb,"esm2020"),hn("fire-js","")}SR("");function XE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ER=XE,JE=new us("auth","Firebase",XE());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ru=new Ch("@firebase/auth");function TR(t,...e){Ru.logLevel<=oe.WARN&&Ru.warn(`Auth (${Eo}): ${t}`,...e)}function $c(t,...e){Ru.logLevel<=oe.ERROR&&Ru.error(`Auth (${Eo}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pn(t,...e){throw Cg(t,...e)}function kn(t,...e){return Cg(t,...e)}function kg(t,e,n){const r={...ER(),[e]:n};return new us("auth","Firebase",r).create(e,{appName:t.name})}function Un(t){return kg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pn(t,"argument-error"),kg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JE.create(t,...e)}function X(t,e,...n){if(!t)throw Cg(e,...n)}function or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $c(e),new Error(e)}function br(t,e){t||or(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function kR(){return vb()==="http:"||vb()==="https:"}function vb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kR()||BE()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=JA()||tP()}get(){return CR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ig(t,e){br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AR=new El(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Tr(t,e,n,r,i={}){return tT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Sl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return eP()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&So(t.emulatorConfig.host)&&(u.credentials="include"),eT.fetch()(await nT(t,t.config.apiHost,n,a),u)})}async function tT(t,e,n){t._canInitEmulator=!1;const r={...NR,...e};try{const i=new RR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw bc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw bc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw bc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kg(t,h,u);pn(t,h)}}catch(i){if(i instanceof An)throw i;pn(t,"network-request-failed",{message:String(i)})}}async function Tl(t,e,n,r,i={}){const s=await Tr(t,e,n,r,i);return"mfaPendingCredential"in s&&pn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function nT(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Ig(t.config,i):`${t.config.apiScheme}://${i}`;return _R.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function PR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),AR.get())})}}function bc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kn(t,e,r);return i.customData._tokenResponse=n,i}function bb(t){return t!==void 0&&t.enterprise!==void 0}class DR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OR(t,e){return Tr(t,"GET","/v2/recaptchaConfig",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function MR(t,e){return Tr(t,"POST","/v1/accounts:delete",e)}async function Du(t,e){return Tr(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LR(t,e=!1){const n=Ve(t),r=await n.getIdToken(e),i=Ng(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ra(hf(i.auth_time)),issuedAtTime:Ra(hf(i.iat)),expirationTime:Ra(hf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hf(t){return Number(t)*1e3}function Ng(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const i=LE(n);return i?JSON.parse(i):($c("Failed to decode base64 JWT payload"),null)}catch(i){return $c("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wb(t){const e=Ng(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof An&&jR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ra(this.lastLoginAt),this.creationTime=Ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ou(t){var e;const n=t.auth,r=await t.getIdToken(),i=await lo(t,Du(n,{idToken:r}));X(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(e=s.providerUserInfo)!=null&&e.length?rT(s.providerUserInfo):[],a=VR(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Up(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function UR(t){const e=Ve(t);await Ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VR(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function rT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function zR(t,e){const n=await tT(t,{},async()=>{const r=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await nT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&So(t.emulatorConfig.host)&&(c.credentials="include"),eT.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BR(t,e){return Tr(t,"POST","/v2/accounts:revokeToken",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=wb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ys;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ar(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new FR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Up(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await lo(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LR(this,e)}reload(){return UR(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ot(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await lo(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:b,stsTokenManager:N}=n;X(f&&N,e,"internal-error");const R=Ys.fromJSON(this.name,N);X(typeof f=="string",e,"internal-error"),Ar(r,e.name),Ar(i,e.name),X(typeof m=="boolean",e,"internal-error"),X(typeof y=="boolean",e,"internal-error"),Ar(s,e.name),Ar(o,e.name),Ar(a,e.name),Ar(c,e.name),Ar(u,e.name),Ar(h,e.name);const S=new Sn({uid:f,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:R,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(S.providerData=b.map(v=>({...v}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ys;i.updateFromServerResponse(n);const s=new Sn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ou(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];X(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ys;a.updateFromIdToken(r);const c=new Sn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xb=new Map;function ar(t){br(t instanceof Function,"Expected a class definition");let e=xb.get(t);return e?(br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xb.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iT.type="NONE";const Sb=iT;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qc(this.userKey,i.apiKey,s),this.fullPersistenceKey=qc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Du(this.auth,{idToken:e}).catch(()=>{});return n?Sn._fromGetAccountInfoResponse(this.auth,n,e):null}return Sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xs(ar(Sb),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ar(Sb);const o=qc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Du(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Sn._fromGetAccountInfoResponse(e,m,h)}else f=Sn._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Xs(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Xs(s,e,r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uT(e))return"Blackberry";if(hT(e))return"Webos";if(oT(e))return"Safari";if((e.includes("chrome/")||aT(e))&&!e.includes("edge/"))return"Chrome";if(cT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sT(t=wt()){return/firefox\//i.test(t)}function oT(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aT(t=wt()){return/crios\//i.test(t)}function lT(t=wt()){return/iemobile/i.test(t)}function cT(t=wt()){return/android/i.test(t)}function uT(t=wt()){return/blackberry/i.test(t)}function hT(t=wt()){return/webos/i.test(t)}function _g(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $R(t=wt()){var e;return _g(t)&&!!((e=window.navigator)!=null&&e.standalone)}function qR(){return nP()&&document.documentMode===10}function dT(t=wt()){return _g(t)||cT(t)||hT(t)||uT(t)||/windows phone/i.test(t)||lT(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fT(t,e=[]){let n;switch(t){case"Browser":n=Eb(wt());break;case"Worker":n=`${Eb(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${r}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GR(t,e={}){return Tr(t,"GET","/v2/passwordPolicy",bi(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WR=6;class KR{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??WR,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tb(this),this.idTokenSubscription=new Tb(this),this.beforeStateQueue=new HR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Du(this,{idToken:e}),r=await Sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ot(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)==null?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c!=null&&c.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ot(this.app))return Promise.reject(Un(this));const n=e?Ve(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ot(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ot(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GR(this),n=new KR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new us("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ot(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return n!=null&&n.error&&TR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qn(t){return Ve(t)}class Tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=cP(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YR(t){Ih=t}function pT(t){return Ih.loadJS(t)}function XR(){return Ih.recaptchaEnterpriseScript}function JR(){return Ih.gapiScript}function ZR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class eD{constructor(){this.enterprise=new tD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nD="recaptcha-enterprise",mT="NO_RECAPTCHA";class rD{constructor(e){this.type=nD,this.auth=Qn(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{OR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new DR(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;bb(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(mT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eD().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&bb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=XR();c.length!==0&&(c+=a),pT(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function ea(t,e,n,r=!1,i=!1){const s=new rD(t);let o;if(i)o=mT;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Vp(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ea(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ea(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await ea(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await ea(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const a=await ea(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iD(t,e){const n=hs(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(oi(i,e??{}))return r;pn(r,"already-initialized")}return n.initialize({options:e})}function sD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oD(t,e,n){const r=Qn(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=gT(e),{host:o,port:a}=aD(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(oi(u,r.config.emulator)&&oi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,So(o)?(VE(`${s}//${o}${c}`),zE("Auth",!0)):i||lD()}function gT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aD(t){const e=gT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kb(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kb(o)}}}function kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ag{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function cD(t,e){return Tr(t,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uD(t,e){return Tl(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function hD(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}async function dD(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ol extends Ag{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ol(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ol(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&n!=null&&n.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(e,n,"signInWithPassword",uD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hD(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(e,r,"signUpPassword",cD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dD(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Js(t,e){return Tl(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fD="http://localhost";class ns extends Ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ns(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:fD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sl(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mD(t){const e=pa(ma(t)).link,n=e?pa(ma(e)).deep_link_id:null,r=pa(ma(t)).deep_link_id;return(r?pa(ma(r)).link:null)||r||n||e||t}class Pg{constructor(e){const n=pa(ma(e)),r=n.apiKey??null,i=n.oobCode??null,s=pD(n.mode??null);X(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mD(e);try{return new Pg(n)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class To{constructor(){this.providerId=To.PROVIDER_ID}static credential(e,n){return ol._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pg.parseLink(n);return X(r,"argument-error"),ol._fromEmailAndCode(e,r.code,r.tenantId)}}To.PROVIDER_ID="password";To.EMAIL_PASSWORD_SIGN_IN_METHOD="password";To.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kl extends Nh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ur extends kl{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rr extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vr extends kl{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zr extends kl{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function gD(t,e){return Tl(t,"POST","/v1/accounts:signUp",bi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Sn._fromIdTokenResponse(e,r,i),o=Cb(r);return new rs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Cb(r);return new rs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Cb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mu extends An{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Mu(e,n,r,i)}}function yT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mu._fromErrorAndOperation(t,i,e,r):i})}async function yD(t,e,n=!1){const r=await lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rs._forOperation(t,"link",r)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function vD(t,e,n=!1){const{auth:r}=t;if(Ot(r.app))return Promise.reject(Un(r));const i="reauthenticate";try{const s=await lo(t,yT(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=Ng(s.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),rs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pn(r,"user-mismatch"),s}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function vT(t,e,n=!1){if(Ot(t.app))return Promise.reject(Un(t));const r="signIn",i=await yT(t,r,e),s=await rs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function bD(t,e){return vT(Qn(t),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function bT(t){const e=Qn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wD(t,e,n){if(Ot(t.app))return Promise.reject(Un(t));const r=Qn(t),i=await Vp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gD,"EMAIL_PASSWORD_PROVIDER").catch(o=>{throw o.code==="auth/password-does-not-meet-requirements"&&bT(t),o}),s=await rs._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function xD(t,e,n){return Ot(t.app)?Promise.reject(Un(t)):bD(Ve(t),To.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bT(t),r})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function SD(t,e){return Tr(t,"POST","/v1/accounts:update",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ib(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ve(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await lo(r,SD(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function ED(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function TD(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function kD(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function CD(t){return Ve(t).signOut()}const Lu="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ID=1e3,ND=10;class xT extends wT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);qR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ND):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xT.type="LOCAL";const _D=xT;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ST extends wT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ST.type="SESSION";const ET=ST;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),c=await AD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Rg("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vn(){return window}function RD(t){Vn().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TT(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function DD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function MD(){return TT()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kT="firebaseLocalStorageDb",LD=1,ju="firebaseLocalStorage",CT="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ah(t,e){return t.transaction([ju],e?"readwrite":"readonly").objectStore(ju)}function jD(){const t=indexedDB.deleteDatabase(kT);return new Cl(t).toPromise()}function zp(){const t=indexedDB.open(kT,LD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ju,{keyPath:CT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ju)?e(r):(r.close(),await jD(),e(await zp()))})})}async function Nb(t,e,n){const r=Ah(t,!0).put({[CT]:e,value:n});return new Cl(r).toPromise()}async function FD(t,e){const n=Ah(t,!1).get(e),r=await new Cl(n).toPromise();return r===void 0?null:r.value}function _b(t,e){const n=Ah(t,!0).delete(e);return new Cl(n).toPromise()}const UD=800,VD=3;class IT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(MD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DD(),!this.activeServiceWorker)return;this.sender=new PD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(e=r[0])!=null&&e.fulfilled&&(n=r[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zp();return await Nb(e,Lu,"1"),await _b(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_b(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ah(i,!1).getAll();return new Cl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IT.type="LOCAL";const zD=IT;new El(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dg(t,e){return e?ar(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Og extends Ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BD(t){return vT(t.auth,new Og(t),t.bypassAuthState)}function $D(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),vD(n,new Og(t),t.bypassAuthState)}async function qD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),yD(n,new Og(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return qD;case"reauthViaPopup":case"reauthViaRedirect":return $D;default:pn(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HD=new El(2e3,1e4);async function GD(t,e,n){if(Ot(t.app))return Promise.reject(kn(t,"operation-not-supported-in-this-environment"));const r=Qn(t);ZE(t,e,Nh);const i=Dg(r,n);return new Vi(r,"signInViaPopup",e,i).executeNotNull()}class Vi extends NT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HD.get())};e()}}Vi.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WD="pendingRedirect",Hc=new Map;class KD extends NT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const n=await QD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QD(t,e){const n=AT(e),r=_T(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function YD(t,e){return _T(t)._set(AT(e),"true")}function XD(t,e){Hc.set(t._key(),e)}function _T(t){return ar(t._redirectPersistence)}function AT(t){return qc(WD,t.config.apiKey,t.name)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JD(t,e,n){return ZD(t,e,n)}async function ZD(t,e,n){if(Ot(t.app))return Promise.reject(Un(t));const r=Qn(t);ZE(t,e,Nh),await r._initializationPromise;const i=Dg(r,n);return await YD(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function eO(t,e){return await Qn(t)._initializationPromise,PT(t,e,!1)}async function PT(t,e,n=!1){if(Ot(t.app))return Promise.reject(Un(t));const r=Qn(t),i=Dg(r,e),s=await new KD(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tO=10*60*1e3;class nO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ab(e))}saveEventToCache(e){this.cachedEventUids.add(Ab(e)),this.lastProcessedEventTime=Date.now()}}function Ab(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RT(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function iO(t,e={}){return Tr(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oO=/^https?/;async function aO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iO(t);for(const n of e)try{if(lO(n))return}catch{}pn(t,"unauthorized-domain")}function lO(t){const e=Fp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!oO.test(n))return!1;if(sO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cO=new El(3e4,6e4);function Pb(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uO(t){return new Promise((e,n)=>{var r,i,s;function o(){Pb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pb(),n(kn(t,"network-request-failed"))},timeout:cO.get()})}if((i=(r=Vn().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((s=Vn().gapi)!=null&&s.load)o();else{const a=ZR("iframefcb");return Vn()[a]=()=>{gapi.load?o():n(kn(t,"network-request-failed"))},pT(`${JR()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function hO(t){return Gc=Gc||uO(t),Gc}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dO=new El(5e3,15e3),fO="__/auth/iframe",pO="emulator/auth/iframe",mO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yO(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ig(e,pO):`https://${t.config.authDomain}/${fO}`,r={apiKey:e.apiKey,appName:t.name,v:Eo},i=gO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Sl(r).slice(1)}`}async function vO(t){const e=await hO(t),n=Vn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:yO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},dO.get());function c(){Vn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wO=500,xO=600,SO="_blank",EO="http://localhost";class Rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TO(t,e,n,r=wO,i=xO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...bO,width:r.toString(),height:i.toString(),top:s,left:o},u=wt().toLowerCase();n&&(a=aT(u)?SO:n),sT(u)&&(e=e||EO,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if($R(u)&&a!=="_self")return kO(e||"",a),new Rb(null);const f=window.open(e||"",a,h);X(f,t,"popup-blocked");try{f.focus()}catch{}return new Rb(f)}function kO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CO="__/auth/handler",IO="emulator/auth/handler",NO=encodeURIComponent("fac");async function Db(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Eo,eventId:i};if(e instanceof Nh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof kl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${NO}=${encodeURIComponent(c)}`:"";return`${_O(t)}?${Sl(a).slice(1)}${u}`}function _O({config:t}){return t.emulator?Ig(t,IO):`https://${t.authDomain}/${CO}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const df="webStorageSupport";class AO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ET,this._completeRedirectFn=PT,this._overrideRedirectResult=XD}async _openPopup(e,n,r,i){var s;br((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Db(e,n,r,Fp(),i);return TO(e,o,Rg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Db(e,n,r,Fp(),i);return RD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vO(e),r=new nO(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(df,{type:df},r=>{var i;const s=(i=r==null?void 0:r[0])==null?void 0:i[df];s!==void 0&&n(!!s),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dT()||oT()||_g()}}const PO=AO;var Ob="@firebase/auth",Mb="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OO(t){Gn(new Nn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fT(t)},u=new QR(r,i,s,c);return sD(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gn(new Nn("auth-internal",e=>{const n=Qn(e.getProvider("auth").getImmediate());return(r=>new RO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hn(Ob,Mb,DO(t)),hn(Ob,Mb,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MO=5*60,LO=UE("authIdTokenMaxAge")||MO;let Lb=null;const jO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LO)return;const i=n==null?void 0:n.token;Lb!==i&&(Lb=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FO(t=Tg()){const e=hs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iD(t,{popupRedirectResolver:PO,persistence:[zD,_D,ET]}),r=UE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=jO(s.toString());TD(n,o,()=>o(n.currentUser)),ED(n,a=>o(a))}}const i=jE("auth");return i&&oD(n,`http://${i}`),n}function UO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}YR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",UO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OO("Browser");var VO="firebase",zO="12.2.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/hn(VO,zO,"app");const DT="@firebase/installations",Mg="0.6.19";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OT=1e4,MT=`w:${Mg}`,LT="FIS_v2",BO="https://firebaseinstallations.googleapis.com/v1",$O=60*60*1e3,qO="installations",HO="Installations";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},is=new us(qO,HO,GO);function jT(t){return t instanceof An&&t.code.includes("request-failed")}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FT({projectId:t}){return`${BO}/projects/${t}/installations`}function UT(t){return{token:t.token,requestStatus:2,expiresIn:KO(t.expiresIn),creationTime:Date.now()}}async function VT(t,e){const n=(await e.json()).error;return is.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function zT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WO(t,{refreshToken:e}){const n=zT(t);return n.append("Authorization",QO(e)),n}async function BT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function KO(t){return Number(t.replace("s","000"))}function QO(t){return`${LT} ${t}`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function YO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=FT(t),i=zT(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:LT,appId:t.appId,sdkVersion:MT},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await BT(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:UT(u.authToken)}}else throw await VT("Create Installation",c)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $T(t){return new Promise(e=>{setTimeout(e,t)})}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JO=/^[cdef][\w-]{21}$/,Bp="";function ZO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=e4(t);return JO.test(e)?e:Bp}catch{return Bp}}function e4(t){return XO(t).substr(0,22)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ph(t){return`${t.appName}!${t.appId}`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qT=new Map;function HT(t,e){const n=Ph(t);GT(n,e),t4(n,e)}function GT(t,e){const n=qT.get(t);if(n)for(const r of n)r(e)}function t4(t,e){const n=n4();n&&n.postMessage({key:t,fid:e}),r4()}let zi=null;function n4(){return!zi&&"BroadcastChannel"in self&&(zi=new BroadcastChannel("[Firebase] FID Change"),zi.onmessage=t=>{GT(t.data.key,t.data.fid)}),zi}function r4(){qT.size===0&&zi&&(zi.close(),zi=null)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const i4="firebase-installations-database",s4=1,ss="firebase-installations-store";let ff=null;function Lg(){return ff||(ff=WE(i4,s4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ss)}}})),ff}async function Fu(t,e){const n=Ph(t),r=(await Lg()).transaction(ss,"readwrite"),i=r.objectStore(ss),s=await i.get(n);return await i.put(e,n),await r.done,(!s||s.fid!==e.fid)&&HT(t,e.fid),e}async function WT(t){const e=Ph(t),n=(await Lg()).transaction(ss,"readwrite");await n.objectStore(ss).delete(e),await n.done}async function Rh(t,e){const n=Ph(t),r=(await Lg()).transaction(ss,"readwrite"),i=r.objectStore(ss),s=await i.get(n),o=e(s);return o===void 0?await i.delete(n):await i.put(o,n),await r.done,o&&(!s||s.fid!==o.fid)&&HT(t,o.fid),o}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function jg(t){let e;const n=await Rh(t.appConfig,r=>{const i=o4(r),s=a4(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Bp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function o4(t){const e=t||{fid:ZO(),registrationStatus:0};return KT(e)}function a4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(is.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=l4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:c4(t)}:{installationEntry:e}}async function l4(t,e){try{const n=await YO(t,e);return Fu(t.appConfig,n)}catch(n){throw jT(n)&&n.customData.serverCode===409?await WT(t.appConfig):await Fu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function c4(t){let e=await jb(t.appConfig);for(;e.registrationStatus===1;)await $T(100),e=await jb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await jg(t);return r||n}return e}function jb(t){return Rh(t,e=>{if(!e)throw is.create("installation-not-found");return KT(e)})}function KT(t){return u4(t)?{fid:t.fid,registrationStatus:0}:t}function u4(t){return t.registrationStatus===1&&t.registrationTime+OT<Date.now()}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function h4({appConfig:t,heartbeatServiceProvider:e},n){const r=d4(t,n),i=WO(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:MT,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await BT(()=>fetch(r,a));if(c.ok){const u=await c.json();return UT(u)}else throw await VT("Generate Auth Token",c)}function d4(t,{fid:e}){return`${FT(t)}/${e}/authTokens:generate`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Fg(t,e=!1){let n;const r=await Rh(t.appConfig,i=>{if(!QT(i))throw is.create("not-registered");const s=i.authToken;if(!e&&m4(s))return i;if(s.requestStatus===1)return n=f4(t,e),i;{if(!navigator.onLine)throw is.create("app-offline");const o=y4(i);return n=p4(t,o),o}});return n?await n:r.authToken}async function f4(t,e){let n=await Fb(t.appConfig);for(;n.authToken.requestStatus===1;)await $T(100),n=await Fb(t.appConfig);const r=n.authToken;return r.requestStatus===0?Fg(t,e):r}function Fb(t){return Rh(t,e=>{if(!QT(e))throw is.create("not-registered");const n=e.authToken;return v4(n)?{...e,authToken:{requestStatus:0}}:e})}async function p4(t,e){try{const n=await h4(t,e),r={...e,authToken:n};return await Fu(t.appConfig,r),n}catch(n){if(jT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await WT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Fu(t.appConfig,r)}throw n}}function QT(t){return t!==void 0&&t.registrationStatus===2}function m4(t){return t.requestStatus===2&&!g4(t)}function g4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$O}function y4(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function v4(t){return t.requestStatus===1&&t.requestTime+OT<Date.now()}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function b4(t){const e=t,{installationEntry:n,registrationPromise:r}=await jg(e);return r?r.catch(console.error):Fg(e).catch(console.error),n.fid}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function w4(t,e=!1){const n=t;return await x4(n),(await Fg(n,e)).token}async function x4(t){const{registrationPromise:e}=await jg(t);e&&await e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function S4(t){if(!t||!t.options)throw pf("App Configuration");if(!t.name)throw pf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw pf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function pf(t){return is.create("missing-app-config-values",{valueName:t})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YT="installations",E4="installations-internal",T4=t=>{const e=t.getProvider("app").getImmediate(),n=S4(e),r=hs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},k4=t=>{const e=t.getProvider("app").getImmediate(),n=hs(e,YT).getImmediate();return{getId:()=>b4(n),getToken:r=>w4(n,r)}};function C4(){Gn(new Nn(YT,T4,"PUBLIC")),Gn(new Nn(E4,k4,"PRIVATE"))}C4();hn(DT,Mg);hn(DT,Mg,"esm2020");/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uu="analytics",I4="firebase_id",N4="origin",_4=60*1e3,A4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ug="https://www.googletagmanager.com/gtag/js";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vt=new Ch("@firebase/analytics");/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kt=new us("analytics","Analytics",P4);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function R4(t){if(!t.startsWith(Ug)){const e=Kt.create("invalid-gtag-resource",{gtagURL:t});return Vt.warn(e.message),""}return t}function XT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function D4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function O4(t,e){const n=D4("firebase-js-sdk-policy",{createScriptURL:R4}),r=document.createElement("script"),i=`${Ug}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function M4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function L4(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const a=(await XT(n)).find(c=>c.measurementId===i);a&&await e[a.appId]}}catch(a){Vt.error(a)}t("config",i,s)}async function j4(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await XT(n);for(const c of o){const u=a.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Vt.error(s)}}function F4(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await j4(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await L4(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Vt.error(a)}}return i}function U4(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=F4(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function V4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ug)&&n.src.includes(t))return n;return null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z4=30,B4=1e3;class $4{constructor(e={},n=B4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const JT=new $4;function q4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function H4(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:q4(r)},s=A4.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();(e=c.error)!=null&&e.message&&(a=c.error.message)}catch{}throw Kt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function G4(t,e=JT,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Kt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Kt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Q4;return setTimeout(async()=>{a.abort()},n!==void 0?n:_4),ZT({appId:r,apiKey:i,measurementId:s},o,a,e)}async function ZT(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=JT){var s;const{appId:o,measurementId:a}=t;try{await W4(r,e)}catch(c){if(a)return Vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await H4(t);return i.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!K4(u)){if(i.deleteThrottleMetadata(o),a)return Vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const h=Number((s=u==null?void 0:u.customData)==null?void 0:s.httpStatus)===503?cb(n,i.intervalMillis,z4):cb(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,f),Vt.debug(`Calling attemptFetch again in ${h} millis`),ZT(t,f,r,i)}}function W4(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Kt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function K4(t){if(!(t instanceof An)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Q4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Y4(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function X4(){if($E())try{await qE()}catch(t){return Vt.warn(Kt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Vt.warn(Kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function J4(t,e,n,r,i,s,o){const a=G4(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Vt.error(m)),e.push(a);const c=X4().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([a,c]);V4(s)||O4(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[N4]="firebase",f.update=!0,h!=null&&(f[I4]=h),i("config",u.measurementId,f),u.measurementId}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z4{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}}let Da={},Ub=[];const Vb={};let mf="dataLayer",eM="gtag",zb,ek,Bb=!1;function tM(){const t=[];if(BE()&&t.push("This is a browser extension environment."),iP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Kt.create("invalid-analytics-context",{errorInfo:e});Vt.warn(n.message)}}function nM(t,e,n){tM();const r=t.options.appId;if(!r)throw Kt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kt.create("no-api-key");if(Da[r]!=null)throw Kt.create("already-exists",{id:r});if(!Bb){M4(mf);const{wrappedGtag:i,gtagCore:s}=U4(Da,Ub,Vb,mf,eM);ek=i,zb=s,Bb=!0}return Da[r]=J4(t,Ub,Vb,e,zb,mf,n),new Z4(t)}function rM(t=Tg()){t=Ve(t);const e=hs(t,Uu);return e.isInitialized()?e.getImmediate():iM(t)}function iM(t,e={}){const n=hs(t,Uu);if(n.isInitialized()){const r=n.getImmediate();if(oi(e,n.getOptions()))return r;throw Kt.create("already-initialized")}return n.initialize({options:e})}function sM(t,e,n,r){t=Ve(t),Y4(ek,Da[t.app.options.appId],e,n,r).catch(i=>Vt.error(i))}const $b="@firebase/analytics",qb="0.10.18";function oM(){Gn(new Nn(Uu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return nM(r,i,n)},"PUBLIC")),Gn(new Nn("analytics-internal",t,"PRIVATE")),hn($b,qb),hn($b,qb,"esm2020");function t(e){try{const n=e.getProvider(Uu).getImmediate();return{logEvent:(r,i,s)=>sM(n,r,i,s)}}catch(n){throw Kt.create("interop-component-reg-failed",{reason:n})}}}oM();const aM={apiKey:"AIzaSyBQ-9yzghDHlRpJV8dJvMK6nSqzq9Q6sYU",authDomain:"crys-garage.firebaseapp.com",projectId:"crys-garage",storageBucket:"crys-garage.firebasestorage.app",messagingSenderId:"279106325167",appId:"1:279106325167:web:ec15af67f7811771e6225a",measurementId:"G-0FVPVPEVP4",databaseURL:"https://crys-garage-default-rtdb.firebaseio.com/"},Vg=KE(aM),Zn=FO(Vg);typeof window<"u"&&rM(Vg);const $p=new rr;$p.setCustomParameters({prompt:"select_account"});const Wc="2gyZ3GDw3LHZQKDhPmPDL3sjREVRXPr8",lM=!1,cM=typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1");function zg(){if(typeof window>"u")return!1;const t=new URLSearchParams(window.location.search);if(t.get("dev_key")===Wc){localStorage.setItem("CRG_DEV_KEY",Wc),t.delete("dev_key");const e=window.location.pathname+(t.toString()?"?"+t.toString():"");return window.history.replaceState({},"",e),!0}return localStorage.getItem("CRG_DEV_KEY")===Wc}const it=zg();function uM(){typeof window<"u"&&(localStorage.removeItem("CRG_DEV_KEY"),console.log("🔒 Dev Mode Disabled"),window.location.reload())}function hM(t){return t===Wc?(localStorage.setItem("CRG_DEV_KEY",t),console.log("🧪 Dev Mode Enabled"),window.location.reload(),!0):(console.error("❌ Invalid dev mode key"),!1)}function ta(){var t;return typeof window>"u"?!1:it||zg()||typeof window<"u"&&((t=window.devMode)==null?void 0:t.enabled)===!0||typeof window<"u"&&window.location.hostname==="localhost"}function tk(){return{enabled:it,isLocalhost:cM,envDevMode:lM,hasValidKey:zg()}}const Dn={id:"dev-user",name:"Dev Mode User",email:"dev@crysgarage.studio",tier:"developer",credits:1/0,join_date:new Date().toISOString(),total_tracks:0,total_spent:0,profile_picture:void 0,phone:void 0,company:"CrysGarage Testing",location:"Dev Environment",bio:"Development and testing account with unlimited access",website:void 0,instagram:void 0,twitter:void 0,facebook:void 0,youtube:void 0,tiktok:void 0,kyc_verified:!1},dM={credits:1/0,tier:"developer",unlimited:!0};function Ii(t){it&&console.log(`🧪 [DEV MODE] ${t}`)}function nk(){it&&(console.warn("╔══════════════════════════════════════════════════════════╗"),console.warn("║       🧪 DEV MODE ACTIVE - AUTH & PAYMENTS BYPASSED      ║"),console.warn("╚══════════════════════════════════════════════════════════╝"),console.warn("Dev Mode Info:",tk()),console.warn("Dev Mode User:",Dn),console.warn("Dev Mode Credits:",dM),console.warn(""),console.warn("To disable dev mode in production:"),console.warn('  localStorage.removeItem("CRG_DEV_KEY")'),console.warn("  window.location.reload()"),console.warn(""),console.warn("Or call: disableDevMode()"))}typeof window<"u"&&nk();typeof window<"u"&&it&&(window.devMode={disable:uM,enable:hM,info:tk,user:Dn},console.log("💡 Dev mode controls available: window.devMode"));var Hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,rk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function T(){}T.prototype=w.prototype,k.D=w.prototype,k.prototype=new T,k.prototype.constructor=k,k.C=function(I,_,A){for(var C=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)C[ce-2]=arguments[ce];return w.prototype[_].apply(I,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,w,T){T||(T=0);var I=Array(16);if(typeof w=="string")for(var _=0;16>_;++_)I[_]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(_=0;16>_;++_)I[_]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=k.g[0],T=k.g[1],_=k.g[2];var A=k.g[3],C=w+(A^T&(_^A))+I[0]+3614090360&4294967295;w=T+(C<<7&4294967295|C>>>25),C=A+(_^w&(T^_))+I[1]+3905402710&4294967295,A=w+(C<<12&4294967295|C>>>20),C=_+(T^A&(w^T))+I[2]+606105819&4294967295,_=A+(C<<17&4294967295|C>>>15),C=T+(w^_&(A^w))+I[3]+3250441966&4294967295,T=_+(C<<22&4294967295|C>>>10),C=w+(A^T&(_^A))+I[4]+4118548399&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(_^w&(T^_))+I[5]+1200080426&4294967295,A=w+(C<<12&4294967295|C>>>20),C=_+(T^A&(w^T))+I[6]+2821735955&4294967295,_=A+(C<<17&4294967295|C>>>15),C=T+(w^_&(A^w))+I[7]+4249261313&4294967295,T=_+(C<<22&4294967295|C>>>10),C=w+(A^T&(_^A))+I[8]+1770035416&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(_^w&(T^_))+I[9]+2336552879&4294967295,A=w+(C<<12&4294967295|C>>>20),C=_+(T^A&(w^T))+I[10]+4294925233&4294967295,_=A+(C<<17&4294967295|C>>>15),C=T+(w^_&(A^w))+I[11]+2304563134&4294967295,T=_+(C<<22&4294967295|C>>>10),C=w+(A^T&(_^A))+I[12]+1804603682&4294967295,w=T+(C<<7&4294967295|C>>>25),C=A+(_^w&(T^_))+I[13]+4254626195&4294967295,A=w+(C<<12&4294967295|C>>>20),C=_+(T^A&(w^T))+I[14]+2792965006&4294967295,_=A+(C<<17&4294967295|C>>>15),C=T+(w^_&(A^w))+I[15]+1236535329&4294967295,T=_+(C<<22&4294967295|C>>>10),C=w+(_^A&(T^_))+I[1]+4129170786&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^_&(w^T))+I[6]+3225465664&4294967295,A=w+(C<<9&4294967295|C>>>23),C=_+(w^T&(A^w))+I[11]+643717713&4294967295,_=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(_^A))+I[0]+3921069994&4294967295,T=_+(C<<20&4294967295|C>>>12),C=w+(_^A&(T^_))+I[5]+3593408605&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^_&(w^T))+I[10]+38016083&4294967295,A=w+(C<<9&4294967295|C>>>23),C=_+(w^T&(A^w))+I[15]+3634488961&4294967295,_=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(_^A))+I[4]+3889429448&4294967295,T=_+(C<<20&4294967295|C>>>12),C=w+(_^A&(T^_))+I[9]+568446438&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^_&(w^T))+I[14]+3275163606&4294967295,A=w+(C<<9&4294967295|C>>>23),C=_+(w^T&(A^w))+I[3]+4107603335&4294967295,_=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(_^A))+I[8]+1163531501&4294967295,T=_+(C<<20&4294967295|C>>>12),C=w+(_^A&(T^_))+I[13]+2850285829&4294967295,w=T+(C<<5&4294967295|C>>>27),C=A+(T^_&(w^T))+I[2]+4243563512&4294967295,A=w+(C<<9&4294967295|C>>>23),C=_+(w^T&(A^w))+I[7]+1735328473&4294967295,_=A+(C<<14&4294967295|C>>>18),C=T+(A^w&(_^A))+I[12]+2368359562&4294967295,T=_+(C<<20&4294967295|C>>>12),C=w+(T^_^A)+I[5]+4294588738&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^_)+I[8]+2272392833&4294967295,A=w+(C<<11&4294967295|C>>>21),C=_+(A^w^T)+I[11]+1839030562&4294967295,_=A+(C<<16&4294967295|C>>>16),C=T+(_^A^w)+I[14]+4259657740&4294967295,T=_+(C<<23&4294967295|C>>>9),C=w+(T^_^A)+I[1]+2763975236&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^_)+I[4]+1272893353&4294967295,A=w+(C<<11&4294967295|C>>>21),C=_+(A^w^T)+I[7]+4139469664&4294967295,_=A+(C<<16&4294967295|C>>>16),C=T+(_^A^w)+I[10]+3200236656&4294967295,T=_+(C<<23&4294967295|C>>>9),C=w+(T^_^A)+I[13]+681279174&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^_)+I[0]+3936430074&4294967295,A=w+(C<<11&4294967295|C>>>21),C=_+(A^w^T)+I[3]+3572445317&4294967295,_=A+(C<<16&4294967295|C>>>16),C=T+(_^A^w)+I[6]+76029189&4294967295,T=_+(C<<23&4294967295|C>>>9),C=w+(T^_^A)+I[9]+3654602809&4294967295,w=T+(C<<4&4294967295|C>>>28),C=A+(w^T^_)+I[12]+3873151461&4294967295,A=w+(C<<11&4294967295|C>>>21),C=_+(A^w^T)+I[15]+530742520&4294967295,_=A+(C<<16&4294967295|C>>>16),C=T+(_^A^w)+I[2]+3299628645&4294967295,T=_+(C<<23&4294967295|C>>>9),C=w+(_^(T|~A))+I[0]+4096336452&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~_))+I[7]+1126891415&4294967295,A=w+(C<<10&4294967295|C>>>22),C=_+(w^(A|~T))+I[14]+2878612391&4294967295,_=A+(C<<15&4294967295|C>>>17),C=T+(A^(_|~w))+I[5]+4237533241&4294967295,T=_+(C<<21&4294967295|C>>>11),C=w+(_^(T|~A))+I[12]+1700485571&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~_))+I[3]+2399980690&4294967295,A=w+(C<<10&4294967295|C>>>22),C=_+(w^(A|~T))+I[10]+4293915773&4294967295,_=A+(C<<15&4294967295|C>>>17),C=T+(A^(_|~w))+I[1]+2240044497&4294967295,T=_+(C<<21&4294967295|C>>>11),C=w+(_^(T|~A))+I[8]+1873313359&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~_))+I[15]+4264355552&4294967295,A=w+(C<<10&4294967295|C>>>22),C=_+(w^(A|~T))+I[6]+2734768916&4294967295,_=A+(C<<15&4294967295|C>>>17),C=T+(A^(_|~w))+I[13]+1309151649&4294967295,T=_+(C<<21&4294967295|C>>>11),C=w+(_^(T|~A))+I[4]+4149444226&4294967295,w=T+(C<<6&4294967295|C>>>26),C=A+(T^(w|~_))+I[11]+3174756917&4294967295,A=w+(C<<10&4294967295|C>>>22),C=_+(w^(A|~T))+I[2]+718787259&4294967295,_=A+(C<<15&4294967295|C>>>17),C=T+(A^(_|~w))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(_+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+_&4294967295,k.g[3]=k.g[3]+A&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var T=w-this.blockSize,I=this.B,_=this.h,A=0;A<w;){if(_==0)for(;A<=T;)i(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<w;)if(I[_++]=k.charCodeAt(A++),_==this.blockSize){i(this,I),_=0;break}}else for(;A<w;)if(I[_++]=k[A++],_==this.blockSize){i(this,I),_=0;break}}this.h=_,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var T=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=T&255,T/=256;for(this.u(k),k=Array(16),w=T=0;4>w;++w)for(var I=0;32>I;I+=8)k[T++]=this.g[w]>>>I&255;return k};function s(k,w){var T=a;return Object.prototype.hasOwnProperty.call(T,k)?T[k]:T[k]=w(k)}function o(k,w){this.h=w;for(var T=[],I=!0,_=k.length-1;0<=_;_--){var A=k[_]|0;I&&A==w||(T[_]=A,I=!1)}this.g=T}var a={};function c(k){return-128<=k&&128>k?s(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return R(u(-k));for(var w=[],T=1,I=0;k>=T;I++)w[I]=k/T|0,T*=4294967296;return new o(w,0)}function h(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return R(h(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(w,8)),I=f,_=0;_<k.length;_+=8){var A=Math.min(8,k.length-_),C=parseInt(k.substring(_,_+A),w);8>A?(A=u(Math.pow(w,A)),I=I.j(A).add(u(C))):(I=I.j(T),I=I.add(u(C)))}return I}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var k=0,w=1,T=0;T<this.g.length;T++){var I=this.i(T);k+=(0<=I?I:4294967296+I)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(N(this))return"-"+R(this).toString(k);for(var w=u(Math.pow(k,6)),T=this,I="";;){var _=P(T,w).g;T=S(T,_.j(w));var A=((0<T.g.length?T.g[0]:T.h)>>>0).toString(k);if(T=_,b(T))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function N(k){return k.h==-1}t.l=function(k){return k=S(this,k),N(k)?-1:b(k)?0:1};function R(k){for(var w=k.g.length,T=[],I=0;I<w;I++)T[I]=~k.g[I];return new o(T,~k.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),T=[],I=0,_=0;_<=w;_++){var A=I+(this.i(_)&65535)+(k.i(_)&65535),C=(A>>>16)+(this.i(_)>>>16)+(k.i(_)>>>16);I=C>>>16,A&=65535,C&=65535,T[_]=C<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(k,w){return k.add(R(w))}t.j=function(k){if(b(this)||b(k))return f;if(N(this))return N(k)?R(this).j(R(k)):R(R(this).j(k));if(N(k))return R(this.j(R(k)));if(0>this.l(y)&&0>k.l(y))return u(this.m()*k.m());for(var w=this.g.length+k.g.length,T=[],I=0;I<2*w;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var _=0;_<k.g.length;_++){var A=this.i(I)>>>16,C=this.i(I)&65535,ce=k.i(_)>>>16,pe=k.i(_)&65535;T[2*I+2*_]+=C*pe,v(T,2*I+2*_),T[2*I+2*_+1]+=A*pe,v(T,2*I+2*_+1),T[2*I+2*_+1]+=C*ce,v(T,2*I+2*_+1),T[2*I+2*_+2]+=A*ce,v(T,2*I+2*_+2)}for(I=0;I<w;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=w;I<2*w;I++)T[I]=0;return new o(T,0)};function v(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function E(k,w){this.g=k,this.h=w}function P(k,w){if(b(w))throw Error("division by zero");if(b(k))return new E(f,f);if(N(k))return w=P(R(k),w),new E(R(w.g),R(w.h));if(N(w))return w=P(k,R(w)),new E(R(w.g),w.h);if(30<k.g.length){if(N(k)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var T=m,I=w;0>=I.l(k);)T=L(T),I=L(I);var _=U(T,1),A=U(I,1);for(I=U(I,2),T=U(T,2);!b(I);){var C=A.add(I);0>=C.l(k)&&(_=_.add(T),A=C),I=U(I,1),T=U(T,1)}return w=S(k,_.j(w)),new E(_,w)}for(_=f;0<=k.l(w);){for(T=Math.max(1,Math.floor(k.m()/w.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=u(T),C=A.j(w);N(C)||0<C.l(k);)T-=I,A=u(T),C=A.j(w);b(A)&&(A=m),_=_.add(A),k=S(k,C)}return new E(_,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),T=[],I=0;I<w;I++)T[I]=this.i(I)&k.i(I);return new o(T,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),T=[],I=0;I<w;I++)T[I]=this.i(I)|k.i(I);return new o(T,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),T=[],I=0;I<w;I++)T[I]=this.i(I)^k.i(I);return new o(T,this.h^k.h)};function L(k){for(var w=k.g.length+1,T=[],I=0;I<w;I++)T[I]=k.i(I)<<1|k.i(I-1)>>>31;return new o(T,k.h)}function U(k,w){var T=w>>5;w%=32;for(var I=k.g.length-T,_=[],A=0;A<I;A++)_[A]=0<w?k.i(A+T)>>>w|k.i(A+T+1)<<32-w:k.i(A+T);return new o(_,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ti=o}).apply(typeof Hb<"u"?Hb:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ik,ga,sk,Kc,qp,ok,ak,lk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var D=l[x];if(!(D in p))break e;p=p[D]}l=l[l.length-1],x=p[l],d=d(x),d!=x&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var p=0,x=!1,D={next:function(){if(!x&&p<l.length){var O=p++;return{value:d(O,l[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,x),l.apply(d,D)}}return function(){return l.apply(d,arguments)}}function m(l,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function b(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,D,O){for(var B=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)B[xe-2]=arguments[xe];return d.prototype[D].apply(x,B)}}function N(l){const d=l.length;if(0<d){const p=Array(d);for(let x=0;x<d;x++)p[x]=l[x];return p}return[]}function R(l,d){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(c(x)){const D=l.length||0,O=x.length||0;l.length=D+O;for(let B=0;B<O;B++)l[D+B]=x[B]}else l.push(x)}}class S{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function U(l,d,p){for(const x in l)d.call(p,l[x],x,l)}function k(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function w(l){const d={};for(const p in l)d[p]=l[p];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,d){let p,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(p in x)l[p]=x[p];for(let O=0;O<T.length;O++)p=T[O],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function _(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function A(l){a.setTimeout(()=>{throw l},0)}function C(){var l=K;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ce{constructor(){this.h=this.g=null}add(d,p){const x=pe.get();x.set(d,p),this.h?this.h.next=x:this.g=x,this.h=x}}var pe=new S(()=>new Ge,l=>l.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let We,$=!1,K=new ce,Z=()=>{const l=a.Promise.resolve(void 0);We=()=>{l.then(Q)}};var Q=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){A(p)}var d=pe;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}$=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function en(l,d){if(Ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(L){e:{try{P(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&en.aa.h.call(this)}}b(en,Ie);var xt={2:"touch",3:"pen",4:"mouse"};en.prototype.h=function(){en.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Bt="closure_listenable_"+(1e6*Math.random()|0),ld=0;function Ro(l,d,p,x,D){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!x,this.ha=D,this.key=++ld,this.da=this.fa=!1}function Yn(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function tn(l){this.src=l,this.g={},this.h=0}tn.prototype.add=function(l,d,p,x,D){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var B=ud(l,d,x,D);return-1<B?(d=l[B],p||(d.fa=!1)):(d=new Ro(d,this.src,O,!!x,D),d.fa=p,l.push(d)),d};function cd(l,d){var p=d.type;if(p in l.g){var x=l.g[p],D=Array.prototype.indexOf.call(x,d,void 0),O;(O=0<=D)&&Array.prototype.splice.call(x,D,1),O&&(Yn(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function ud(l,d,p,x){for(var D=0;D<l.length;++D){var O=l[D];if(!O.da&&O.listener==d&&O.capture==!!p&&O.ha==x)return D}return-1}var hd="closure_lm_"+(1e6*Math.random()|0),dd={};function Jy(l,d,p,x,D){if(x&&x.once)return ev(l,d,p,x,D);if(Array.isArray(d)){for(var O=0;O<d.length;O++)Jy(l,d[O],p,x,D);return null}return p=gd(p),l&&l[Bt]?l.K(d,p,u(x)?!!x.capture:!!x,D):Zy(l,d,p,!1,x,D)}function Zy(l,d,p,x,D,O){if(!d)throw Error("Invalid event type");var B=u(D)?!!D.capture:!!D,xe=pd(l);if(xe||(l[hd]=xe=new tn(l)),p=xe.add(d,p,x,B,O),p.proxy)return p;if(x=LN(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)Zt||(D=B),D===void 0&&(D=!1),l.addEventListener(d.toString(),x,D);else if(l.attachEvent)l.attachEvent(nv(d.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function LN(){function l(p){return d.call(l.src,l.listener,p)}const d=jN;return l}function ev(l,d,p,x,D){if(Array.isArray(d)){for(var O=0;O<d.length;O++)ev(l,d[O],p,x,D);return null}return p=gd(p),l&&l[Bt]?l.L(d,p,u(x)?!!x.capture:!!x,D):Zy(l,d,p,!0,x,D)}function tv(l,d,p,x,D){if(Array.isArray(d))for(var O=0;O<d.length;O++)tv(l,d[O],p,x,D);else x=u(x)?!!x.capture:!!x,p=gd(p),l&&l[Bt]?(l=l.i,d=String(d).toString(),d in l.g&&(O=l.g[d],p=ud(O,p,x,D),-1<p&&(Yn(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[d],l.h--)))):l&&(l=pd(l))&&(d=l.g[d.toString()],l=-1,d&&(l=ud(d,p,x,D)),(p=-1<l?d[l]:null)&&fd(p))}function fd(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Bt])cd(d.i,l);else{var p=l.type,x=l.proxy;d.removeEventListener?d.removeEventListener(p,x,l.capture):d.detachEvent?d.detachEvent(nv(p),x):d.addListener&&d.removeListener&&d.removeListener(x),(p=pd(d))?(cd(p,l),p.h==0&&(p.src=null,d[hd]=null)):Yn(l)}}}function nv(l){return l in dd?dd[l]:dd[l]="on"+l}function jN(l,d){if(l.da)l=!0;else{d=new en(d,this);var p=l.listener,x=l.ha||l.src;l.fa&&fd(l),l=p.call(x,d)}return l}function pd(l){return l=l[hd],l instanceof tn?l:null}var md="__closure_events_fn_"+(1e9*Math.random()>>>0);function gd(l){return typeof l=="function"?l:(l[md]||(l[md]=function(d){return l.handleEvent(d)}),l[md])}function ut(){re.call(this),this.i=new tn(this),this.M=this,this.F=null}b(ut,re),ut.prototype[Bt]=!0,ut.prototype.removeEventListener=function(l,d,p,x){tv(this,l,d,p,x)};function St(l,d){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=d.type||d,typeof d=="string")d=new Ie(d,l);else if(d instanceof Ie)d.target=d.target||l;else{var D=d;d=new Ie(x,l),I(d,D)}if(D=!0,p)for(var O=p.length-1;0<=O;O--){var B=d.g=p[O];D=Vl(B,x,!0,d)&&D}if(B=d.g=l,D=Vl(B,x,!0,d)&&D,D=Vl(B,x,!1,d)&&D,p)for(O=0;O<p.length;O++)B=d.g=p[O],D=Vl(B,x,!1,d)&&D}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],x=0;x<p.length;x++)Yn(p[x]);delete l.g[d],l.h--}}this.F=null},ut.prototype.K=function(l,d,p,x){return this.i.add(String(l),d,!1,p,x)},ut.prototype.L=function(l,d,p,x){return this.i.add(String(l),d,!0,p,x)};function Vl(l,d,p,x){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,O=0;O<d.length;++O){var B=d[O];if(B&&!B.da&&B.capture==p){var xe=B.listener,nt=B.ha||B.src;B.fa&&cd(l.i,B),D=xe.call(nt,x)!==!1&&D}}return D&&!x.defaultPrevented}function rv(l,d,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function iv(l){l.g=rv(()=>{l.g=null,l.i&&(l.i=!1,iv(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class FN extends re{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(l){re.call(this),this.h=l,this.g={}}b(Do,re);var sv=[];function ov(l){U(l.g,function(d,p){this.g.hasOwnProperty(p)&&fd(d)},l),l.g={}}Do.prototype.N=function(){Do.aa.N.call(this),ov(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yd=a.JSON.stringify,UN=a.JSON.parse,VN=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function vd(){}vd.prototype.h=null;function av(l){return l.h||(l.h=l.i())}function lv(){}var Oo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bd(){Ie.call(this,"d")}b(bd,Ie);function wd(){Ie.call(this,"c")}b(wd,Ie);var Ei={},cv=null;function zl(){return cv=cv||new ut}Ei.La="serverreachability";function uv(l){Ie.call(this,Ei.La,l)}b(uv,Ie);function Mo(l){const d=zl();St(d,new uv(d))}Ei.STAT_EVENT="statevent";function hv(l,d){Ie.call(this,Ei.STAT_EVENT,l),this.stat=d}b(hv,Ie);function Et(l){const d=zl();St(d,new hv(d,l))}Ei.Ma="timingevent";function dv(l,d){Ie.call(this,Ei.Ma,l),this.size=d}b(dv,Ie);function Lo(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function zN(l,d,p,x,D,O){l.info(function(){if(l.g)if(O)for(var B="",xe=O.split("&"),nt=0;nt<xe.length;nt++){var me=xe[nt].split("=");if(1<me.length){var ht=me[0];me=me[1];var Pt=ht.split("_");B=2<=Pt.length&&Pt[1]=="type"?B+(ht+"="+me+"&"):B+(ht+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+d+`
`+p+`
`+B})}function BN(l,d,p,x,D,O,B){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+d+`
`+p+`
`+O+" "+B})}function ys(l,d,p,x){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+qN(l,p)+(x?" "+x:"")})}function $N(l,d){l.info(function(){return"TIMEOUT: "+d})}jo.prototype.info=function(){};function qN(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var D=x[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return yd(p)}catch{return d}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xd;function $l(){}b($l,vd),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},xd=new $l;function Cr(l,d,p,x){this.j=l,this.i=d,this.l=p,this.R=x||1,this.U=new Do(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var mv={},Sd={};function Ed(l,d,p){l.L=1,l.v=Wl(Xn(d)),l.m=p,l.P=!0,gv(l,null)}function gv(l,d){l.F=Date.now(),ql(l),l.A=Xn(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Av(p.i,"t",x),l.C=0,p=l.j.J,l.h=new pv,l.g=Kv(l.j,p?d:null,!l.m),0<l.O&&(l.M=new FN(m(l.Y,l,l.g),l.O)),d=l.U,p=l.g,x=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(sv[0]=D.toString()),D=sv);for(var O=0;O<D.length;O++){var B=Jy(p,D[O],x||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Mo(),zN(l.i,l.u,l.A,l.l,l.R,l.m)}Cr.prototype.ca=function(l){l=l.target;const d=this.M;d&&Jn(l)==3?d.j():this.Y(l)},Cr.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=Jn(this.g);var d=this.g.Ba();const ws=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||jv(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=ws?Mo(3):Mo(2)),Td(this);var p=this.g.Z();this.X=p;t:if(yv(this)){var x=jv(this.g);l="";var D=x.length,O=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),Fo(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,l+=this.h.i.decode(x[d],{stream:!(O&&d==D-1)});x.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,BN(this.i,this.u,this.A,this.l,this.R,Pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,nt=this.g;if((xe=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(xe)){var me=xe;break t}}me=null}if(p=me)ys(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kd(this,p);else{this.o=!1,this.s=3,Et(12),Ti(this),Fo(this);break e}}if(this.P){p=!0;let mn;for(;!this.J&&this.C<B.length;)if(mn=HN(this,B),mn==Sd){Pt==4&&(this.s=4,Et(14),p=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==mv){this.s=4,Et(15),ys(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else ys(this.i,this.l,mn,null),kd(this,mn);if(yv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||B.length!=0||this.h.h||(this.s=1,Et(16),p=!1),this.o=this.o&&p,!p)ys(this.i,this.l,B,"[Invalid Chunked Response]"),Ti(this),Fo(this);else if(0<B.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Pd(ht),ht.M=!0,Et(11))}}else ys(this.i,this.l,B,null),kd(this,B);Pt==4&&Ti(this),this.o&&!this.J&&(Pt==4?qv(this.j,this):(this.o=!1,ql(this)))}else l_(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Ti(this),Fo(this)}}}catch{}finally{}};function yv(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function HN(l,d){var p=l.C,x=d.indexOf(`
`,p);return x==-1?Sd:(p=Number(d.substring(p,x)),isNaN(p)?mv:(x+=1,x+p>d.length?Sd:(d=d.slice(x,x+p),l.C=x+p,d)))}Cr.prototype.cancel=function(){this.J=!0,Ti(this)};function ql(l){l.S=Date.now()+l.I,vv(l,l.I)}function vv(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Lo(m(l.ba,l),d)}function Td(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Cr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($N(this.i,this.A),this.L!=2&&(Mo(),Et(17)),Ti(this),this.s=2,Fo(this)):vv(this,this.S-l)};function Fo(l){l.j.G==0||l.J||qv(l.j,l)}function Ti(l){Td(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,ov(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function kd(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||Cd(p.h,l))){if(!l.K&&Cd(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(d)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Zl(p),Xl(p);else break e;Ad(p),Et(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Lo(m(p.Za,p),6e3));if(1>=xv(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ci(p,11)}else if((l.K||p.g==l)&&Zl(p),!v(d))for(D=p.Da.g.parse(d),d=0;d<D.length;d++){let me=D[d];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];const ht=me[3];ht!=null&&(p.la=ht,p.j.info("VER="+p.la));const Pt=me[4];Pt!=null&&(p.Aa=Pt,p.j.info("SVER="+p.Aa));const ws=me[5];ws!=null&&typeof ws=="number"&&0<ws&&(x=1.5*ws,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const mn=l.g;if(mn){const tc=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tc){var O=x.h;O.g||tc.indexOf("spdy")==-1&&tc.indexOf("quic")==-1&&tc.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Id(O,O.h),O.h=null))}if(x.D){const Rd=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(x.ya=Rd,we(x.I,x.D,Rd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var B=l;if(x.qa=Wv(x,x.J?x.ia:null,x.W),B.K){Sv(x.h,B);var xe=B,nt=x.L;nt&&(xe.I=nt),xe.B&&(Td(xe),ql(xe)),x.g=B}else Bv(x);0<p.i.length&&Jl(p)}else me[0]!="stop"&&me[0]!="close"||Ci(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ci(p,7):_d(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}Mo(4)}catch{}}var GN=class{constructor(l,d){this.g=l,this.map=d}};function bv(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wv(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xv(l){return l.h?1:l.g?l.g.size:0}function Cd(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Id(l,d){l.g?l.g.add(d):l.h=d}function Sv(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}bv.prototype.cancel=function(){if(this.i=Ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ev(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return N(l.i)}function WN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],p=l.length,x=0;x<p;x++)d.push(l[x]);return d}d=[],p=0;for(x in l)d[p++]=l[x];return d}function KN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const x in l)d[p++]=x;return d}}}function Tv(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=KN(l),x=WN(l),D=x.length,O=0;O<D;O++)d.call(void 0,x[O],p&&p[O],l)}var kv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QN(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),D=null;if(0<=x){var O=l[p].substring(0,x);D=l[p].substring(x+1)}else O=l[p];d(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ki(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ki){this.h=l.h,Hl(this,l.j),this.o=l.o,this.g=l.g,Gl(this,l.s),this.l=l.l;var d=l.i,p=new zo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Cv(this,p),this.m=l.m}else l&&(d=String(l).match(kv))?(this.h=!1,Hl(this,d[1]||"",!0),this.o=Uo(d[2]||""),this.g=Uo(d[3]||"",!0),Gl(this,d[4]),this.l=Uo(d[5]||"",!0),Cv(this,d[6]||"",!0),this.m=Uo(d[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}ki.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Vo(d,Iv,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Vo(d,Iv,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Vo(p,p.charAt(0)=="/"?JN:XN,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Vo(p,e_)),l.join("")};function Xn(l){return new ki(l)}function Hl(l,d,p){l.j=p?Uo(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Gl(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Cv(l,d,p){d instanceof zo?(l.i=d,t_(l.i,l.h)):(p||(d=Vo(d,ZN)),l.i=new zo(d,l.h))}function we(l,d,p){l.i.set(d,p)}function Wl(l){return we(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Uo(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vo(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,YN),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function YN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Iv=/[#\/\?@]/g,XN=/[#\?:]/g,JN=/[#\?]/g,ZN=/[#\?@]/g,e_=/#/g;function zo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ir(l){l.g||(l.g=new Map,l.h=0,l.i&&QN(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=zo.prototype,t.add=function(l,d){Ir(this),this.i=null,l=vs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function Nv(l,d){Ir(l),d=vs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function _v(l,d){return Ir(l),d=vs(l,d),l.g.has(d)}t.forEach=function(l,d){Ir(this),this.g.forEach(function(p,x){p.forEach(function(D){l.call(d,D,x,this)},this)},this)},t.na=function(){Ir(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let x=0;x<d.length;x++){const D=l[x];for(let O=0;O<D.length;O++)p.push(d[x])}return p},t.V=function(l){Ir(this);let d=[];if(typeof l=="string")_v(this,l)&&(d=d.concat(this.g.get(vs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},t.set=function(l,d){return Ir(this),this.i=null,l=vs(this,l),_v(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Av(l,d,p){Nv(l,d),0<p.length&&(l.i=null,l.g.set(vs(l,d),N(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var x=d[p];const O=encodeURIComponent(String(x)),B=this.V(x);for(x=0;x<B.length;x++){var D=O;B[x]!==""&&(D+="="+encodeURIComponent(String(B[x]))),l.push(D)}}return this.i=l.join("&")};function vs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function t_(l,d){d&&!l.j&&(Ir(l),l.i=null,l.g.forEach(function(p,x){var D=x.toLowerCase();x!=D&&(Nv(this,x),Av(this,D,p))},l)),l.j=d}function n_(l,d){const p=new jo;if(a.Image){const x=new Image;x.onload=y(Nr,p,"TestLoadImage: loaded",!0,d,x),x.onerror=y(Nr,p,"TestLoadImage: error",!1,d,x),x.onabort=y(Nr,p,"TestLoadImage: abort",!1,d,x),x.ontimeout=y(Nr,p,"TestLoadImage: timeout",!1,d,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else d(!1)}function r_(l,d){const p=new jo,x=new AbortController,D=setTimeout(()=>{x.abort(),Nr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:x.signal}).then(O=>{clearTimeout(D),O.ok?Nr(p,"TestPingServer: ok",!0,d):Nr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Nr(p,"TestPingServer: error",!1,d)})}function Nr(l,d,p,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(p)}catch{}}function i_(){this.g=new VN}function s_(l,d,p){const x=p||"";try{Tv(l,function(D,O){let B=D;u(D)&&(B=yd(D)),d.push(x+O+"="+encodeURIComponent(B))})}catch(D){throw d.push(x+"type="+encodeURIComponent("_badmap")),D}}function Kl(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Kl,vd),Kl.prototype.g=function(){return new Ql(this.l,this.j)},Kl.prototype.i=function(l){return function(){return l}}({});function Ql(l,d){ut.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ql,ut),t=Ql.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,$o(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pv(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pv(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Bo(this):$o(this),this.readyState==3&&Pv(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bo(this))},t.Qa=function(l){this.g&&(this.response=l,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$o(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function $o(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rv(l){let d="";return U(l,function(p,x){d+=x,d+=":",d+=p,d+=`\r
`}),d}function Nd(l,d,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Rv(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):we(l,d,p))}function Oe(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Oe,ut);var o_=/^https?$/i,a_=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xd.g(),this.v=this.o?av(this.o):av(xd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(O){Dv(this,O);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)p.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())p.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(a_,d,void 0))||x||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of p)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lv(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Dv(this,O)}};function Dv(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ov(l),Yl(l)}function Ov(l){l.A||(l.A=!0,St(l,"complete"),St(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,St(this,"complete"),St(this,"abort"),Yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mv(this):this.bb())},t.bb=function(){Mv(this)};function Mv(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Jn(l)!=4||l.Z()!=2)){if(l.u&&Jn(l)==4)rv(l.Ea,0,l);else if(St(l,"readystatechange"),Jn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var x;if(x=B===0){var D=String(l.D).match(kv)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),x=!o_.test(D?D.toLowerCase():"")}p=x}if(p)St(l,"complete"),St(l,"success");else{l.m=6;try{var O=2<Jn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Ov(l)}}finally{Yl(l)}}}}function Yl(l,d){if(l.g){Lv(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||St(l,"ready");try{p.onreadystatechange=x}catch{}}}function Lv(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),UN(d)}};function jv(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function l_(l){const d={};l=(l.g&&2<=Jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(v(l[x]))continue;var p=_(l[x]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=d[D]||[];d[D]=O,O.push(p)}k(d,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function Fv(l){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,l),this.cb=qo("retryDelaySeedMs",1e4,l),this.Wa=qo("forwardChannelMaxRetries",2,l),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new bv(l&&l.concurrentRequestLimit),this.Da=new i_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fv.prototype,t.la=8,t.G=1,t.connect=function(l,d,p,x){Et(0),this.W=l,this.H=d||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=Wv(this,null,this.W),Jl(this)};function _d(l){if(Uv(l),l.G==3){var d=l.U++,p=Xn(l.I);if(we(p,"SID",l.K),we(p,"RID",d),we(p,"TYPE","terminate"),Ho(l,p),d=new Cr(l,l.j,d),d.L=2,d.v=Wl(Xn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=Kv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ql(d)}Gv(l)}function Xl(l){l.g&&(Pd(l),l.g.cancel(),l.g=null)}function Uv(l){Xl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Zl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Jl(l){if(!wv(l.h)&&!l.s){l.s=!0;var d=l.Ga;We||Z(),$||(We(),$=!0),K.add(d,l),l.B=0}}function c_(l,d){return xv(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Lo(m(l.Ga,l,d),Hv(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new Cr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=w(O),I(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(d+=x,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=zv(this,D,d),p=Xn(this.I),we(p,"RID",l),we(p,"CVER",22),this.D&&we(p,"X-HTTP-Session-Id",this.D),Ho(this,p),O&&(this.O?d="headers="+encodeURIComponent(String(Rv(O)))+"&"+d:this.m&&Nd(p,this.m,O)),Id(this.h,D),this.Ua&&we(p,"TYPE","init"),this.P?(we(p,"$req",d),we(p,"SID","null"),D.T=!0,Ed(D,p,null)):Ed(D,p,d),this.G=2}}else this.G==3&&(l?Vv(this,l):this.i.length==0||wv(this.h)||Vv(this))};function Vv(l,d){var p;d?p=d.l:p=l.U++;const x=Xn(l.I);we(x,"SID",l.K),we(x,"RID",p),we(x,"AID",l.T),Ho(l,x),l.m&&l.o&&Nd(x,l.m,l.o),p=new Cr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=zv(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Id(l.h,p),Ed(p,x,d)}function Ho(l,d){l.H&&U(l.H,function(p,x){we(d,x,p)}),l.l&&Tv({},function(p,x){we(d,x,p)})}function zv(l,d,p){p=Math.min(l.i.length,p);var x=l.l?m(l.l.Na,l.l,l):null;e:{var D=l.i;let O=-1;for(;;){const B=["count="+p];O==-1?0<p?(O=D[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let xe=!0;for(let nt=0;nt<p;nt++){let me=D[nt].g;const ht=D[nt].map;if(me-=O,0>me)O=Math.max(0,D[nt].g-100),xe=!1;else try{s_(ht,B,"req"+me+"_")}catch{x&&x(ht)}}if(xe){x=B.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,x}function Bv(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;We||Z(),$||(We(),$=!0),K.add(d,l),l.v=0}}function Ad(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Lo(m(l.Fa,l),Hv(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,$v(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Lo(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Xl(this),$v(this))};function Pd(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $v(l){l.g=new Cr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Xn(l.qa);we(d,"RID","rpc"),we(d,"SID",l.K),we(d,"AID",l.T),we(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&we(d,"TO",l.ja),we(d,"TYPE","xmlhttp"),Ho(l,d),l.m&&l.o&&Nd(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Wl(Xn(d)),p.m=null,p.P=!0,gv(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Xl(this),Ad(this),Et(19))};function Zl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function qv(l,d){var p=null;if(l.g==d){Zl(l),Pd(l),l.g=null;var x=2}else if(Cd(l.h,d))p=d.D,Sv(l.h,d),x=1;else return;if(l.G!=0){if(d.o)if(x==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var D=l.B;x=zl(),St(x,new dv(x,p)),Jl(l)}else Bv(l);else if(D=d.s,D==3||D==0&&0<d.X||!(x==1&&c_(l,d)||x==2&&Ad(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),D){case 1:Ci(l,5);break;case 4:Ci(l,10);break;case 3:Ci(l,6);break;default:Ci(l,2)}}}function Hv(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function Ci(l,d){if(l.j.info("Error code "+d),d==2){var p=m(l.fb,l),x=l.Xa;const D=!x;x=new ki(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hl(x,"https"),Wl(x),D?n_(x.toString(),p):r_(x.toString(),p)}else Et(2);l.G=0,l.l&&l.l.sa(d),Gv(l),Uv(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Gv(l){if(l.G=0,l.ka=[],l.l){const d=Ev(l.h);(d.length!=0||l.i.length!=0)&&(R(l.ka,d),R(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function Wv(l,d,p){var x=p instanceof ki?Xn(p):new ki(p);if(x.g!="")d&&(x.g=d+"."+x.g),Gl(x,x.s);else{var D=a.location;x=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var O=new ki(null);x&&Hl(O,x),d&&(O.g=d),D&&Gl(O,D),p&&(O.l=p),x=O}return p=l.D,d=l.ya,p&&d&&we(x,p,d),we(x,"VER",l.la),Ho(l,x),x}function Kv(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Oe(new Kl({eb:p})):new Oe(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qv(){}t=Qv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ec(){}ec.prototype.g=function(l,d){return new $t(l,d)};function $t(l,d){ut.call(this),this.g=new Fv(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!v(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new bs(this)}b($t,ut),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){_d(this.g)},$t.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=yd(l),l=p);d.i.push(new GN(d.Ya++,l)),d.G==3&&Jl(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,$t.aa.N.call(this)};function Yv(l){bd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}b(Yv,bd);function Xv(){wd.call(this),this.status=1}b(Xv,wd);function bs(l){this.g=l}b(bs,Qv),bs.prototype.ua=function(){St(this.g,"a")},bs.prototype.ta=function(l){St(this.g,new Yv(l))},bs.prototype.sa=function(l){St(this.g,new Xv)},bs.prototype.ra=function(){St(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,lk=function(){return new ec},ak=function(){return zl()},ok=Ei,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,Kc=Bl,fv.COMPLETE="complete",sk=fv,lv.EventType=Oo,Oo.OPEN="a",Oo.CLOSE="b",Oo.ERROR="c",Oo.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ga=lv,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,ik=Oe}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const Gb="@firebase/firestore",Wb="4.9.1";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let gt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ko="12.2.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const os=new Ch("@firebase/firestore");function Es(){return os.logLevel}function H(t,...e){if(os.logLevel<=oe.DEBUG){const n=e.map(Bg);os.debug(`Firestore (${ko}): ${t}`,...n)}}function wr(t,...e){if(os.logLevel<=oe.ERROR){const n=e.map(Bg);os.error(`Firestore (${ko}): ${t}`,...n)}}function co(t,...e){if(os.logLevel<=oe.WARN){const n=e.map(Bg);os.warn(`Firestore (${ko}): ${t}`,...n)}}function Bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ck(t,r,n)}function ck(t,e,n){let r=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wr(r),new Error(r)}function fe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ck(e,i,r)}function ne(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends An{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class pM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mM{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ur,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ur)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new uk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class gM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ot(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=bM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Hp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return gf(i)===gf(s)?ae(i,s):gf(i)?1:-1}return ae(t.length,e.length)}const wM=55296,xM=57343;function gf(t){const e=t.charCodeAt(0);return e>=wM&&e<=xM}function uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qb="__name__";class On{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return On.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof On?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=On.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=On.isNumericId(e),i=On.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?On.extractNumericId(e).compare(On.extractNumericId(n)):Hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class ve extends On{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const SM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends On{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return SM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qb}static keyField(){return new ot([Qb])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W{constructor(e){this.path=e}static fromPath(e){return new W(ve.fromString(e))}static fromName(e){return new W(ve.fromString(e).popFirst(5))}static empty(){return new W(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ve(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hk(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EM(t,e,n,r){if(e===!0&&r===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yb(t){if(!W.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xb(t){if(W.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function Il(t,e){if(!dk(t))throw new q(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(j.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jb=-62135596800,Zb=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Zb);return new Te(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jb)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zb}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Il(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:He("string",Te._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Te(0,0))}static max(){return new te(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const al=-1;function TM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new ai(i,W.empty(),e)}function kM(t){return new ai(t.readTime,t.key,al)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(te.min(),W.empty(),al)}static max(){return new ai(te.max(),W.empty(),al)}}function CM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Co(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==IM)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function _M(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qg=-1;function Mh(t){return t==null}function Vu(t){return t===0&&1/t==-1/0}function AM(t){return typeof t=="number"&&Number.isInteger(t)&&!Vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fk="";function PM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ew(e)),e=RM(t.get(n),e);return ew(e)}function RM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case fk:n+="";break;default:n+=s}}return n}function ew(t){return t+fk+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class De{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new st(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(t,e,n,r,i){return this}insert(t,e,n){return new st(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ye{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nw(this.data.getIterator())}getIteratorFrom(e){return new nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new Ye(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mk("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const DM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=DM.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ci(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gk="server_timestamp",yk="__type__",vk="__previous_value__",bk="__local_write_time__";function Hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[yk])==null?void 0:n.stringValue)===gk}function Lh(t){const e=t.mapValue.fields[vk];return Hg(e)?Lh(e):e}function ll(t){const e=li(t.mapValue.fields[bk].timestampValue);return new Te(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OM{constructor(e,n,r,i,s,o,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const zu="(default)";class cl{constructor(e,n){this.projectId=e,this.database=n||zu}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===zu}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wk="__type__",xk="__max__",Sc={mapValue:{fields:{__type__:{stringValue:xk}}}},Sk="__vector__",Bu="value";function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hg(t)?4:LM(t)?9007199254740991:MM(t)?10:11:J(28295,{value:t})}function Kn(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=li(r.timestampValue),o=li(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return ci(r.bytesValue).isEqual(ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Le(r.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Le(r.integerValue)===Le(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Le(r.doubleValue),o=Le(i.doubleValue);return s===o?Vu(s)===Vu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(tw(s)!==tw(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Kn(s[a],o[a])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function ul(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Le(i.integerValue||i.doubleValue),a=Le(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return rw(t.timestampValue,e.timestampValue);case 4:return rw(ll(t),ll(e));case 5:return Hp(t.stringValue,e.stringValue);case 6:return function(i,s){const o=ci(i),a=ci(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=ae(o[c],a[c]);if(u!==0)return u}return ae(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ae(Le(i.latitude),Le(s.latitude));return o!==0?o:ae(Le(i.longitude),Le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iw(t.arrayValue,e.arrayValue);case 10:return function(i,s){var o,a,c,u;const h=i.fields||{},f=s.fields||{},m=(o=h[Bu])==null?void 0:o.arrayValue,y=(a=f[Bu])==null?void 0:a.arrayValue,b=ae(((c=m==null?void 0:m.values)==null?void 0:c.length)||0,((u=y==null?void 0:y.values)==null?void 0:u.length)||0);return b!==0?b:iw(m,y)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===Sc.mapValue&&s===Sc.mapValue)return 0;if(i===Sc.mapValue)return 1;if(s===Sc.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),c=s.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const f=Hp(a[h],u[h]);if(f!==0)return f;const m=ho(o[a[h]],c[u[h]]);if(m!==0)return m}return ae(a.length,u.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function rw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=li(t),r=li(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function iw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function fo(t){return Gp(t)}function Gp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=li(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return ci(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return W.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",r=!0;for(const i of e.values||[])r?r=!1:n+=",",n+=Gp(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",i=!0;for(const s of n)i?i=!1:r+=",",r+=`${s}:${Gp(e.fields[s])}`;return r+"}"}(t.mapValue):J(61005,{value:t})}function Qc(t){switch(ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(t);return e?16+Qc(e):16;case 5:return 2*t.stringValue.length;case 6:return ci(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,i)=>r+Qc(i),0)}(t.arrayValue);case 10:case 11:return function(n){let r=0;return wi(n.fields,(i,s)=>{r+=i.length+Qc(s)}),r}(t.mapValue);default:throw J(13486,{value:t})}}function sw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wp(t){return!!t&&"integerValue"in t}function Gg(t){return!!t&&"arrayValue"in t}function ow(t){return!!t&&"nullValue"in t}function aw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function MM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[wk])==null?void 0:n.stringValue)===Sk}function Oa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oa(t.arrayValue.values[n]);return e}return{...t}}function LM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xk}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Oa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(Oa(this.value))}}function Ek(t){const e=[];return wi(t.fields,(n,r)=>{const i=new ot([n]);if(Yc(r)){const s=Ek(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,te.min(),te.min(),te.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new vt(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new vt(e,2,n,te.min(),te.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,te.min(),te.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $u{constructor(e,n){this.position=e,this.inclusive=n}}function lw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function jM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tk{}class qe extends Tk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UM(e,n,r):n==="array-contains"?new BM(e,r):n==="in"?new $M(e,r):n==="not-in"?new qM(e,r):n==="array-contains-any"?new HM(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VM(e,r):new zM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ho(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends Tk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _n(e,n)}matches(e){return kk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kk(t){return t.op==="and"}function Ck(t){return FM(t)&&kk(t)}function FM(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Kp(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(Ck(t))return t.filters.map(e=>Kp(e)).join(",");{const e=t.filters.map(n=>Kp(n)).join(",");return`${t.op}(${e})`}}function Ik(t,e){return t instanceof qe?function(n,r){return r instanceof qe&&n.op===r.op&&n.field.isEqual(r.field)&&Kn(n.value,r.value)}(t,e):t instanceof _n?function(n,r){return r instanceof _n&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&Ik(s,r.filters[o]),!0):!1}(t,e):void J(19439)}function Nk(t){return t instanceof qe?function(e){return`${e.field.canonicalString()} ${e.op} ${fo(e.value)}`}(t):t instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(Nk).join(" ,")+"}"}(t):"Filter"}class UM extends qe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class VM extends qe{constructor(e,n){super(e,"in",n),this.keys=_k("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zM extends qe{constructor(e,n){super(e,"not-in",n),this.keys=_k("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _k(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class BM extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gg(n)&&ul(n.arrayValue,this.value)}}class $M extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ul(this.value.arrayValue,n)}}class qM extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ul(this.value.arrayValue,n)}}class HM extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ul(this.value.arrayValue,r))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function uw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GM(t,e,n,r,i,s,o)}function Wg(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.Te=n}return e.Te}function Kg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ik(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cw(t.startAt,e.startAt)&&cw(t.endAt,e.endAt)}function Qp(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WM(t,e,n,r,i,s,o,a){return new Nl(t,e,n,r,i,s,o,a)}function Qg(t){return new Nl(t)}function hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ak(t){return t.collectionGroup!==null}function Ma(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let s=new Ye(ot.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(s=s.add(a.field))})}),s})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new qu(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new qu(ot.keyField(),r))}return e.Ie}function zn(t){const e=ne(t);return e.Ee||(e.Ee=KM(e,Ma(t))),e.Ee}function KM(t,e){if(t.limitType==="F")return uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qu(i.field,s)});const n=t.endAt?new $u(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $u(t.startAt.position,t.startAt.inclusive):null;return uw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yp(t,e){const n=t.filters.concat([e]);return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xp(t,e,n){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Kg(zn(t),zn(e))&&t.limitType===e.limitType}function Pk(t){return`${Wg(zn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Nk(r)).join(", ")}]`),Mh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),`Target(${n})`}(zn(t))}; limitType=${t.limitType})`}function Fh(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):W.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ma(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=lw(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ma(n),r)||n.endAt&&!function(i,s,o){const a=lw(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ma(n),r))}(t,e)}function QM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rk(t){return(e,n)=>{let r=!1;for(const i of Ma(t)){const s=YM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YM(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?ho(a,c):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pk(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XM=new De(W.comparator);function xr(){return XM}const Dk=new De(W.comparator);function ya(...t){let e=Dk;for(const n of t)e=e.insert(n.key,n);return e}function Ok(t){let e=Dk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bi(){return La()}function Mk(){return La()}function La(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const JM=new De(W.comparator),ZM=new Ye(W.comparator);function le(...t){let e=ZM;for(const n of t)e=e.add(n);return e}const eL=new Ye(ae);function tL(){return eL}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function Lk(t){return{integerValue:""+t}}function nL(t,e){return AM(e)?Lk(e):Yg(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uh{constructor(){this._=void 0}}function rL(t,e,n){return t instanceof Hu?function(r,i){const s={fields:{[yk]:{stringValue:gk},[bk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Hg(i)&&(i=Lh(i)),i&&(s.fields[vk]=i),{mapValue:s}}(n,e):t instanceof hl?Fk(t,e):t instanceof dl?Uk(t,e):function(r,i){const s=jk(r,i),o=dw(s)+dw(r.Ae);return Wp(s)&&Wp(r.Ae)?Lk(o):Yg(r.serializer,o)}(t,e)}function iL(t,e,n){return t instanceof hl?Fk(t,e):t instanceof dl?Uk(t,e):n}function jk(t,e){return t instanceof Gu?function(n){return Wp(n)||function(r){return!!r&&"doubleValue"in r}(n)}(e)?e:{integerValue:0}:null}class Hu extends Uh{}class hl extends Uh{constructor(e){super(),this.elements=e}}function Fk(t,e){const n=Vk(e);for(const r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}class dl extends Uh{constructor(e){super(),this.elements=e}}function Uk(t,e){let n=Vk(e);for(const r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}class Gu extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dw(t){return Le(t.integerValue||t.doubleValue)}function Vk(t){return Gg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sL(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof hl&&r instanceof hl||n instanceof dl&&r instanceof dl?uo(n.elements,r.elements,Kn):n instanceof Gu&&r instanceof Gu?Kn(n.Ae,r.Ae):n instanceof Hu&&r instanceof Hu}(t.transform,e.transform)}class oL{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vh{}function zk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $k(t.key,Cn.none()):new _l(t.key,t.data,Cn.none());{const n=t.data,r=Mt.empty();let i=new Ye(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xi(t.key,r,new Gt(i.toArray()),Cn.none())}}function aL(t,e,n){t instanceof _l?function(r,i,s){const o=r.value.clone(),a=pw(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xi?function(r,i,s){if(!Xc(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=pw(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Bk(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,r){return t instanceof _l?function(i,s,o,a){if(!Xc(i.precondition,s))return o;const c=i.value.clone(),u=mw(i.fieldTransforms,a,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof xi?function(i,s,o,a){if(!Xc(i.precondition,s))return o;const c=mw(i.fieldTransforms,a,s),u=s.data;return u.setAll(Bk(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,s,o){return Xc(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function lL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=jk(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&uo(n,r,(i,s)=>sL(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _l extends Vh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xi extends Vh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pw(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iL(o,a,n[i]))}return r}function mw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rL(s,o,e))}return r}class $k extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cL extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Mk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=zk(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>fw(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>fw(n,r))}}class Xg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return JM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Xg(e,n,r,i)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ze,ue;function fL(t){switch(t){case j.OK:return J(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function qk(t){if(t===void 0)return wr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ze.OK:return j.OK;case ze.CANCELLED:return j.CANCELLED;case ze.UNKNOWN:return j.UNKNOWN;case ze.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ze.INTERNAL:return j.INTERNAL;case ze.UNAVAILABLE:return j.UNAVAILABLE;case ze.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ze.NOT_FOUND:return j.NOT_FOUND;case ze.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ze.ABORTED:return j.ABORTED;case ze.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ze.DATA_LOSS:return j.DATA_LOSS;default:return J(39323,{code:t})}}(ue=ze||(ze={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pL(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mL=new ti([4294967295,4294967295],0);function gw(t){const e=pL().encode(t),n=new rk;return n.update(e),new Uint8Array(n.digest())}function yw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ti([n,r],0),new ti([i,s],0)]}class Jg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(r<0)throw new va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ti.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ti.fromNumber(r)));return i.compare(mL)===1&&(i=new ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gw(e),[r,i]=yw(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Jg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=gw(e),[r,i]=yw(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zh(te.min(),i,new De(ae),xr(),le())}}class Al{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Al(r,n,le(),le(),le())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Hk{constructor(e,n){this.targetId=e,this.Ce=n}}class Gk{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class vw{constructor(){this.ve=0,this.Fe=bw(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:s})}}),new Al(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=bw()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gL{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=Ec(),this.He=Ec(),this.Ye=new De(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Qp(s))if(r===0){const o=new W(s.path);this.et(n,o,vt.newNoDocument(o,te.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ci(r).toUint8Array()}catch(c){if(c instanceof mk)return co("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Jg(o,i,s)}catch(c){return co(c instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Qp(a.target)){const c=new W(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,vt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new zh(e,n,this.Ye,this.je,r);return this.je=xr(),this.Je=Ec(),this.He=Ec(),this.Ye=new De(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ye(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ye(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ec(){return new De(W.comparator)}function bw(){return new De(W.comparator)}const yL=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),vL=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),bL=(()=>({and:"AND",or:"OR"}))();class wL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jp(t,e){return t.useProto3Json||Mh(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xL(t,e){return Wu(t,e.toTimestamp())}function Bn(t){return fe(!!t,49232),te.fromTimestamp(function(e){const n=li(e);return new Te(n.seconds,n.nanos)}(t))}function Zg(t,e){return Zp(t,e).canonicalString()}function Zp(t,e){const n=function(r){return new ve(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kk(t){const e=ve.fromString(t);return fe(Zk(e),10190,{key:e.toString()}),e}function em(t,e){return Zg(t.databaseId,e.path)}function yf(t,e){const n=Kk(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Yk(n))}function Qk(t,e){return Zg(t.databaseId,e)}function SL(t){const e=Kk(t);return e.length===4?ve.emptyPath():Yk(e)}function tm(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yk(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ww(t,e,n){return{name:em(t,e),fields:n.value.mapValue.fields}}function EL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:J(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(fe(u===void 0||typeof u=="string",58123),ct.fromBase64String(u||"")):(fe(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ct.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?j.UNKNOWN:qk(c.code);return new q(u,c.message||"")}(o);n=new Gk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yf(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):te.min(),a=new Mt({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Jc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yf(t,r.document),s=r.readTime?Bn(r.readTime):te.min(),o=vt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yf(t,r.document),s=r.removedTargetIds||[];n=new Jc([],s,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dL(i,s),a=r.targetId;n=new Hk(a,o)}}return n}function TL(t,e){let n;if(e instanceof _l)n={update:ww(t,e.key,e.value)};else if(e instanceof $k)n={delete:em(t,e.key)};else if(e instanceof xi)n={update:ww(t,e.key,e.data),updateMask:DL(e.fieldMask)};else{if(!(e instanceof cL))return J(16599,{Vt:e.type});n={verify:em(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Hu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof dl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Gu)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw J(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:xL(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function kL(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(r,i){let s=r.updateTime?Bn(r.updateTime):Bn(i);return s.isEqual(te.min())&&(s=Bn(i)),new oL(s,r.transformResults||[])}(n,e))):[]}function CL(t,e){return{documents:[Qk(t,e.path)]}}function IL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qk(t,i);const s=function(c){if(c.length!==0)return Jk(_n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:ks(h.field),direction:AL(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Jp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function NL(t){let e=SL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(h){const f=Xk(h);return f instanceof _n&&Ck(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(m){return new qu(Cs(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Mh(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new $u(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new $u(m,f)}(n.endAt)),WM(e,i,o,s,a,"F",c,u)}function _L(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Cs(e.unaryFilter.field);return qe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Cs(e.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cs(e.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cs(e.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(e){return qe.create(Cs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _n.create(e.compositeFilter.filters.map(n=>Xk(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(e.compositeFilter.op))}(t):J(30097,{filter:t})}function AL(t){return yL[t]}function PL(t){return vL[t]}function RL(t){return bL[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Cs(t){return ot.fromServerFormat(t.fieldPath)}function Jk(t){return t instanceof qe?function(e){if(e.op==="=="){if(aw(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NAN"}};if(ow(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(aw(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NOT_NAN"}};if(ow(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(e.field),op:PL(e.op),value:e.value}}}(t):t instanceof _n?function(e){const n=e.getFilters().map(r=>Jk(r));return n.length===1?n[0]:{compositeFilter:{op:RL(e.op),filters:n}}}(t):J(54877,{filter:t})}function DL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qr{constructor(e,n,r,i,s=te.min(),o=te.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OL{constructor(e){this.yt=e}}function ML(t){const e=NL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xp(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LL{constructor(){this.Cn=new jL}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ai.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class jL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(ve.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eC=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(eC,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new po(0)}static cr(){return new po(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sw="LruGarbageCollector",FL=1048576;function Ew([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class UL{constructor(e){this.Ir=e,this.buffer=new Ye(Ew),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ew(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class VL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(Sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?H(Sw,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Vr(3e5)})}}class zL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Oh.ce);const r=new UL(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(xw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xw):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Es()<=oe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function BL(t,e){return new zL(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $L{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ja(r.mutation,i,Gt.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ya();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xr();const o=La(),a=function(){return La()}();return n.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof xi)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ja(h.mutation,u,h.mutation.getFieldMask(),Te.now())):o.set(u.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new qL(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=La();let i=new De((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Gt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=Mk();h.forEach(m=>{if(!s.has(m)){const y=zk(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ak(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Bi());let a=al,c=s;return o.next(u=>F.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,le())).next(h=>({batchId:a,changes:Ok(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ya();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,c=>{const u=function(h,f){return new Nl(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,vt.newInvalidDocument(h)))});let a=ya();return o.forEach((c,u)=>{const h=s.get(c);h!==void 0&&ja(h.mutation,u,Gt.empty(),Te.now()),Fh(n,u)&&(a=a.insert(c,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Bn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:ML(r.bundledQuery),readTime:Bn(r.readTime)}}(n)),F.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WL{constructor(){this.overlays=new De(W.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bi();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Bi(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Bi(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Bi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return F.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hL(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KL{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ey{constructor(){this.Qr=new Ye(Ze.$r),this.Ur=new Ye(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new ve([])),r=new Ze(n,e),i=new Ze(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new ve([])),r=new Ze(n,e),i=new Ze(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Ze.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?qg:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),i=new Ze(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ae);return n.forEach(i=>{const s=new Ze(i,0),o=new Ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new Ze(new W(s),0);let a=new Ye(ae);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},o),F.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,i=>{const s=new Ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ze(n,0),i=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YL{constructor(e){this.ri=e,this.docs=function(){return new De(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=xr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xr();const o=n.path,a=new W(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||CM(kM(h),r)<=0||(i.has(h.key)||Fh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XL(this)}getSize(e){return F.resolve(this.size)}}class XL extends $L{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JL{constructor(e){this.persistence=e,this.si=new ds(n=>Wg(n),Kg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new ey,this.targetCount=0,this.ai=po.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new po(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oh(0),this.li=!1,this.li=!0,this.hi=new KL,this.referenceDelegate=e(this),this.Pi=new JL(this),this.indexManager=new LL,this.remoteDocumentCache=function(r){return new YL(r)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new OL(n),this.Ii=new GL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new QL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new ZL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class ZL extends NM{constructor(e){super(),this.currentSequenceNumber=e}}class ty{constructor(e){this.persistence=e,this.Ri=new ey,this.Vi=null}static mi(e){return new ty(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const i=W.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ku{constructor(e,n){this.persistence=e,this.pi=new ds(r=>PM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BL(this,n)}static mi(e,n){return new Ku(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qc(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ny{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ny(e,n.fromCache,r,i)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rP()?8:_M(wt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ej;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Es()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Es()<=oe.DEBUG&&H("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Es()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):F.resolve())}ys(e,n){if(hw(n))return F.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xp(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,a);return this.Cs(n,u,o,c.readTime)?this.ys(e,Xp(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,i){return hw(n)||i.isEqual(te.min())?F.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?F.resolve(null):(Es()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(n)),this.vs(e,o,n,TM(i,al)).next(a=>a))})}Ds(e,n){let r=new Ye(Rk(e));return n.forEach((i,s)=>{Fh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Es()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.ps.getDocumentsMatchingQuery(e,n,ai.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ry="LocalStore",nj=3e8;class rj{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new De(ae),this.xs=new ds(s=>Wg(s),Kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ij(t,e,n,r){return new rj(t,e,n,r)}async function nC(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=le();for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function sj(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const h=c.batch,f=h.keys();let m=F.resolve();return f.forEach(y=>{m=m.next(()=>u.getEntry(a,y)).next(b=>{const N=c.docVersions.get(y);fe(N!==null,48541),b.version.compareTo(N)<0&&(h.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=le();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rC(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function oj(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(b,N,R){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=nj?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let c=xr(),u=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(aj(s,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.Ms=i,s))}function aj(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xr();return n.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H(ry,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function lj(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cj(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new qr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function nm(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Io(o))throw o;H(ry,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Tw(t,e,n){const r=ne(t);let i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(a,c,u){const h=ne(a),f=h.xs.get(u);return f!==void 0?F.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)}(r,o,zn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:le())).next(a=>(uj(r,QM(e),a),{documents:a,Qs:s})))}function uj(t,e,n){let r=t.Os.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class kw{constructor(){this.activeTargetIds=tL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hj{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dj{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cw="ConnectivityMonitor";class Iw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Cw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(Cw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Tc=null;function rm(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vf="RestConnection",fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=rm(),a=this.zo(e,n.toUriEncodedString());H(vf,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:u}=new URL(a),h=So(u);return this.Jo(e,a,c,r,h).then(f=>(H(vf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw co(vf,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=fj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pt="WebChannelConnection";class gj extends pj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=rm();return new Promise((a,c)=>{const u=new ik;u.setWithCredentials(!0),u.listenOnce(sk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Kc.NO_ERROR:const f=u.getResponseJson();H(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Kc.TIMEOUT:H(pt,`RPC '${e}' ${o} timed out`),c(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const m=u.getStatus();if(H(pt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const N=function(R){const S=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(S)>=0?S:j.UNKNOWN}(b.status);c(new q(N,b.message))}else c(new q(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new q(j.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(pt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);H(pt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=rm(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lk(),a=ak(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");H(pt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const b=new mj({Yo:R=>{y?H(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(H(pt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),H(pt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},Zo:()=>f.close()}),N=(R,S,v)=>{R.listen(S,E=>{try{v(E)}catch(P){setTimeout(()=>{throw P},0)}})};return N(f,ga.EventType.OPEN,()=>{y||(H(pt,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),N(f,ga.EventType.CLOSE,()=>{y||(y=!0,H(pt,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(f))}),N(f,ga.EventType.ERROR,R=>{y||(y=!0,co(pt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.a_(new q(j.UNAVAILABLE,"The operation could not be completed")))}),N(f,ga.EventType.MESSAGE,R=>{var S;if(!y){const v=R.data[0];fe(!!v,16349);const E=v,P=(E==null?void 0:E.error)||((S=E[0])==null?void 0:S.error);if(P){H(pt,`RPC '${e}' stream ${i} received error:`,P);const L=P.status;let U=function(w){const T=ze[w];if(T!==void 0)return qk(T)}(L),k=P.message;U===void 0&&(U=j.INTERNAL,k="Unknown error status: "+L+" with message "+P.message),y=!0,b.a_(new q(U,k)),f.close()}else H(pt,`RPC '${e}' stream ${i} received:`,v),b.u_(v)}}),N(a,ok.STAT_EVENT,R=>{R.stat===qp.PROXY?H(pt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===qp.NOPROXY&&H(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function bf(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bh(t){return new wL(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nw="PersistentStream";class sC{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Nw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(Nw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yj extends sC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=EL(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Bn(s.readTime):te.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=tm(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Qp(a)?{documents:CL(i,a)}:{query:IL(i,a).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=Wk(i,s.resumeToken);const c=Jp(i,s.expectedCount);c!==null&&(o.expectedCount=c)}else if(s.snapshotVersion.compareTo(te.min())>0){o.readTime=Wu(i,s.snapshotVersion.toTimestamp());const c=Jp(i,s.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=_L(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=tm(this.serializer),n.removeTarget=e,this.q_(n)}}class vj extends sC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kL(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=tm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TL(this.serializer,r))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bj{}class wj extends bj{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Zp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Zp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const as="RemoteStore";class Sj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{fs(this)&&(H(as,"Restarting streams for network reachability change."),await async function(a){const c=ne(a);c.Ea.add(4),await Pl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await $h(c)}(this))})}),this.Ra=new xj(r,i)}}async function $h(t){if(fs(t))for(const e of t.da)await e(!0)}async function Pl(t){for(const e of t.da)await e(!1)}function oC(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ay(n)?oy(n):No(n).O_()&&sy(n,e))}function iy(t,e){const n=ne(t),r=No(n);n.Ia.delete(e),r.O_()&&aC(n,e),n.Ia.size===0&&(r.O_()?r.L_():fs(n)&&n.Ra.set("Unknown"))}function sy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).Y_(e)}function aC(t,e){t.Va.Ue(e),No(t).Z_(e)}function oy(t){t.Va=new gL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),No(t).start(),t.Ra.ua()}function ay(t){return fs(t)&&!No(t).x_()&&t.Ia.size>0}function fs(t){return ne(t).Ea.size===0}function lC(t){t.Va=void 0}async function Ej(t){t.Ra.set("Online")}async function Tj(t){t.Ia.forEach((e,n)=>{sy(t,e)})}async function kj(t,e){lC(t),ay(t)?(t.Ra.ha(e),oy(t)):t.Ra.set("Unknown")}async function Cj(t,e,n){if(t.Ra.set("Online"),e instanceof Gk&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(r){H(as,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qu(t,r)}else if(e instanceof Jc?t.Va.Ze(e):e instanceof Hk?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const r=await rC(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Va.Tt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,c)=>{const u=i.Ia.get(a);if(!u)return;i.Ia.set(a,u.withResumeToken(ct.EMPTY_BYTE_STRING,u.snapshotVersion)),aC(i,a);const h=new qr(u.target,a,c,u.sequenceNumber);sy(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){H(as,"Failed to raise snapshot:",r),await Qu(t,r)}}async function Qu(t,e,n){if(!Io(e))throw e;t.Ea.add(1),await Pl(t),t.Ra.set("Offline"),n||(n=()=>rC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(as,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $h(t)})}function cC(t,e){return e().catch(n=>Qu(t,n,e))}async function qh(t){const e=ne(t),n=hi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qg;for(;Ij(e);)try{const i=await lj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Nj(e,i)}catch(i){await Qu(e,i)}uC(e)&&hC(e)}function Ij(t){return fs(t)&&t.Ta.length<10}function Nj(t,e){t.Ta.push(e);const n=hi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uC(t){return fs(t)&&!hi(t).x_()&&t.Ta.length>0}function hC(t){hi(t).start()}async function _j(t){hi(t).ra()}async function Aj(t){const e=hi(t);for(const n of t.Ta)e.ea(n.mutations)}async function Pj(t,e,n){const r=t.Ta.shift(),i=Xg.from(r,e,n);await cC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qh(t)}async function Rj(t,e){e&&hi(t).X_&&await async function(n,r){if(function(i){return fL(i)&&i!==j.ABORTED}(r.code)){const i=n.Ta.shift();hi(n).B_(),await cC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await qh(n)}}(t,e),uC(t)&&hC(t)}async function _w(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),H(as,"RemoteStore received new credentials");const r=fs(n);n.Ea.add(3),await Pl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $h(n)}async function Dj(t,e){const n=ne(t);e?(n.Ea.delete(2),await $h(n)):e||(n.Ea.add(2),await Pl(n),n.Ra.set("Unknown"))}function No(t){return t.ma||(t.ma=function(e,n,r){const i=ne(e);return i.sa(),new yj(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Ej.bind(null,t),t_:Tj.bind(null,t),r_:kj.bind(null,t),H_:Cj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ay(t)?oy(t):t.Ra.set("Unknown")):(await t.ma.stop(),lC(t))})),t.ma}function hi(t){return t.fa||(t.fa=function(e,n,r){const i=ne(e);return i.sa(),new vj(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_j.bind(null,t),r_:Rj.bind(null,t),ta:Aj.bind(null,t),na:Pj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qh(t)):(await t.fa.stop(),t.Ta.length>0&&(H(as,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ly{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ly(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(t,e){if(wr("AsyncQueue",`${e}: ${t}`),Io(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=ya(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Aw{constructor(){this.ga=new De(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,n,Zs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Mj{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const r=ne(e),i=r.queries;r.queries=Pw(),i.forEach((s,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new q(j.ABORTED,"Firestore shutting down"))}}function Pw(){return new ds(t=>Pk(t),jh)}async function dC(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Oj,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=cy(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&uy(n)}async function fC(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lj(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&uy(n)}function jj(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function uy(t){t.Ca.forEach(e=>{e.next()})}var im,Rw;(Rw=im||(im={})).Ma="default",Rw.Cache="cache";class pC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==im.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mC{constructor(e){this.key=e}}class gC{constructor(e){this.key=e}}class Fj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=Rk(e),this.tu=new Zs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Aw,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),y=Fh(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;m&&y?m.data.isEqual(y.data)?b!==N&&(r.track({type:3,doc:y}),R=!0):this.su(m,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(c||u)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(m,y){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:N})}};return b(m)-b(y)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new mo(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Aw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new gC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new mC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hy="SyncEngine";class Uj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Vj{constructor(e){this.key=e,this.hu=!1}}class zj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ds(a=>Pk(a),jh),this.Iu=new Map,this.Eu=new Set,this.du=new De(W.comparator),this.Au=new Map,this.Ru=new ey,this.Vu={},this.mu=new Map,this.fu=po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Bj(t,e,n=!0){const r=SC(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await yC(r,e,n,!0),i}async function $j(t,e){const n=SC(t);await yC(n,e,!0,!1)}async function yC(t,e,n,r){const i=await cj(t.localStore,zn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await qj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&oC(t.remoteStore,i),a}async function qj(t,e,n,r,i){t.pu=(f,m,y)=>async function(b,N,R,S){let v=N.view.ru(R);v.Cs&&(v=await Tw(b.localStore,N.query,!1).then(({documents:U})=>N.view.ru(U,v)));const E=S&&S.targetChanges.get(N.targetId),P=S&&S.targetMismatches.get(N.targetId)!=null,L=N.view.applyChanges(v,b.isPrimaryClient,E,P);return Ow(b,N.targetId,L.au),L.snapshot}(t,f,m,y);const s=await Tw(t.localStore,e,!0),o=new Fj(e,s.Qs),a=o.ru(s.documents),c=Al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Ow(t,n,u.au);const h=new Uj(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Hj(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!jh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&iy(r.remoteStore,i.targetId),sm(r,i.targetId)}).catch(Co)):(sm(r,i.targetId),await nm(r.localStore,i.targetId,!0))}async function Gj(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iy(n.remoteStore,r.targetId))}async function Wj(t,e,n){const r=e3(t);try{const i=await function(s,o){const a=ne(s),c=Te.now(),u=o.reduce((m,y)=>m.add(y.key),le());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=xr(),b=le();return a.Ns.getEntries(m,u).next(N=>{y=N,y.forEach((R,S)=>{S.isValidDocument()||(b=b.add(R))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,y)).next(N=>{h=N;const R=[];for(const S of o){const v=lL(S,h.get(S.key).overlayedDocument);v!=null&&R.push(new xi(S.key,v,Ek(v.value.mapValue),Cn.exists(!0)))}return a.mutationQueue.addMutationBatch(m,c,R,o)}).next(N=>{f=N;const R=N.applyToLocalDocumentSet(h,b);return a.documentOverlayCache.saveOverlays(m,N.batchId,R)})}).then(()=>({batchId:f.batchId,changes:Ok(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.Vu[s.currentUser.toKey()];c||(c=new De(ae)),c=c.insert(o,a),s.Vu[s.currentUser.toKey()]=c}(r,i.batchId,n),await Rl(r,i.changes),await qh(r.remoteStore)}catch(i){const s=cy(i,"Failed to persist write");n.reject(s)}}async function vC(t,e){const n=ne(t);try{const r=await oj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?fe(o.hu,14607):i.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await Rl(n,r,e)}catch(r){await Co(r)}}function Dw(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ne(s);a.onlineState=o;let c=!1;a.queries.forEach((u,h)=>{for(const f of h.Sa)f.va(o)&&(c=!0)}),c&&uy(a)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Kj(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new De(W.comparator);o=o.insert(s,vt.newNoDocument(s,te.min()));const a=le().add(s),c=new zh(te.min(),new Map,new De(ae),o,a);await vC(r,c),r.du=r.du.remove(s),r.Au.delete(e),dy(r)}else await nm(r.localStore,e,!1).then(()=>sm(r,e,n)).catch(Co)}async function Qj(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await sj(n.localStore,e);wC(n,r,null),bC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,i)}catch(i){await Co(i)}}async function Yj(t,e,n){const r=ne(t);try{const i=await function(s,o){const a=ne(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(fe(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);wC(r,e,n),bC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,i)}catch(i){await Co(i)}}function bC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function wC(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function sm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||xC(t,r)})}function xC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(iy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),dy(t))}function Ow(t,e,n){for(const r of n)r instanceof mC?(t.Ru.addReference(r.key,e),Xj(t,r)):r instanceof gC?(H(hy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||xC(t,r.key)):J(19791,{wu:r})}function Xj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(hy,"New document in limbo: "+n),t.Eu.add(r),dy(t))}function dy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new Vj(n)),t.du=t.du.insert(n,r),oC(t.remoteStore,new qr(zn(Qg(n.path)),r,"TargetPurposeLimboResolution",Oh.ce))}}async function Rl(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=ny.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(a,c){const u=ne(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,f=>F.forEach(f.Es,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>F.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Io(h))throw h;H(ry,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.Ms.get(f),y=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(f,b)}}}(r.localStore,s))}async function Jj(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){H(hy,"User change. New user:",e.toKey());const r=await nC(n.localStore,e);n.currentUser=e,function(i,s){i.mu.forEach(o=>{o.forEach(a=>{a.reject(new q(j.CANCELLED,s))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.Ls)}}function Zj(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function SC(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.Pu.H_=Lj.bind(null,e.eventManager),e.Pu.yu=jj.bind(null,e.eventManager),e}function e3(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yj.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ij(this.persistence,new tj,e.initialUser,this.serializer)}Cu(e){return new tC(ty.mi,this.serializer)}Du(e){return new hj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class t3 extends Yu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof Ku,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new VL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new tC(r=>Ku.mi(r,n),this.serializer)}}class om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jj.bind(null,this.syncEngine),await Dj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mj}()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),r=function(i){return new gj(i)}(e.databaseInfo);return function(i,s,o,a){return new wj(i,s,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(n,r,i,s,o){return new Sj(n,r,i,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Dw(this.syncEngine,n,0),function(){return Iw.v()?new Iw:new dj}())}createSyncEngine(e,n){return function(r,i,s,o,a,c,u){const h=new zj(r,i,s,o,a,c);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ne(r);H(as,"RemoteStore shutting down."),i.Ea.add(5),await Pl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}om.provider={build:()=>new om};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const di="FirestoreClient";class n3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=$g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H(di,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(di,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wf(t,e){t.asyncQueue.verifyOperationInProgress(),H(di,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r3(t);H(di,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_w(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_w(e.remoteStore,i)),t._onlineComponents=e}async function r3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(di,"Using user provided OfflineComponentProvider");try{await wf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await wf(t,new Yu)}}else H(di,"Using default OfflineComponentProvider"),await wf(t,new t3(void 0));return t._offlineComponents}async function TC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(di,"Using user provided OnlineComponentProvider"),await Mw(t,t._uninitializedComponentsProvider._online)):(H(di,"Using default OnlineComponentProvider"),await Mw(t,new om))),t._onlineComponents}function i3(t){return TC(t).then(e=>e.syncEngine)}async function kC(t){const e=await TC(t),n=e.eventManager;return n.onListen=Bj.bind(null,e.syncEngine),n.onUnlisten=Hj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$j.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gj.bind(null,e.syncEngine),n}function s3(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){const u=new EC({next:f=>{u.Nu(),s.enqueueAndForget(()=>fC(i,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new pC(Qg(o.path),u,{includeMetadataChanges:!0,qa:!0});return dC(i,h)}(await kC(t),t.asyncQueue,e,n,r)),r.promise}function o3(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){const u=new EC({next:f=>{u.Nu(),s.enqueueAndForget(()=>fC(i,h)),f.fromCache&&a.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new pC(o,u,{includeMetadataChanges:!0,qa:!0});return dC(i,h)}(await kC(t),t.asyncQueue,e,n,r)),r.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lw=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IC="firestore.googleapis.com",jw=!0;class Fw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IC,this.ssl=jw}else this.host=e.host,this.ssl=e.ssl??jw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FL)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CC(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new fM;switch(n.type){case"firstParty":return new yM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Lw.get(e);n&&(H("ComponentProvider","Removing Datastore"),Lw.delete(e),n.terminate())}(this),Promise.resolve()}}function a3(t,e,n,r={}){var i;t=Wn(t,Hh);const s=So(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(VE(`https://${c}`),zE("Firestore",!0)),o.host!==IC&&o.host!==c&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:s,emulatorOptions:r};if(!oi(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=gt.MOCK_USER;else{h=QA(r.mockUserToken,(i=t._app)==null?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gt(m)}t._authCredentials=new pM(new uk(h,f))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _o{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Il(n,Ue._jsonSchema))return new Ue(e,r||null,new W(ve.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:He("string",Ue._jsonSchemaVersion),referencePath:He("string")};class ni extends _o{constructor(e,n,r){super(e,n,Qg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new W(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function Uw(t,e,...n){if(t=Ve(t),hk("collection","path",e),t instanceof Hh){const r=ve.fromString(e,...n);return Xb(r),new ni(t,null,r)}{if(!(t instanceof Ue||t instanceof ni))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Xb(r),new ni(t.firestore,null,r)}}function Is(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=$g.newId()),hk("doc","path",e),t instanceof Hh){const r=ve.fromString(e,...n);return Yb(r),new Ue(t,null,new W(r))}{if(!(t instanceof Ue||t instanceof ni))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Yb(r),new Ue(t.firestore,t instanceof ni?t.converter:null,new W(r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vw="AsyncQueue";class zw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iC(this,"async_queue_retry"),this._c=()=>{const r=bf();r&&H(Vw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ur;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;H(Vw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",Bw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ly.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:Bw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Bw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ao extends Hh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new zw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zw(e),this._firestoreClient=void 0,await e}}}function l3(t,e){const n=typeof t=="object"?t:Tg(),r=typeof t=="string"?t:e||zu,i=hs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=WA("firestore");s&&a3(i,...s)}return i}function fy(t){if(t._terminated)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c3(t),t._firestoreClient}function c3(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,c,u){return new OM(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,CC(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)==null?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||(n=i.localCache)!=null&&n._offlineComponentProvider&&(r=i.localCache)!=null&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ln(ct.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ln(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Il(e,ln._jsonSchema))return ln.fromBase64String(e.bytes)}}ln._jsonSchemaVersion="firestore/bytes/1.0",ln._jsonSchema={type:He("string",ln._jsonSchemaVersion),bytes:He("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class py{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $n{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$n._jsonSchemaVersion}}static fromJSON(e){if(Il(e,$n._jsonSchema))return new $n(e.latitude,e.longitude)}}$n._jsonSchemaVersion="firestore/geoPoint/1.0",$n._jsonSchema={type:He("string",$n._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Il(e,qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qn(e.vectorValues);throw new q(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qn._jsonSchemaVersion="firestore/vectorValue/1.0",qn._jsonSchema={type:He("string",qn._jsonSchemaVersion),vectorValues:He("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u3=/^__.*__$/;class h3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new _l(e,this.data,n,this.fieldTransforms)}}class NC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _C(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class my{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),i=this.Vc({path:r,fc:!1});return i.gc(e),i}yc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),i=this.Vc({path:r,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_C(this.Ac)&&u3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class d3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bh(e)}Cc(e,n,r,i=!1){return new my({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wh(t){const e=t._freezeSettings(),n=Bh(t._databaseId);return new d3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AC(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);gy("Data must be an object, but it was:",o,r);const a=PC(r,o);let c,u;if(s.merge)c=new Gt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=am(e,f,n);if(!o.contains(m))throw new q(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);DC(h,m)||h.push(m)}c=new Gt(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new h3(new Mt(a),c,u)}class Kh extends py{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function f3(t,e,n,r){const i=t.Cc(1,e,n);gy("Data must be an object, but it was:",i,r);const s=[],o=Mt.empty();wi(r,(c,u)=>{const h=yy(e,c,n);u=Ve(u);const f=i.yc(h);if(u instanceof Kh)s.push(h);else{const m=Dl(u,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new Gt(s);return new NC(o,a,i.fieldTransforms)}function p3(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[am(e,r,n)],c=[i];if(s.length%2!=0)throw new q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(am(e,s[m])),c.push(s[m+1]);const u=[],h=Mt.empty();for(let m=a.length-1;m>=0;--m)if(!DC(u,a[m])){const y=a[m];let b=c[m];b=Ve(b);const N=o.yc(y);if(b instanceof Kh)u.push(y);else{const R=Dl(b,N);R!=null&&(u.push(y),h.set(y,R))}}const f=new Gt(u);return new NC(h,f,o.fieldTransforms)}function m3(t,e,n,r=!1){return Dl(n,t.Cc(r?4:3,e))}function Dl(t,e){if(RC(t=Ve(t)))return gy("Unsupported field value:",e,t),PC(t,e);if(t instanceof py)return function(n,r){if(!_C(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Dl(o,r.wc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ve(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nL(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Te.fromDate(n);return{timestampValue:Wu(r.serializer,i)}}if(n instanceof Te){const i=new Te(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wu(r.serializer,i)}}if(n instanceof $n)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ln)return{bytesValue:Wk(r.serializer,n._byteString)};if(n instanceof Ue){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zg(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof qn)return function(i,s){return{mapValue:{fields:{[wk]:{stringValue:Sk},[Bu]:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw s.Sc("VectorValues must only contain numeric values.");return Yg(s.serializer,o)})}}}}}}(n,r);throw r.Sc(`Unsupported field value: ${Dh(n)}`)}(t,e)}function PC(t,e){const n={};return pk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(r,i)=>{const s=Dl(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof $n||t instanceof ln||t instanceof Ue||t instanceof py||t instanceof qn)}function gy(t,e,n){if(!RC(n)||!dk(n)){const r=Dh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function am(t,e,n){if((e=Ve(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return yy(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const g3=new RegExp("[~\\*/\\[\\]]");function yy(t,e,n){if(e.search(g3)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gh(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new q(j.INVALID_ARGUMENT,a+t+c)}function DC(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y3 extends OC{data(){return super.data()}}function vy(t,e){return typeof e=="string"?yy(t,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function v3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class b3 extends by{}function w3(t,e,...n){let r=[];e instanceof by&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof wy).length,o=i.filter(a=>a instanceof Qh).length;if(s>1||s>0&&o>0)throw new q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qh extends b3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qh(e,n,r)}_apply(e){const n=this._parse(e);return MC(e._query,n),new _o(e.firestore,e.converter,Yp(e._query,n))}_parse(e){const n=Wh(e.firestore);return function(r,i,s,o,a,c,u){let h;if(a.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){qw(u,c);const f=[];for(const m of u)f.push($w(o,r,m));h={arrayValue:{values:f}}}else h=$w(o,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||qw(u,c),h=m3(s,i,u,c==="in"||c==="not-in");return qe.create(a,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function x3(t,e,n){const r=e,i=vy("where",t);return Qh._create(i,r,n)}class wy extends by{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)MC(s,a),s=Yp(s,a)}(e._query,n),new _o(e.firestore,e.converter,Yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $w(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ak(e)&&n.indexOf("/")!==-1)throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!W.isDocumentKey(r))throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sw(t,new W(r))}if(n instanceof Ue)return sw(t,n._key);throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function qw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MC(t,e){const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class S3{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)==null?void 0:n[Bu].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Le(o.doubleValue));return new qn(s)}convertGeoPoint(e){return new $n(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=li(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);fe(Zk(r),9688,{name:e});const i=new cl(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||wr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends OC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:He("string",Qi._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class Zc extends Qi{data(e={}){return super.data(e)}}class eo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ba(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zc(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Zc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ba(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Zc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ba(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:E3(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T3(t){t=Wn(t,Ue);const e=Wn(t.firestore,Ao);return s3(fy(e),t._key).then(n=>I3(e,t,n))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:He("string",eo._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class jC extends S3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function k3(t){t=Wn(t,_o);const e=Wn(t.firestore,Ao),n=fy(e),r=new jC(e);return v3(t._query),o3(n,t._query).then(i=>new eo(e,r,t,i))}function Hw(t,e,n){t=Wn(t,Ue);const r=Wn(t.firestore,Ao),i=LC(t.converter,e,n);return xy(r,[AC(Wh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cn.none())])}function Gw(t,e,n,...r){t=Wn(t,Ue);const i=Wn(t.firestore,Ao),s=Wh(i);let o;return o=typeof(e=Ve(e))=="string"||e instanceof Gh?p3(s,"updateDoc",t._key,e,n,r):f3(s,"updateDoc",t._key,e),xy(i,[o.toMutation(t._key,Cn.exists(!0))])}function C3(t,e){const n=Wn(t.firestore,Ao),r=Is(t),i=LC(t.converter,e);return xy(n,[AC(Wh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function xy(t,e){return function(n,r){const i=new ur;return n.asyncQueue.enqueueAndForget(async()=>Wj(await i3(n),r,i)),i.promise}(fy(t),e)}function I3(t,e,n){const r=n.docs.get(e._key),i=new jC(t);return new Qi(t,i,e._key,r,new ba(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){ko=n})(Eo),Gn(new Nn("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ao(new mM(n.getProvider("auth-internal")),new vM(s,n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(a.options.projectId,c)}(s,r),s);return i={useFetchStreams:e,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),hn(Gb,Wb,t),hn(Gb,Wb,"esm2020")})();const Ni=l3(Vg),FC=class wa{constructor(){console.log("🚀 Firebase + VPS Hybrid initialized with REAL database: crys-garage")}static getInstance(){return wa.instance||(wa.instance=new wa),wa.instance}async syncUserToFirebase(e){try{const n=Is(Ni,"users",e.id);await Hw(n,{...e,lastSync:new Date().toISOString(),source:"firebase-vps-hybrid",database:"crys-garage"},{merge:!0}),console.log("✅ User synced to Firebase database:",e.id)}catch(n){throw console.error("❌ Failed to sync user to Firebase:",n),n}}async getUserFromFirebase(e){try{const n=Is(Ni,"users",e),r=await T3(n);return r.exists()?(console.log("✅ User retrieved from Firebase database:",e),r.data()):null}catch(n){throw console.error("❌ Failed to get user from Firebase:",n),n}}async updateUserCredits(e,n){try{const r=Is(Ni,"users",e);await Gw(r,{credits:n,lastUpdated:new Date().toISOString()}),console.log("✅ Credits updated in Firebase:",{userId:e,credits:n})}catch(r){throw console.error("❌ Failed to update credits:",r),r}}async createProcessingJob(e){try{const n=Uw(Ni,"processingJobs"),r=await C3(n,{...e,status:"queued",createdAt:new Date().toISOString(),vpsProcessing:!0,database:"crys-garage"});return console.log("✅ Processing job created in Firebase:",r.id),r.id}catch(n){throw console.error("❌ Failed to create processing job:",n),n}}async updateJobStatus(e,n,r){try{const i=Is(Ni,"processingJobs",e);await Gw(i,{status:n,updatedAt:new Date().toISOString(),...r&&{result:r}}),console.log("✅ Job status updated:",{jobId:e,status:n})}catch(i){throw console.error("❌ Failed to update job status:",i),i}}async getUserJobs(e){try{const n=Uw(Ni,"processingJobs"),r=w3(n,x3("userId","==",e)),i=(await k3(r)).docs.map(s=>({id:s.id,...s.data()}));return console.log("✅ User jobs retrieved:",{userId:e,count:i.length}),i}catch(n){throw console.error("❌ Failed to get user jobs:",n),n}}async testConnection(){try{const e=Is(Ni,"test","connection");return await Hw(e,{timestamp:new Date().toISOString(),status:"connected",database:"crys-garage",test:!0}),console.log("✅ Firebase database connection successful!"),!0}catch(e){return console.error("❌ Firebase database connection failed:",e),!1}}};ah(FC,"instance");let N3=FC;const Ww=N3.getInstance(),Ss=(t,e="free")=>{var n;return{id:t.uid,name:t.displayName||((n=t.email)==null?void 0:n.split("@")[0])||"User",email:t.email||"",tier:e,credits:0,join_date:new Date().toISOString(),total_tracks:0,total_spent:0,profile_picture:t.photoURL||void 0}},Tt={getToken:()=>{const t=localStorage.getItem("crysgarage_firebase_token");return console.log("tokenManager.getToken():",t?"Token found":"No token"),t},setToken:t=>{console.log("tokenManager.setToken(): Setting token"),localStorage.setItem("crysgarage_firebase_token",t)},removeToken:()=>{console.log("tokenManager.removeToken(): Removing token"),localStorage.removeItem("crysgarage_firebase_token")},getUser:()=>{const t=localStorage.getItem("crysgarage_firebase_user");if(console.log("tokenManager.getUser(): Raw user string =",t),!t||t==="undefined"||t==="null")return console.log("tokenManager.getUser(): No valid user data found"),null;try{const e=JSON.parse(t);return console.log("tokenManager.getUser(): Parsed user =",e),e}catch(e){return console.error("tokenManager.getUser(): Failed to parse user data:",e),null}},setUser:t=>{console.log("tokenManager.setUser(): Setting user =",t),localStorage.setItem("crysgarage_firebase_user",JSON.stringify(t))},removeUser:()=>{console.log("tokenManager.removeUser(): Removing user"),localStorage.removeItem("crysgarage_firebase_user")},clearAuth:()=>{console.log("tokenManager.clearAuth(): Clearing all auth data"),Tt.removeToken(),Tt.removeUser()}};class _3{constructor(){if(ah(this,"authStateListeners",[]),nk(),it){Ii("Firebase Auth bypassed - using Dev Mode user"),Tt.setToken("dev-token"),Tt.setUser(Dn),setTimeout(()=>{this.authStateListeners.forEach(e=>e(Dn))},100);return}this.handleRedirectResult(),kD(Zn,async e=>{if(console.log("Firebase auth state changed:",e?"User signed in":"User signed out"),e){const n=Ss(e),r=await e.getIdToken();Tt.setToken(r),Tt.setUser(n);try{await Ww.syncUserToFirebase(n),console.log("User synced to Firebase database:",n.id)}catch(i){console.error("Firebase sync failed:",i)}this.authStateListeners.forEach(i=>i(n))}else Tt.clearAuth(),this.authStateListeners.forEach(n=>n(null))})}async handleRedirectResult(){try{const e=await eO(Zn);e&&console.log("FirebaseAuth: Redirect result received:",e.user)}catch(e){console.log("FirebaseAuth: No redirect result or error:",e)}}onAuthStateChange(e){return this.authStateListeners.push(e),()=>{const n=this.authStateListeners.indexOf(e);n>-1&&this.authStateListeners.splice(n,1)}}async signInWithGoogle(e="free"){if(it)return Ii("Google sign in bypassed - returning Dev Mode user"),Dn;try{console.log("FirebaseAuth: Starting Google sign in...");try{const n=await GD(Zn,$p),r=Ss(n.user,e);return console.log("FirebaseAuth: Google sign in successful (popup):",r),r}catch(n){if(n.code==="auth/popup-blocked"||n.code==="auth/popup-closed-by-user"){console.log("FirebaseAuth: Popup blocked, using redirect...");const r=window.location.origin;return console.log("FirebaseAuth: Redirecting to:",r),await JD(Zn,$p),new Promise((i,s)=>{setTimeout(()=>{s(new Error("Redirect initiated - page will reload"))},1e3)})}else throw n}}catch(n){throw console.error("FirebaseAuth: Google sign in failed:",n),new Error(`Google sign in failed: ${n.message}`)}}async signInWithEmail(e,n){if(it)return Ii("Email sign in bypassed - returning Dev Mode user"),Dn;try{console.log("FirebaseAuth: Starting email sign in...");const r=await xD(Zn,e,n),i=Ss(r.user);return console.log("FirebaseAuth: Email sign in successful:",i),i}catch(r){throw console.error("FirebaseAuth: Email sign in failed:",r),new Error(`Email sign in failed: ${r.message}`)}}async signUpWithEmail(e,n,r,i="free"){if(it)return Ii("Email sign up bypassed - returning Dev Mode user"),Dn;try{console.log("FirebaseAuth: Starting email sign up...");const s=await wD(Zn,e,n);await Ib(s.user,{displayName:r});const o=Ss(s.user,i);return console.log("FirebaseAuth: Email sign up successful:",o),o}catch(s){throw console.error("FirebaseAuth: Email sign up failed:",s),new Error(`Email sign up failed: ${s.message}`)}}async signOut(){if(it){Ii("Sign out bypassed - clearing Dev Mode user"),Tt.clearAuth(),this.authStateListeners.forEach(e=>e(null));return}try{console.log("FirebaseAuth: Starting sign out..."),await CD(Zn),console.log("FirebaseAuth: Sign out successful")}catch(e){throw console.error("FirebaseAuth: Sign out failed:",e),new Error(`Sign out failed: ${e.message}`)}}getCurrentUser(){if(it)return Dn;const e=Tt.getUser();return console.log("FirebaseAuth: getCurrentUser() =",e),e}isAuthenticated(){if(it)return!0;const e=Tt.getToken(),n=Tt.getUser(),r=!!(e&&n);return console.log("FirebaseAuth: isAuthenticated() =",r),r}async refreshUser(){if(it)return Ii("User refresh bypassed - returning Dev Mode user"),Dn;const e=Zn.currentUser;if(!e)return console.log("FirebaseAuth: No current user to refresh"),null;try{console.log("FirebaseAuth: Refreshing user data...");const n=await e.getIdToken(!0),r=Ss(e);return Tt.setToken(n),Tt.setUser(r),console.log("FirebaseAuth: User data refreshed:",r),r}catch(n){throw console.error("FirebaseAuth: Failed to refresh user data:",n),new Error(`Failed to refresh user data: ${n.message}`)}}async updateProfile(e){if(it){Ii("Profile update bypassed - returning updated Dev Mode user");const r={...Dn,...e};return Tt.setUser(r),r}const n=Zn.currentUser;if(!n)throw new Error("No authenticated user");try{console.log("FirebaseAuth: Updating profile..."),e.name&&await Ib(n,{displayName:e.name});const r={...Ss(n),...e};Tt.setUser(r);try{await Ww.syncUserToFirebase(r),console.log("User profile updated in Firebase:",r.id)}catch(i){console.error("Firebase profile update failed:",i)}return console.log("FirebaseAuth: Profile updated:",r),r}catch(r){throw console.error("FirebaseAuth: Profile update failed:",r),new Error(`Profile update failed: ${r.message}`)}}}const _i=new _3;class A3{constructor(){ah(this,"baseUrl"),this.baseUrl=window.location.hostname==="localhost"?"http://localhost:8004":"https://crysgarage.studio/email"}async sendWelcomeEmail(e){try{const n=await fetch(`${this.baseUrl}/welcome`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:e.userEmail,user_name:e.userName,user_tier:e.userTier||"free"})});return n.ok?(console.log("Welcome email sent successfully to:",e.userEmail),!0):(console.error("Failed to send welcome email:",n.statusText),!1)}catch(n){return console.error("Error sending welcome email:",n),!1}}async sendLoginNotification(e){try{const n=await fetch(`${this.baseUrl}/login-notification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:e.userEmail,user_name:e.userName,login_time:e.loginTime||new Date().toISOString(),ip_address:e.ipAddress})});return n.ok?(console.log("Login notification sent successfully to:",e.userEmail),!0):(console.error("Failed to send login notification:",n.statusText),!1)}catch(n){return console.error("Error sending login notification:",n),!1}}async getUserIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(e){return console.error("Error getting user IP:",e),"Unknown"}}}const na=new A3,UC=z.createContext(void 0);function P3({children:t}){const[e,n]=z.useState(null),[r,i]=z.useState(!0),[s,o]=z.useState(null),[a,c]=z.useState(!1),[u,h]=z.useState(!1),[f,m]=z.useState(null),[y,b]=z.useState(null),[N,R]=z.useState(0);z.useEffect(()=>{console.log("AuthenticationContext: Starting Firebase initialization...");const v=setTimeout(()=>{console.log("AuthenticationContext: Firebase initialization timeout, checking localStorage");const E=localStorage.getItem("user")||localStorage.getItem("crysgarage_user");if(E)try{const P=JSON.parse(E);n(P),console.log("AuthenticationContext: Loaded user from localStorage:",P)}catch(P){console.error("AuthenticationContext: Failed to parse stored user data:",P)}i(!1)},3e3);try{const E=_i.onAuthStateChange(P=>{console.log("AuthenticationContext: Firebase auth state changed:",P?"User signed in":"User signed out"),clearTimeout(v),n(P),i(!1),R(L=>L+1),P?console.log("AuthenticationContext: User authenticated:",P):console.log("AuthenticationContext: User not authenticated")});return()=>{console.log("AuthenticationContext: Cleaning up Firebase auth listener"),clearTimeout(v),E()}}catch(E){console.error("AuthenticationContext: Firebase initialization error:",E),clearTimeout(v),i(!1)}},[]);const S={user:e,isAuthenticated:!!e,isLoading:r,error:s,signup:async(v,E,P,L="free")=>{try{i(!0),o(null),console.log("AuthenticationContext: Starting Firebase signup for:",E,"with tier:",L);const U=await _i.signUpWithEmail(E,P,v,L);console.log("AuthenticationContext: Firebase signup successful, new user:",U),n(U),R(k=>k+1),console.log("AuthenticationContext: User state set to:",U);try{await na.sendWelcomeEmail({userEmail:U.email,userName:U.name,userTier:U.tier}),console.log("AuthenticationContext: Welcome email sent successfully")}catch(k){console.error("AuthenticationContext: Failed to send welcome email:",k)}}catch(U){throw console.error("AuthenticationContext: Firebase signup failed:",U),o(U.message||"Failed to create account"),U}finally{i(!1)}},login:async(v,E)=>{try{i(!0),o(null),console.log("AuthenticationContext: Starting Firebase login for:",v);const P=await _i.signInWithEmail(v,E);console.log("AuthenticationContext: Firebase login successful:",P),n(P),R(L=>L+1);try{const L=await na.getUserIP();await na.sendLoginNotification({userEmail:P.email,userName:P.name,loginTime:new Date().toISOString(),ipAddress:L}),console.log("AuthenticationContext: Login notification email sent successfully")}catch(L){console.error("AuthenticationContext: Failed to send login notification email:",L)}}catch(P){throw console.error("AuthenticationContext: Firebase login failed:",P),o(P.message||"Login failed"),P}finally{i(!1)}},signInWithGoogle:async(v="free")=>{try{i(!0),o(null),console.log("AuthenticationContext: Starting Firebase Google sign in...");const E=await _i.signInWithGoogle(v);console.log("AuthenticationContext: Firebase Google sign in successful:",E),n(E),R(P=>P+1);try{const P=await na.getUserIP();await na.sendLoginNotification({userEmail:E.email,userName:E.name,loginTime:new Date().toISOString(),ipAddress:P}),console.log("AuthenticationContext: Login notification email sent successfully")}catch(P){console.error("AuthenticationContext: Failed to send login notification email:",P)}}catch(E){throw console.error("AuthenticationContext: Firebase Google sign in failed:",E),o(E.message||"Google sign in failed"),E}finally{i(!1)}},logout:async()=>{try{i(!0),console.log("AuthenticationContext: Starting Firebase logout..."),await _i.signOut(),console.log("AuthenticationContext: Firebase logout successful"),n(null)}catch(v){console.error("AuthenticationContext: Firebase logout error:",v),n(null)}finally{i(!1)}},updateProfile:async v=>{try{i(!0),o(null),console.log("AuthenticationContext: Starting Firebase profile update...");const E=await _i.updateProfile(v);console.log("AuthenticationContext: Firebase profile update successful:",E),n(E),localStorage.setItem("user",JSON.stringify(E)),localStorage.setItem("crysgarage_user",JSON.stringify(E))}catch(E){throw console.error("AuthenticationContext: Firebase profile update failed:",E),o(E.message||"Failed to update profile"),E}finally{i(!1)}},refreshUser:async()=>{try{console.log("AuthenticationContext: Starting Firebase user refresh...");const v=await _i.refreshUser();v&&(console.log("AuthenticationContext: Firebase user refresh successful:",v),n(v))}catch(v){console.error("AuthenticationContext: Firebase user refresh failed:",v)}},clearError:()=>{o(null)},showAuthModal:()=>{c(!0)},hideAuthModal:()=>{c(!1)},pendingTierAccess:f,setPendingTierAccess:m,showPaymentModal:()=>{h(!0)},hidePaymentModal:()=>{h(!1)},paymentDetails:y,setPaymentDetails:b};return g.jsx(UC.Provider,{value:S,children:t})}function Sy(){const t=z.useContext(UC);if(t===void 0)throw new Error("useAuth must be used within an AuthenticationProvider");return t}function VC(t,e){return function(){return t.apply(e,arguments)}}const{toString:zC}=Object.prototype,{getPrototypeOf:Ey}=Object,Ty=(t=>e=>{const n=zC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kr=t=>(t=t.toLowerCase(),e=>Ty(e)===t),Yh=t=>e=>typeof e===t,{isArray:Po}=Array,fl=Yh("undefined");function R3(t){return t!==null&&!fl(t)&&t.constructor!==null&&!fl(t.constructor)&&fi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const BC=kr("ArrayBuffer");function D3(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&BC(t.buffer),e}const O3=Yh("string"),fi=Yh("function"),$C=Yh("number"),ky=t=>t!==null&&typeof t=="object",M3=t=>t===!0||t===!1,eu=t=>{if(Ty(t)!=="object")return!1;const e=Ey(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},L3=kr("Date"),j3=kr("File"),F3=kr("Blob"),U3=kr("FileList"),V3=t=>ky(t)&&fi(t.pipe),z3=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||zC.call(t)===e||fi(t.toString)&&t.toString()===e)},B3=kr("URLSearchParams"),$3=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ol(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Po(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function qC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const HC=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),GC=t=>!fl(t)&&t!==HC;function lm(){const{caseless:t}=GC(this)&&this||{},e={},n=(r,i)=>{const s=t&&qC(e,i)||i;eu(e[s])&&eu(r)?e[s]=lm(e[s],r):eu(r)?e[s]=lm({},r):Po(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ol(arguments[r],n);return e}const q3=(t,e,n,{allOwnKeys:r}={})=>(Ol(e,(i,s)=>{n&&fi(i)?t[s]=VC(i,n):t[s]=i},{allOwnKeys:r}),t),H3=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),G3=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},W3=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ey(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},K3=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Q3=t=>{if(!t)return null;if(Po(t))return t;let e=t.length;if(!$C(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Y3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ey(Uint8Array)),X3=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},J3=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Z3=kr("HTMLFormElement"),e5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),Kw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),t5=kr("RegExp"),WC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ol(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},n5=t=>{WC(t,(e,n)=>{if(fi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(fi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},r5=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Po(t)?r(t):r(String(t).split(e)),n},i5=()=>{},s5=(t,e)=>(t=+t,Number.isFinite(t)?t:e),xf="abcdefghijklmnopqrstuvwxyz",Qw="0123456789",KC={DIGIT:Qw,ALPHA:xf,ALPHA_DIGIT:xf+xf.toUpperCase()+Qw},o5=(t=16,e=KC.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function a5(t){return!!(t&&fi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const l5=t=>{const e=new Array(10),n=(r,i)=>{if(ky(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Po(r)?[]:{};return Ol(r,(o,a)=>{const c=n(o,i+1);!fl(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return n(t,0)},M={isArray:Po,isArrayBuffer:BC,isBuffer:R3,isFormData:z3,isArrayBufferView:D3,isString:O3,isNumber:$C,isBoolean:M3,isObject:ky,isPlainObject:eu,isUndefined:fl,isDate:L3,isFile:j3,isBlob:F3,isRegExp:t5,isFunction:fi,isStream:V3,isURLSearchParams:B3,isTypedArray:Y3,isFileList:U3,forEach:Ol,merge:lm,extend:q3,trim:$3,stripBOM:H3,inherits:G3,toFlatObject:W3,kindOf:Ty,kindOfTest:kr,endsWith:K3,toArray:Q3,forEachEntry:X3,matchAll:J3,isHTMLForm:Z3,hasOwnProperty:Kw,hasOwnProp:Kw,reduceDescriptors:WC,freezeMethods:n5,toObjectSet:r5,toCamelCase:e5,noop:i5,toFiniteNumber:s5,findKey:qC,global:HC,isContextDefined:GC,ALPHABET:KC,generateString:o5,isSpecCompliantForm:a5,toJSONObject:l5};function he(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}M.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const QC=he.prototype,YC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YC[t]={value:t}});Object.defineProperties(he,YC);Object.defineProperty(QC,"isAxiosError",{value:!0});he.from=(t,e,n,r,i,s)=>{const o=Object.create(QC);return M.toFlatObject(t,o,function(a){return a!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const c5=null;function cm(t){return M.isPlainObject(t)||M.isArray(t)}function XC(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function Yw(t,e,n){return t?t.concat(e).map(function(r,i){return r=XC(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function u5(t){return M.isArray(t)&&!t.some(cm)}const h5=M.toFlatObject(M,{},null,function(t){return/^is[A-Z]/.test(t)});function Xh(t,e,n){if(!M.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!M.isUndefined(b[y])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(e);if(!M.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(M.isDate(y))return y.toISOString();if(!a&&M.isBlob(y))throw new he("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(y)||M.isTypedArray(y)?a&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,b,N){let R=y;if(y&&!N&&typeof y=="object"){if(M.endsWith(b,"{}"))b=r?b:b.slice(0,-2),y=JSON.stringify(y);else if(M.isArray(y)&&u5(y)||M.isFileList(y)||M.endsWith(b,"[]")&&(R=M.toArray(y)))return b=XC(b),R.forEach(function(S,v){!(M.isUndefined(S)||S===null)&&e.append(o===!0?Yw([b],v,s):o===null?b:b+"[]",c(S))}),!1}return cm(y)?!0:(e.append(Yw(N,b,s),c(y)),!1)}const h=[],f=Object.assign(h5,{defaultVisitor:u,convertValue:c,isVisitable:cm});function m(y,b){if(!M.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));h.push(y),M.forEach(y,function(N,R){(!(M.isUndefined(N)||N===null)&&i.call(e,N,M.isString(R)?R.trim():R,b,f))===!0&&m(N,b?b.concat(R):[R])}),h.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Xw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Cy(t,e){this._pairs=[],t&&Xh(t,this,e)}const JC=Cy.prototype;JC.append=function(t,e){this._pairs.push([t,e])};JC.toString=function(t){const e=t?function(n){return t.call(this,n,Xw)}:Xw;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function d5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZC(t,e,n){if(!e)return t;const r=n&&n.encode||d5,i=n&&n.serialize;let s;if(i?s=i(e,n):s=M.isURLSearchParams(e)?e.toString():new Cy(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class f5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Jw=f5,eI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},p5=typeof URLSearchParams<"u"?URLSearchParams:Cy,m5=FormData,g5=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),y5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ln={isBrowser:!0,classes:{URLSearchParams:p5,FormData:m5,Blob},isStandardBrowserEnv:g5,isStandardBrowserWebWorkerEnv:y5,protocols:["http","https","file","blob","url","data"]};function v5(t,e){return Xh(t,new Ln.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ln.isNode&&M.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function b5(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function w5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function tI(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&M.isArray(i)?i.length:o,c?(M.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!M.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&M.isArray(i[o])&&(i[o]=w5(i[o])),!a)}if(M.isFormData(t)&&M.isFunction(t.entries)){const n={};return M.forEachEntry(t,(r,i)=>{e(b5(r),i,n,0)}),n}return null}const x5={"Content-Type":void 0};function S5(t,e,n){if(M.isString(t))try{return(e||JSON.parse)(t),M.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Jh={transitional:eI,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=M.isObject(t);if(i&&M.isHTMLForm(t)&&(t=new FormData(t)),M.isFormData(t))return r&&r?JSON.stringify(tI(t)):t;if(M.isArrayBuffer(t)||M.isBuffer(t)||M.isStream(t)||M.isFile(t)||M.isBlob(t))return t;if(M.isArrayBufferView(t))return t.buffer;if(M.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return v5(t,this.formSerializer).toString();if((s=M.isFileList(t))||n.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Xh(s?{"files[]":t}:t,o&&new o,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),S5(t)):t}],transformResponse:[function(t){const e=this.transitional||Jh.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(t&&M.isString(t)&&(n&&!this.responseType||r)){const i=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?he.from(s,he.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};M.forEach(["delete","get","head"],function(t){Jh.headers[t]={}});M.forEach(["post","put","patch"],function(t){Jh.headers[t]=M.merge(x5)});const Iy=Jh,E5=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&E5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Zw=Symbol("internals");function ra(t){return t&&String(t).trim().toLowerCase()}function tu(t){return t===!1||t==null?t:M.isArray(t)?t.map(tu):String(t)}function k5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}function C5(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function Sf(t,e,n,r){if(M.isFunction(r))return r.call(this,e,n);if(M.isString(e)){if(M.isString(r))return e.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(e)}}function I5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function N5(t,e){const n=M.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Zh{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,c,u){const h=ra(c);if(!h)throw new Error("header name must be a non-empty string");const f=M.findKey(i,h);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||c]=tu(a))}const o=(a,c)=>M.forEach(a,(u,h)=>s(u,h,c));return M.isPlainObject(e)||e instanceof this.constructor?o(e,n):M.isString(e)&&(e=e.trim())&&!C5(e)?o(T5(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=ra(e),e){const r=M.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return k5(i);if(M.isFunction(n))return n.call(this,i,r);if(M.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ra(e),e){const r=M.findKey(this,e);return!!(r&&(!n||Sf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ra(o),o){const a=M.findKey(r,o);a&&(!n||Sf(r,r[a],a,n))&&(delete r[a],i=!0)}}return M.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Sf(this,this[s],s,e))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return M.forEach(this,(i,s)=>{const o=M.findKey(r,s);if(o){n[o]=tu(i),delete n[s];return}const a=e?I5(s):String(s).trim();a!==s&&delete n[s],n[a]=tu(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return M.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&M.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const n=(this[Zw]=this[Zw]={accessors:{}}).accessors,r=this.prototype;function i(s){const o=ra(s);n[o]||(N5(r,s),n[o]=!0)}return M.isArray(e)?e.forEach(i):i(e),this}}Zh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.freezeMethods(Zh.prototype);M.freezeMethods(Zh);const hr=Zh;function Ef(t,e){const n=this||Iy,r=e||n,i=hr.from(r.headers);let s=r.data;return M.forEach(t,function(o){s=o.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function nI(t){return!!(t&&t.__CANCEL__)}function Ml(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}M.inherits(Ml,he,{__CANCEL__:!0});function _5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const A5=Ln.isStandardBrowserEnv?function(){return{write:function(t,e,n,r,i,s){const o=[];o.push(t+"="+encodeURIComponent(e)),M.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),M.isString(r)&&o.push("path="+r),M.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function P5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function R5(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function rI(t,e){return t&&!P5(e)?R5(t,e):e}const D5=Ln.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(i){let s=i;return t&&(e.setAttribute("href",s),s=e.href),e.setAttribute("href",s),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(i){const s=M.isString(i)?r(i):i;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function O5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function M5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function e1(t,e){let n=0;const r=M5(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a),u=s<=o;n=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&u?(o-s)/c:void 0,event:i};h[e?"download":"upload"]=!0,t(h)}}const L5=typeof XMLHttpRequest<"u",j5=L5&&function(t){return new Promise(function(e,n){let r=t.data;const i=hr.from(t.headers).normalize(),s=t.responseType;let o;function a(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}M.isFormData(r)&&(Ln.isStandardBrowserEnv||Ln.isStandardBrowserWebWorkerEnv)&&i.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+y))}const u=rI(t.baseURL,t.url);c.open(t.method.toUpperCase(),ZC(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function h(){if(!c)return;const m=hr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),y={data:!s||s==="text"||s==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:m,config:t,request:c};_5(function(b){e(b),a()},function(b){n(b),a()},y),c=null}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(n(new he("Request aborted",he.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new he("Network Error",he.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||eI;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),n(new he(m,y.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,c)),c=null},Ln.isStandardBrowserEnv){const m=(t.withCredentials||D5(u))&&t.xsrfCookieName&&A5.read(t.xsrfCookieName);m&&i.set(t.xsrfHeaderName,m)}r===void 0&&i.setContentType(null),"setRequestHeader"in c&&M.forEach(i.toJSON(),function(m,y){c.setRequestHeader(y,m)}),M.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",e1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=m=>{c&&(n(!m||m.type?new Ml(null,t,c):m),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const f=O5(u);if(f&&Ln.protocols.indexOf(f)===-1){n(new he("Unsupported protocol "+f+":",he.ERR_BAD_REQUEST,t));return}c.send(r||null)})},nu={http:c5,xhr:j5};M.forEach(nu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const F5={getAdapter:t=>{t=M.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=M.isString(n)?nu[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new he(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(M.hasOwnProp(nu,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!M.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:nu};function Tf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ml(null,t)}function t1(t){return Tf(t),t.headers=hr.from(t.headers),t.data=Ef.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),F5.getAdapter(t.adapter||Iy.adapter)(t).then(function(e){return Tf(t),e.data=Ef.call(t,t.transformResponse,e),e.headers=hr.from(e.headers),e},function(e){return nI(e)||(Tf(t),e&&e.response&&(e.response.data=Ef.call(t,t.transformResponse,e.response),e.response.headers=hr.from(e.response.headers))),Promise.reject(e)})}const n1=t=>t instanceof hr?t.toJSON():t;function go(t,e){e=e||{};const n={};function r(u,h,f){return M.isPlainObject(u)&&M.isPlainObject(h)?M.merge.call({caseless:f},u,h):M.isPlainObject(h)?M.merge({},h):M.isArray(h)?h.slice():h}function i(u,h,f){if(M.isUndefined(h)){if(!M.isUndefined(u))return r(void 0,u,f)}else return r(u,h,f)}function s(u,h){if(!M.isUndefined(h))return r(void 0,h)}function o(u,h){if(M.isUndefined(h)){if(!M.isUndefined(u))return r(void 0,u)}else return r(void 0,h)}function a(u,h,f){if(f in e)return r(u,h);if(f in t)return r(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h)=>i(n1(u),n1(h),!0)};return M.forEach(Object.keys(t).concat(Object.keys(e)),function(u){const h=c[u]||i,f=h(t[u],e[u],u);M.isUndefined(f)&&h!==a||(n[u]=f)}),n}const iI="1.3.0",Ny={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ny[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const r1={};Ny.transitional=function(t,e,n){function r(i,s){return"[Axios v"+iI+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return(i,s,o)=>{if(t===!1)throw new he(r(s," has been removed"+(e?" in "+e:"")),he.ERR_DEPRECATED);return e&&!r1[s]&&(r1[s]=!0,console.warn(r(s," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,s,o):!0}};function U5(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new he("option "+s+" must be "+c,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+s,he.ERR_BAD_OPTION)}}const um={assertOptions:U5,validators:Ny},Pr=um.validators;class Ju{constructor(e){this.defaults=e,this.interceptors={request:new Jw,response:new Jw}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=go(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&um.assertOptions(r,{silentJSONParsing:Pr.transitional(Pr.boolean),forcedJSONParsing:Pr.transitional(Pr.boolean),clarifyTimeoutError:Pr.transitional(Pr.boolean)},!1),i!==void 0&&um.assertOptions(i,{encode:Pr.function,serialize:Pr.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&M.merge(s.common,s[n.method]),o&&M.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),n.headers=hr.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let h,f=0,m;if(!c){const b=[t1.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,u),m=b.length,h=Promise.resolve(n);f<m;)h=h.then(b[f++],b[f++]);return h}m=a.length;let y=n;for(f=0;f<m;){const b=a[f++],N=a[f++];try{y=b(y)}catch(R){N.call(this,R);break}}try{h=t1.call(this,y)}catch(b){return Promise.reject(b)}for(f=0,m=u.length;f<m;)h=h.then(u[f++],u[f++]);return h}getUri(e){e=go(this.defaults,e);const n=rI(e.baseURL,e.url);return ZC(n,e.params,e.paramsSerializer)}}M.forEach(["delete","get","head","options"],function(t){Ju.prototype[t]=function(e,n){return this.request(go(n||{},{method:t,url:e,data:(n||{}).data}))}});M.forEach(["post","put","patch"],function(t){function e(n){return function(r,i,s){return this.request(go(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}Ju.prototype[t]=e(),Ju.prototype[t+"Form"]=e(!0)});const ru=Ju;class _y{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(i,s,o){r.reason||(r.reason=new Ml(i,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new _y(function(n){e=n}),cancel:e}}}const V5=_y;function z5(t){return function(e){return t.apply(null,e)}}function B5(t){return M.isObject(t)&&t.isAxiosError===!0}const hm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hm).forEach(([t,e])=>{hm[e]=t});const $5=hm;function sI(t){const e=new ru(t),n=VC(ru.prototype.request,e);return M.extend(n,ru.prototype,e,{allOwnKeys:!0}),M.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return sI(go(t,r))},n}const Xe=sI(Iy);Xe.Axios=ru;Xe.CanceledError=Ml;Xe.CancelToken=V5;Xe.isCancel=nI;Xe.VERSION=iI;Xe.toFormData=Xh;Xe.AxiosError=he;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=z5;Xe.isAxiosError=B5;Xe.mergeConfig=go;Xe.AxiosHeaders=hr;Xe.formToJSON=t=>tI(M.isHTMLForm(t)?new FormData(t):t);Xe.HttpStatusCode=$5;Xe.default=Xe;const dm=Xe,fm="https://crysgarage.studio/api",vn=dm.create({baseURL:fm,timeout:3e4,headers:{"Content-Type":"application/json"}});vn.interceptors.request.use(t=>{const e=localStorage.getItem("crysgarage_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("API Request:",{method:t.method,url:t.url,hasToken:!!e,headers:t.headers}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));vn.interceptors.response.use(t=>(console.log("API Response:",{status:t.status,url:t.config.url,data:t.data}),t),t=>{var e,n,r,i;return console.error("API Error:",{status:(e=t.response)==null?void 0:e.status,url:(n=t.config)==null?void 0:n.url,data:(r=t.response)==null?void 0:r.data,message:t.message}),((i=t.response)==null?void 0:i.status)===401&&console.log("401 error detected - letting app handle authentication"),Promise.reject(t)});const i1={publicUpload:async(t,e)=>{var n,r;console.log("=== PUBLIC UPLOAD FILE DEBUG ==="),console.log("File:",t.name,"Size:",t.size),console.log("Genre:",e);const i=new FormData;i.append("audio",t),e&&e.trim()!==""&&i.append("genre",e);try{const s=await dm.post(`${fm}/public/upload`,i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});return console.log("Public upload successful:",s.data),s.data}catch(s){throw console.error("=== PUBLIC UPLOAD ERROR ==="),console.error("Error status:",(n=s.response)==null?void 0:n.status),console.error("Error data:",(r=s.response)==null?void 0:r.data),console.error("Error message:",s.message),console.error("Request config:",s.config),s}},uploadFile:async(t,e)=>{var n,r;console.log("=== UPLOAD FILE DEBUG ==="),console.log("File:",t.name,"Size:",t.size),console.log("Genre:",e);const i=localStorage.getItem("crysgarage_token");console.log("Token exists:",!!i),console.log("Token preview:",i?i.substring(0,20)+"...":"No token");const s=new FormData;s.append("audio",t),e&&e.trim()!==""&&s.append("genre",e);try{const o=await vn.post("/upload",s,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Upload successful:",o.data),o.data}catch(o){throw console.error("=== UPLOAD ERROR ==="),console.error("Error status:",(n=o.response)==null?void 0:n.status),console.error("Error data:",(r=o.response)==null?void 0:r.data),console.error("Error message:",o.message),console.error("Request config:",o.config),o}},getStatus:async t=>(await vn.get(`/status/${t}`)).data,publicGetStatus:async t=>(await dm.get(`${fm}/public/status/${t}`)).data,downloadFile:async(t,e)=>(await vn.get(`/audio/${t}/download/${e}`,{responseType:"blob"})).data,getDownloadUrls:async t=>(await vn.get(`/audio/${t}/download-urls`)).data,startMastering:async(t,e)=>(await vn.post(`/mastering/${t}/start`,e)).data,getSession:async t=>(await vn.get(`/mastering/${t}`)).data,getResult:async t=>(await vn.get(`/mastering/${t}/result`)).data,getMasteringResults:async t=>{const e=`/mastering/${t}/results`;return(await vn.get(e)).data},cancelMastering:async t=>(await vn.post(`/mastering/${t}/cancel`)).data},q5="https://crysgarage.studio/api",kc="crysgarage_token",ia="crysgarage_user",sn={getToken:()=>{const t=localStorage.getItem(kc);return console.log("tokenManager.getToken():",t?"Token found":"No token"),t},setToken:t=>{console.log("tokenManager.setToken():",t?"Token set":"No token provided"),localStorage.setItem(kc,t)},removeToken:()=>{console.log("tokenManager.removeToken(): Removing token"),localStorage.removeItem(kc)},getUser:()=>{const t=localStorage.getItem(ia);if(console.log("tokenManager.getUser(): Raw user string =",t),!t||t==="undefined"||t==="null")return console.log("tokenManager.getUser(): No valid user data found"),null;try{const e=JSON.parse(t);return console.log("tokenManager.getUser(): Parsed user =",e),e}catch(e){return console.error("Error parsing user data:",e),localStorage.removeItem(ia),null}},setUser:t=>{console.log("tokenManager.setUser(): Setting user =",t),localStorage.setItem(ia,JSON.stringify(t))},removeUser:()=>{console.log("tokenManager.removeUser(): Removing user"),localStorage.removeItem(ia)},clearAuth:()=>{console.log("tokenManager.clearAuth(): Clearing all auth data"),localStorage.removeItem(kc),localStorage.removeItem(ia)}},sa=async(t,e={})=>{var n,r;const i=sn.getToken(),s={headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`},...e.headers},...e};try{const o=await fetch(`${q5}${t}`,s);if(!o.ok){const a=await o.json().catch(()=>({}));if(a.errors){const c=Object.values(a.errors)[0];if(Array.isArray(c)&&c.length>0)throw new Error(c[0])}throw new Error(a.message||a.error||`HTTP error! status: ${o.status}`)}return await o.json()}catch(o){throw console.error("API request failed:",o),(n=o.message)!=null&&n.includes("ERR_CONNECTION_REFUSED")||(r=o.message)!=null&&r.includes("Failed to fetch")?new Error("Backend server is not running. Please start the Laravel backend server."):o}},er={signup:async t=>{try{const e=await sa("/auth/signup",{method:"POST",body:JSON.stringify(t)}),{user:n,token:r}=e;return sn.setToken(r),sn.setUser(n),{user:n,token:r}}catch(e){throw console.error("Signup failed:",e),new Error(e.message||"Failed to create account. Please try again.")}},login:async t=>{try{const e=await sa("/auth/signin",{method:"POST",body:JSON.stringify(t)}),{user:n,token:r}=e;return sn.setToken(r),sn.setUser(n),{user:n,token:r}}catch(e){throw console.error("Login failed:",e),new Error(e.message||"Invalid email or password.")}},logout:async()=>{try{await sa("/auth/signout",{method:"POST"})}catch(t){console.error("Logout request failed:",t)}finally{sn.clearAuth()}},getCurrentUser:()=>sn.getUser(),isAuthenticated:()=>sn.getToken()!==null,updateProfile:async t=>{try{const e=(await sa("/auth/profile",{method:"PUT",body:JSON.stringify(t)})).user;return sn.setUser(e),e}catch(e){throw console.error("Failed to update profile:",e),new Error(e.message||"Failed to update profile. Please try again.")}},refreshUser:async()=>{try{const t=(await sa("/auth/user",{method:"GET"})).user;return sn.setUser(t),t}catch(t){return console.error("Failed to refresh user data:",t),null}}},H5={user:null,isAuthenticated:!1,isLoading:!0,currentSession:null,credits:0,tier:"free",error:null,isSyncing:!1};function G5(t,e){var n,r;switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_USER":return{...t,user:e.payload,isAuthenticated:!!e.payload,tier:((n=e.payload)==null?void 0:n.tier)||"free",credits:((r=e.payload)==null?void 0:r.credits)||0};case"SET_AUTHENTICATED":return{...t,isAuthenticated:e.payload};case"SET_SESSION":return{...t,currentSession:e.payload};case"SET_CREDITS":return{...t,credits:e.payload};case"SET_TIER":return{...t,tier:e.payload};case"SET_ERROR":return{...t,error:e.payload};case"CLEAR_ERROR":return{...t,error:null};case"SET_SYNCING":return{...t,isSyncing:e.payload};default:return t}}const W5=z.createContext(void 0);function K5({children:t}){const[e,n]=z.useReducer(G5,H5);z.useEffect(()=>{const s=setTimeout(()=>{console.log("App initialization timeout - forcing loading to false"),n({type:"SET_LOADING",payload:!1})},3e3);return r().finally(()=>{clearTimeout(s)}),()=>clearTimeout(s)},[]),z.useEffect(()=>{const s=()=>{const a=localStorage.getItem("crysgarage_token"),c=localStorage.getItem("crysgarage_user");if(c==="undefined"||c==="null"||c===null){localStorage.removeItem("crysgarage_user"),localStorage.removeItem("crysgarage_token");return}if(a&&c&&!e.user)try{const u=JSON.parse(c);console.log("Found stored user data, updating state:",u),n({type:"SET_USER",payload:u})}catch(u){console.error("Failed to parse stored user data:",u),localStorage.removeItem("crysgarage_token"),localStorage.removeItem("crysgarage_user")}else!a&&!c&&e.user&&(console.log("No stored auth data but user in state, clearing state"),n({type:"SET_USER",payload:null}))};s();const o=setInterval(s,5e3);return()=>clearInterval(o)},[e.user]),z.useEffect(()=>{if(!e.user||!e.isAuthenticated)return;const s=setInterval(async()=>{try{n({type:"SET_SYNCING",payload:!0}),console.log("Background sync: Fetching latest user data...");const o=await er.refreshUser();o&&JSON.stringify(o)!==JSON.stringify(e.user)&&(console.log("Background sync: User data updated",o),n({type:"SET_USER",payload:o}))}catch(o){console.error("Background sync failed:",o)}finally{n({type:"SET_SYNCING",payload:!1})}},3e4);return()=>clearInterval(s)},[e.user,e.isAuthenticated]);const r=async()=>{try{if(console.log("Initializing app..."),n({type:"SET_LOADING",payload:!0}),er.isAuthenticated()){const s=er.getCurrentUser();if(s){console.log("User found in storage:",s),n({type:"SET_USER",payload:s});try{const o=await er.refreshUser();o&&n({type:"SET_USER",payload:o})}catch(o){console.error("Failed to refresh user data:",o)}}else er.logout()}else{const s=localStorage.getItem("crysgarage_token"),o=localStorage.getItem("crysgarage_user");if(o==="undefined"||o==="null"||o===null)localStorage.removeItem("crysgarage_user"),localStorage.removeItem("crysgarage_token");else if(s&&o)try{const a=JSON.parse(o);console.log("Legacy user found:",a),n({type:"SET_USER",payload:a}),sn.setToken(s),sn.setUser(a)}catch(a){console.error("Failed to parse legacy user data:",a),localStorage.removeItem("crysgarage_token"),localStorage.removeItem("crysgarage_user")}}n({type:"SET_LOADING",payload:!1})}catch(s){console.error("App initialization failed:",s),n({type:"SET_LOADING",payload:!1})}},i={...e,dispatch:n,signIn:async(s,o)=>{try{console.log("=== APPCONTEXT SIGNIN START ==="),console.log("Signing in with:",s),n({type:"SET_LOADING",payload:!0}),n({type:"CLEAR_ERROR"});const{user:a}=await er.login({email:s,password:o});console.log("AuthService response user:",a),n({type:"SET_USER",payload:a}),console.log("State updates dispatched"),console.log("=== APPCONTEXT SIGNIN END ===")}catch(a){console.error("=== APPCONTEXT SIGNIN ERROR ==="),console.error("Error in signIn:",a),console.error("=== APPCONTEXT SIGNIN ERROR END ===");const c=a.message||"Sign in failed";throw n({type:"SET_ERROR",payload:c}),a}finally{n({type:"SET_LOADING",payload:!1})}},signUp:async(s,o,a)=>{try{n({type:"SET_LOADING",payload:!0}),n({type:"CLEAR_ERROR"});const{user:c}=await er.signup({name:s,email:o,password:a});n({type:"SET_USER",payload:c})}catch(c){const u=c.message||"Sign up failed";throw n({type:"SET_ERROR",payload:u}),c}finally{n({type:"SET_LOADING",payload:!1})}},signOut:async()=>{try{n({type:"SET_LOADING",payload:!0}),await er.logout(),n({type:"SET_USER",payload:null})}catch(s){console.error("Sign out error:",s),n({type:"SET_USER",payload:null})}finally{n({type:"SET_LOADING",payload:!1})}},uploadFile:async s=>{try{return(await i1.uploadFile(s)).audio_id||"uploaded_file"}catch(o){throw console.error("File upload failed:",o),o}},startMastering:async(s,o,a)=>{var c,u;try{const h={id:(await i1.startMastering(s,{genre:o,config:a})).session_id||s,user_id:((c=e.user)==null?void 0:c.id)||0,file_name:"audio_file.wav",file_size:0,status:"processing",genre:o,tier:((u=e.user)==null?void 0:u.tier)||"free",progress:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n({type:"SET_SESSION",payload:h})}catch(h){throw console.error("Start mastering failed:",h),h}},getSessionStatus:async s=>{var o,a;try{const c={id:s,user_id:((o=e.user)==null?void 0:o.id)||0,file_name:"audio_file.wav",file_size:0,status:"processing",genre:"afrobeats",tier:((a=e.user)==null?void 0:a.tier)||"free",progress:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n({type:"SET_SESSION",payload:c})}catch(c){throw console.error("Get session status failed:",c),c}},refreshUserData:async()=>{try{const s=await er.refreshUser();s&&n({type:"SET_USER",payload:s})}catch(s){throw console.error("Refresh user data failed:",s),s}},clearError:()=>{n({type:"CLEAR_ERROR"})},updateUser:s=>{n({type:"SET_USER",payload:s})}};return g.jsx(W5.Provider,{value:i,children:t})}function s1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Q5(...t){return e=>{let n=!1;const r=t.map(i=>{const s=s1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():s1(t[i],null)}}}}function Y5(t){const e=X5(t),n=z.forwardRef((r,i)=>{const{children:s,...o}=r,a=z.Children.toArray(s),c=a.find(Z5);if(c){const u=c.props.children,h=a.map(f=>f===c?z.Children.count(u)>1?z.Children.only(null):z.isValidElement(u)?u.props.children:null:f);return g.jsx(e,{...o,ref:i,children:z.isValidElement(u)?z.cloneElement(u,void 0,h):null})}return g.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var oI=Y5("Slot");function X5(t){const e=z.forwardRef((n,r)=>{const{children:i,...s}=n;if(z.isValidElement(i)){const o=tF(i),a=eF(s,i.props);return i.type!==z.Fragment&&(a.ref=r?Q5(r,o):o),z.cloneElement(i,a)}return z.Children.count(i)>1?z.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var J5=Symbol("radix.slottable");function Z5(t){return z.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===J5}function eF(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const a=s(...o);return i(...o),a}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function tF(t){var e,n;let r=(e=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:e.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}function aI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=aI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lI(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=aI(t))&&(r&&(r+=" "),r+=e);return r}const o1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,a1=lI,cI=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return a1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=n==null?void 0:n[u],f=s==null?void 0:s[u];if(h===null)return null;const m=o1(h)||o1(f);return i[u][m]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(b=>{let[N,R]=b;return Array.isArray(R)?R.includes({...s,...a}[N]):{...s,...a}[N]===R})?[...u,f,m]:u},[]);return a1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};function nF(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=uI(e))&&(r&&(r+=" "),r+=n);return r}function uI(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=uI(t[r]))&&(n&&(n+=" "),n+=e);return n}var Ay="-";function rF(t){var e=sF(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var c=a.split(Ay);return c[0]===""&&c.length!==1&&c.shift(),hI(c,e)||iF(a)}function o(a,c){var u=n[a]||[];return c&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function hI(t,e){var n;if(t.length===0)return e.classGroupId;var r=t[0],i=e.nextPart.get(r),s=i?hI(t.slice(1),i):void 0;if(s)return s;if(e.validators.length!==0){var o=t.join(Ay);return(n=e.validators.find(function(a){var c=a.validator;return c(o)}))==null?void 0:n.classGroupId}}var l1=/^\[(.+)\]$/;function iF(t){if(l1.test(t)){var e=l1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function sF(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=aF(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];pm(a,r,o,e)}),r}function pm(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:c1(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(oF(i)){pm(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],c=o[1];pm(c,c1(e,a),n,r)})})}function c1(t,e){var n=t;return e.split(Ay).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function oF(t){return t.isThemeGetter}function aF(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):o});return[r,s]}):t}function lF(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(s){var o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set:function(s,o){n.has(s)?n.set(s,o):i(s,o)}}}var dI="!";function cF(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(s){for(var o=[],a=0,c=0,u,h=0;h<s.length;h++){var f=s[h];if(a===0){if(f===r&&(n||s.slice(h,h+i)===e)){o.push(s.slice(c,h)),c=h+i;continue}if(f==="/"){u=h;continue}}f==="["?a++:f==="]"&&a--}var m=o.length===0?s:s.substring(c),y=m.startsWith(dI),b=y?m.substring(1):m,N=u&&u>c?u-c:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:N}}}function uF(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function hF(t){return{cache:lF(t.cacheSize),splitModifiers:cF(t),...rF(t)}}var dF=/\s+/;function fF(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(dF).map(function(o){var a=n(o),c=a.modifiers,u=a.hasImportantModifier,h=a.baseClassName,f=a.maybePostfixModifierPosition,m=r(f?h.substring(0,f):h),y=!!f;if(!m){if(!f)return{isTailwindClass:!1,originalClassName:o};if(m=r(h),!m)return{isTailwindClass:!1,originalClassName:o};y=!1}var b=uF(c).join(":"),N=u?b+dI:b;return{isTailwindClass:!0,modifierId:N,classGroupId:m,originalClassName:o,hasPostfixModifier:y}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,h=a+c;return s.has(h)?!1:(s.add(h),i(c,u).forEach(function(f){return s.add(a+f)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function pF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(u){var h=e[0],f=e.slice(1),m=f.reduce(function(y,b){return b(y)},h());return r=hF(m),i=r.cache.get,s=r.cache.set,o=c,c(u)}function c(u){var h=i(u);if(h)return h;var f=fF(u,r);return s(u,f),f}return function(){return o(nF.apply(null,arguments))}}function Se(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var fI=/^\[(?:([a-z-]+):)?(.+)\]$/i,mF=/^\d+\/\d+$/,gF=new Set(["px","full","screen"]),yF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bF=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function yn(t){return $i(t)||gF.has(t)||mF.test(t)||mm(t)}function mm(t){return ps(t,"length",kF)}function wF(t){return ps(t,"size",pI)}function xF(t){return ps(t,"position",pI)}function SF(t){return ps(t,"url",CF)}function Cc(t){return ps(t,"number",$i)}function $i(t){return!Number.isNaN(Number(t))}function EF(t){return t.endsWith("%")&&$i(t.slice(0,-1))}function oa(t){return u1(t)||ps(t,"number",u1)}function se(t){return fI.test(t)}function aa(){return!0}function Rr(t){return yF.test(t)}function TF(t){return ps(t,"",IF)}function ps(t,e,n){var r=fI.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function kF(t){return vF.test(t)}function pI(){return!1}function CF(t){return t.startsWith("url(")}function u1(t){return Number.isInteger(Number(t))}function IF(t){return bF.test(t)}function NF(){var t=Se("colors"),e=Se("spacing"),n=Se("blur"),r=Se("brightness"),i=Se("borderColor"),s=Se("borderRadius"),o=Se("borderSpacing"),a=Se("borderWidth"),c=Se("contrast"),u=Se("grayscale"),h=Se("hueRotate"),f=Se("invert"),m=Se("gap"),y=Se("gradientColorStops"),b=Se("gradientColorStopPositions"),N=Se("inset"),R=Se("margin"),S=Se("opacity"),v=Se("padding"),E=Se("saturate"),P=Se("scale"),L=Se("sepia"),U=Se("skew"),k=Se("space"),w=Se("translate"),T=function(){return["auto","contain","none"]},I=function(){return["auto","hidden","clip","visible","scroll"]},_=function(){return["auto",se,e]},A=function(){return[se,e]},C=function(){return["",yn]},ce=function(){return["auto",$i,se]},pe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Ge=function(){return["solid","dashed","dotted","double","none"]},We=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},K=function(){return["","0",se]},Z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Q=function(){return[$i,Cc]},re=function(){return[$i,se]};return{cacheSize:500,theme:{colors:[aa],spacing:[yn],blur:["none","",Rr,se],brightness:Q(),borderColor:[t],borderRadius:["none","","full",Rr,se],borderSpacing:A(),borderWidth:C(),contrast:Q(),grayscale:K(),hueRotate:re(),invert:K(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[EF,mm],inset:_(),margin:_(),opacity:Q(),padding:A(),saturate:Q(),scale:Q(),sepia:K(),skew:re(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[Rr]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(pe(),[se])}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oa]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",oa]}],"grid-cols":[{"grid-cols":[aa]}],"col-start-end":[{col:["auto",{span:["full",oa]},se]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[aa]}],"row-start-end":[{row:["auto",{span:[oa]},se]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",se,e]}],"min-w":[{"min-w":["min","max","fit",se,yn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Rr]},Rr,se]}],h:[{h:[se,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",se,yn]}],"max-h":[{"max-h":[se,e,"min","max","fit"]}],"font-size":[{text:["base",Rr,mm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cc]}],"font-family":[{font:[aa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",$i,Cc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",se,yn]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Ge(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",yn]}],"underline-offset":[{"underline-offset":["auto",se,yn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(pe(),[xF])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[].concat(Ge(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:Ge()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Ge())}],"outline-offset":[{"outline-offset":[se,yn]}],"outline-w":[{outline:[yn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[yn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Rr,TF]}],"shadow-color":[{shadow:[aa]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":We()}],"bg-blend":[{"bg-blend":We()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Rr,se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[oa,se]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yn,Cc]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var _F=pF(NF);function ed(...t){return _F(lI(t))}const AF=cI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function It({className:t,variant:e,size:n,asChild:r=!1,...i}){const s=r?oI:"button";return g.jsx(s,{"data-slot":"button",className:ed(AF({variant:e,size:n,className:t})),...i})}function qi({className:t,...e}){return g.jsx("div",{"data-slot":"card",className:ed("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function Hi({className:t,...e}){return g.jsx("div",{"data-slot":"card-content",className:ed("px-6 [&:last-child]:pb-6",t),...e})}const PF=cI("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Li({className:t,variant:e,asChild:n=!1,...r}){const i=n?oI:"span";return g.jsx(i,{"data-slot":"badge",className:ed(PF({variant:e}),t),...r})}const RF="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function kf(t){const[e,n]=z.useState(!1),r=()=>{n(!0)},{src:i,alt:s,style:o,className:a,...c}=t;return e?g.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${a??""}`,style:o,children:g.jsx("div",{className:"flex items-center justify-center w-full h-full",children:g.jsx("img",{src:RF,alt:"Error loading image",...c,"data-original-url":i})})}):g.jsx("img",{src:i,alt:s,className:a,style:o,...c,onError:r})}const mI=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),td=z.createContext({}),Py=z.createContext(null),nd=typeof document<"u",DF=nd?z.useLayoutEffect:z.useEffect,gI=z.createContext({strict:!1}),Ry=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),OF="framerAppearId",yI="data-"+Ry(OF);function MF(t,e,n,r){const{visualElement:i}=z.useContext(td),s=z.useContext(gI),o=z.useContext(Py),a=z.useContext(mI).reducedMotion,c=z.useRef();r=r||s.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;z.useInsertionEffect(()=>{u&&u.update(n,o)});const h=z.useRef(!!(n[yI]&&!window.HandoffComplete));return DF(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),z.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Vs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LF(t,e,n){return z.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Vs(n)&&(n.current=r))},[e])}function pl(t){return typeof t=="string"||Array.isArray(t)}function rd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Dy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Oy=["initial",...Dy];function id(t){return rd(t.animate)||Oy.some(e=>pl(t[e]))}function vI(t){return!!(id(t)||t.variants)}function jF(t,e){if(id(t)){const{initial:n,animate:r}=t;return{initial:n===!1||pl(n)?n:void 0,animate:pl(r)?r:void 0}}return t.inherit!==!1?e:{}}function FF(t){const{initial:e,animate:n}=jF(t,z.useContext(td));return z.useMemo(()=>({initial:e,animate:n}),[h1(e),h1(n)])}function h1(t){return Array.isArray(t)?t.join(" "):t}const d1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ml={};for(const t in d1)ml[t]={isEnabled:e=>d1[t].some(n=>!!e[n])};function UF(t){for(const e in t)ml[e]={...ml[e],...t[e]}}const bI=z.createContext({}),wI=z.createContext({}),VF=Symbol.for("motionComponentSymbol");function zF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&UF(t);function s(a,c){let u;const h={...z.useContext(mI),...a,layoutId:BF(a)},{isStatic:f}=h,m=FF(a),y=r(a,f);if(!f&&nd){m.visualElement=MF(i,y,h,e);const b=z.useContext(wI),N=z.useContext(gI).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,N,t,b))}return z.createElement(td.Provider,{value:m},u&&m.visualElement?z.createElement(u,{visualElement:m.visualElement,...h}):null,n(i,a,LF(y,m.visualElement,c),y,f,m.visualElement))}const o=z.forwardRef(s);return o[VF]=i,o}function BF({layoutId:t}){const e=z.useContext(bI).id;return e&&t!==void 0?e+"-"+t:t}function $F(t){function e(r,i={}){return zF(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const qF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function My(t){return typeof t!="string"||t.includes("-")?!1:!!(qF.indexOf(t)>-1||/[A-Z]/.test(t))}const Zu={};function HF(t){Object.assign(Zu,t)}const Ll=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ms=new Set(Ll);function xI(t,{layout:e,layoutId:n}){return ms.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zu[t]||t==="opacity")}const zt=t=>!!(t&&t.getVelocity),GF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WF=Ll.length;function KF(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<WF;o++){const a=Ll[o];if(t[a]!==void 0){const c=GF[a]||a;s+=`${c}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const SI=t=>e=>typeof e=="string"&&e.startsWith(t),EI=SI("--"),gm=SI("var(--"),QF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,YF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,pi=(t,e,n)=>Math.min(Math.max(n,t),e),gs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fa={...gs,transform:t=>pi(0,1,t)},Ic={...gs,default:1},Ua=t=>Math.round(t*1e5)/1e5,sd=/(-)?([\d]*\.?[\d])+/g,TI=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,XF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function jl(t){return typeof t=="string"}const Fl=t=>({test:e=>jl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Dr=Fl("deg"),Hn=Fl("%"),Y=Fl("px"),JF=Fl("vh"),ZF=Fl("vw"),f1={...Hn,parse:t=>Hn.parse(t)/100,transform:t=>Hn.transform(t*100)},p1={...gs,transform:Math.round},kI={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:Dr,rotateX:Dr,rotateY:Dr,rotateZ:Dr,scale:Ic,scaleX:Ic,scaleY:Ic,scaleZ:Ic,skew:Dr,skewX:Dr,skewY:Dr,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:Fa,originX:f1,originY:f1,originZ:Y,zIndex:p1,fillOpacity:Fa,strokeOpacity:Fa,numOctaves:p1};function Ly(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let c=!1,u=!1,h=!0;for(const f in e){const m=e[f];if(EI(f)){s[f]=m;continue}const y=kI[f],b=YF(m,y);if(ms.has(f)){if(c=!0,o[f]=b,!h)continue;m!==(y.default||0)&&(h=!1)}else f.startsWith("origin")?(u=!0,a[f]=b):i[f]=b}if(e.transform||(c||r?i.transform=KF(t.transform,n,h,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:m="50%",originZ:y=0}=a;i.transformOrigin=`${f} ${m} ${y}`}}const jy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function CI(t,e,n){for(const r in e)!zt(e[r])&&!xI(r,n)&&(t[r]=e[r])}function e6({transformTemplate:t},e,n){return z.useMemo(()=>{const r=jy();return Ly(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function t6(t,e,n){const r=t.style||{},i={};return CI(i,r,t),Object.assign(i,e6(t,e,n)),t.transformValues?t.transformValues(i):i}function n6(t,e,n){const r={},i=t6(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const r6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||r6.has(t)}let II=t=>!eh(t);function i6(t){t&&(II=e=>e.startsWith("on")?!eh(e):t(e))}try{i6(require("@emotion/is-prop-valid").default)}catch{}function s6(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(II(i)||n===!0&&eh(i)||!e&&!eh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function m1(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function o6(t,e,n){const r=m1(e,t.x,t.width),i=m1(n,t.y,t.height);return`${r} ${i}`}const a6={offset:"stroke-dashoffset",array:"stroke-dasharray"},l6={offset:"strokeDashoffset",array:"strokeDasharray"};function c6(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?a6:l6;t[s.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[s.array]=`${o} ${a}`}function Fy(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,f,m){if(Ly(t,u,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:b,dimensions:N}=t;y.transform&&(N&&(b.transform=y.transform),delete y.transform),N&&(i!==void 0||s!==void 0||b.transform)&&(b.transformOrigin=o6(N,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&c6(y,o,a,c,!1)}const NI=()=>({...jy(),attrs:{}}),Uy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function u6(t,e,n,r){const i=z.useMemo(()=>{const s=NI();return Fy(s,e,{enableHardwareAcceleration:!1},Uy(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};CI(s,t.style,t),i.style={...s,...i.style}}return i}function h6(t=!1){return(e,n,r,{latestValues:i},s)=>{const o=(My(e)?u6:n6)(n,i,s,e),a={...s6(n,typeof e=="string",t),...o,ref:r},{children:c}=n,u=z.useMemo(()=>zt(c)?c.get():c,[c]);return z.createElement(e,{...a,children:u})}}function _I(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const AI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PI(t,e,n,r){_I(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(AI.has(i)?i:Ry(i),e.attrs[i])}function Vy(t,e){const{style:n}=t,r={};for(const i in n)(zt(n[i])||e.style&&zt(e.style[i])||xI(i,t))&&(r[i]=n[i]);return r}function RI(t,e){const n=Vy(t,e);for(const r in t)if(zt(t[r])||zt(e[r])){const i=Ll.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function zy(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function d6(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const th=t=>Array.isArray(t),f6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),p6=t=>th(t)?t[t.length-1]||0:t;function iu(t){const e=zt(t)?t.get():t;return f6(e)?e.toValue():e}function m6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:g6(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const DI=t=>(e,n)=>{const r=z.useContext(td),i=z.useContext(Py),s=()=>m6(t,e,r,i);return n?s():d6(s)};function g6(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=iu(s[m]);let{initial:o,animate:a}=t;const c=id(t),u=vI(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!rd(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const y=zy(t,m);if(!y)return;const{transitionEnd:b,transition:N,...R}=y;for(const S in R){let v=R[S];if(Array.isArray(v)){const E=h?v.length-1:0;v=v[E]}v!==null&&(i[S]=v)}for(const S in b)i[S]=b[S]}),i}const Fe=t=>t;class g1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function y6(t){let e=new g1,n=new g1,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const f=h&&i,m=f?e:n;return u&&o.add(c),m.add(c)&&f&&i&&(r=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(c),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(c))}};return a}const Nc=["prepare","read","update","preRender","render","postRender"],v6=40;function b6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Nc.reduce((u,h)=>(u[h]=y6(()=>n=!0),u),{}),o=u=>s[u].process(i),a=()=>{const u=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(u-i.timestamp,v6),1),i.timestamp=u,i.isProcessing=!0,Nc.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},c=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Nc.reduce((u,h)=>{const f=s[h];return u[h]=(m,y=!1,b=!1)=>(n||c(),f.schedule(m,y,b)),u},{}),cancel:u=>Nc.forEach(h=>s[h].cancel(u)),state:i,steps:s}}const{schedule:Ce,cancel:Sr,state:mt,steps:Cf}=b6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fe,!0),w6={useVisualState:DI({scrapeMotionValuesFromProps:RI,createRenderState:NI,onMount:(t,e,{renderState:n,latestValues:r})=>{Ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{Fy(n,r,{enableHardwareAcceleration:!1},Uy(e.tagName),t.transformTemplate),PI(e,n)})}})},x6={useVisualState:DI({scrapeMotionValuesFromProps:Vy,createRenderState:jy})};function S6(t,{forwardMotionProps:e=!1},n,r){return{...My(t)?w6:x6,preloadedFeatures:n,useRender:h6(e),createVisualElement:r,Component:t}}function lr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const OI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function od(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const E6=t=>e=>OI(e)&&t(e,od(e));function dr(t,e,n,r){return lr(t,e,E6(n),r)}const T6=(t,e)=>n=>e(t(n)),ri=(...t)=>t.reduce(T6);function MI(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const y1=MI("dragHorizontal"),v1=MI("dragVertical");function LI(t){let e=!1;if(t==="y")e=v1();else if(t==="x")e=y1();else{const n=y1(),r=v1();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function jI(){const t=LI(!0);return t?(t(),!1):!0}class Si{constructor(e){this.isMounted=!1,this.node=e}update(){}}function b1(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||jI())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ce.update(()=>a[r](s,o))};return dr(t.current,n,i,{passive:!t.getProps()[r]})}class k6 extends Si{mount(){this.unmount=ri(b1(this.node,!0),b1(this.node,!1))}unmount(){}}class C6 extends Si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ri(lr(this.node.current,"focus",()=>this.onFocus()),lr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const FI=(t,e)=>e?t===e?!0:FI(t,e.parentElement):!1;function If(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,od(n))}class I6 extends Si{constructor(){super(...arguments),this.removeStartListeners=Fe,this.removeEndListeners=Fe,this.removeAccessibleListeners=Fe,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=dr(window,"pointerup",(o,a)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Ce.update(()=>{!h&&!FI(this.node.current,o.target)?u&&u(o,a):c&&c(o,a)})},{passive:!(r.onTap||r.onPointerUp)}),s=dr(window,"pointercancel",(o,a)=>this.cancelPress(o,a),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ri(i,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||If("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Ce.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=lr(this.node.current,"keyup",o),If("down",(a,c)=>{this.startPress(a,c)})},n=lr(this.node.current,"keydown",e),r=()=>{this.isPressing&&If("cancel",(s,o)=>this.cancelPress(s,o))},i=lr(this.node.current,"blur",r);this.removeAccessibleListeners=ri(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ce.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jI()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ce.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=dr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=lr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ri(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ym=new WeakMap,Nf=new WeakMap,N6=t=>{const e=ym.get(t.target);e&&e(t)},_6=t=>{t.forEach(N6)};function A6({root:t,...e}){const n=t||document;Nf.has(n)||Nf.set(n,{});const r=Nf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_6,{root:t,...e})),r[i]}function P6(t,e,n){const r=A6(e);return ym.set(t,n),r.observe(t),()=>{ym.delete(t),r.unobserve(t)}}const R6={some:0,all:1};class D6 extends Si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:R6[i]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=u?h:f;m&&m(c)};return P6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(O6(e,n))&&this.startObserver()}unmount(){}}function O6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const M6={inView:{Feature:D6},tap:{Feature:I6},focus:{Feature:C6},hover:{Feature:k6}};function UI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function L6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function j6(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ad(t,e,n){const r=t.getProps();return zy(r,e,n!==void 0?n:r.custom,L6(t),j6(t))}let By=Fe;const Yi=t=>t*1e3,fr=t=>t/1e3,F6={current:!1},VI=t=>Array.isArray(t)&&typeof t[0]=="number";function zI(t){return!!(!t||typeof t=="string"&&BI[t]||VI(t)||Array.isArray(t)&&t.every(zI))}const xa=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,BI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xa([0,.65,.55,1]),circOut:xa([.55,0,1,.45]),backIn:xa([.31,.01,.66,-.59]),backOut:xa([.33,1.53,.69,.99])};function $I(t){if(t)return VI(t)?xa(t):Array.isArray(t)?t.map($I):BI[t]}function U6(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=$I(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function V6(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const qI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,z6=1e-7,B6=12;function $6(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=qI(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>z6&&++a<B6);return o}function Ul(t,e,n,r){if(t===e&&n===r)return Fe;const i=s=>$6(s,0,1,t,n);return s=>s===0||s===1?s:qI(i(s),e,r)}const q6=Ul(.42,0,1,1),H6=Ul(0,0,.58,1),HI=Ul(.42,0,.58,1),G6=t=>Array.isArray(t)&&typeof t[0]!="number",GI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WI=t=>e=>1-t(1-e),$y=t=>1-Math.sin(Math.acos(t)),KI=WI($y),W6=GI($y),QI=Ul(.33,1.53,.69,.99),qy=WI(QI),K6=GI(qy),Q6=t=>(t*=2)<1?.5*qy(t):.5*(2-Math.pow(2,-10*(t-1))),Y6={linear:Fe,easeIn:q6,easeInOut:HI,easeOut:H6,circIn:$y,circInOut:W6,circOut:KI,backIn:qy,backInOut:K6,backOut:QI,anticipate:Q6},w1=t=>{if(Array.isArray(t)){By(t.length===4);const[e,n,r,i]=t;return Ul(e,n,r,i)}else if(typeof t=="string")return Y6[t];return t},Hy=(t,e)=>n=>!!(jl(n)&&XF.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),YI=(t,e,n)=>r=>{if(!jl(r))return r;const[i,s,o,a]=r.match(sd);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},X6=t=>pi(0,255,t),_f={...gs,transform:t=>Math.round(X6(t))},Gi={test:Hy("rgb","red"),parse:YI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_f.transform(t)+", "+_f.transform(e)+", "+_f.transform(n)+", "+Ua(Fa.transform(r))+")"};function J6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const vm={test:Hy("#"),parse:J6,transform:Gi.transform},zs={test:Hy("hsl","hue"),parse:YI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hn.transform(Ua(e))+", "+Hn.transform(Ua(n))+", "+Ua(Fa.transform(r))+")"},kt={test:t=>Gi.test(t)||vm.test(t)||zs.test(t),parse:t=>Gi.test(t)?Gi.parse(t):zs.test(t)?zs.parse(t):vm.parse(t),transform:t=>jl(t)?t:t.hasOwnProperty("red")?Gi.transform(t):zs.transform(t)},Ae=(t,e,n)=>-n*t+n*e+t;function Af(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Z6({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=Af(c,a,t+1/3),s=Af(c,a,t),o=Af(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Pf=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},eU=[vm,Gi,zs],tU=t=>eU.find(e=>e.test(t));function x1(t){const e=tU(t);let n=e.parse(t);return e===zs&&(n=Z6(n)),n}const XI=(t,e)=>{const n=x1(t),r=x1(e),i={...n};return s=>(i.red=Pf(n.red,r.red,s),i.green=Pf(n.green,r.green,s),i.blue=Pf(n.blue,r.blue,s),i.alpha=Ae(n.alpha,r.alpha,s),Gi.transform(i))};function nU(t){var e,n;return isNaN(t)&&jl(t)&&(((e=t.match(sd))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(TI))===null||n===void 0?void 0:n.length)||0)>0}const JI={regex:QF,countKey:"Vars",token:"${v}",parse:Fe},ZI={regex:TI,countKey:"Colors",token:"${c}",parse:kt.parse},eN={regex:sd,countKey:"Numbers",token:"${n}",parse:gs.parse};function Rf(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function nh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Rf(n,JI),Rf(n,ZI),Rf(n,eN),n}function tN(t){return nh(t).values}function nN(t){const{values:e,numColors:n,numVars:r,tokenised:i}=nh(t),s=e.length;return o=>{let a=i;for(let c=0;c<s;c++)c<r?a=a.replace(JI.token,o[c]):c<r+n?a=a.replace(ZI.token,kt.transform(o[c])):a=a.replace(eN.token,Ua(o[c]));return a}}const rU=t=>typeof t=="number"?0:t;function iU(t){const e=tN(t);return nN(t)(e.map(rU))}const mi={test:nU,parse:tN,createTransformer:nN,getAnimatableNone:iU},rN=(t,e)=>n=>`${n>0?e:t}`;function iN(t,e){return typeof t=="number"?n=>Ae(t,e,n):kt.test(t)?XI(t,e):t.startsWith("var(")?rN(t,e):oN(t,e)}const sN=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>iN(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},sU=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=iN(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},oN=(t,e)=>{const n=mi.createTransformer(e),r=nh(t),i=nh(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ri(sN(r.values,i.values),n):rN(t,e)},gl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},S1=(t,e)=>n=>Ae(t,e,n);function oU(t){return typeof t=="number"?S1:typeof t=="string"?kt.test(t)?XI:oN:Array.isArray(t)?sN:typeof t=="object"?sU:S1}function aU(t,e,n){const r=[],i=n||oU(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Fe:e;a=ri(c,a)}r.push(a)}return r}function aN(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(By(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=aU(e,r,i),a=o.length,c=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=gl(t[h],t[h+1],u);return o[h](f)};return n?u=>c(pi(t[0],t[s-1],u)):c}function lU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=gl(0,e,r);t.push(Ae(n,1,i))}}function cU(t){const e=[0];return lU(e,t.length-1),e}function uU(t,e){return t.map(n=>n*e)}function hU(t,e){return t.map(()=>e||HI).splice(0,t.length-1)}function rh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=G6(r)?r.map(w1):w1(r),s={done:!1,value:e[0]},o=uU(n&&n.length===e.length?n:cU(e),t),a=aN(o,e,{ease:Array.isArray(i)?i:hU(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}function lN(t,e){return e?t*(1e3/e):0}const dU=5;function cN(t,e,n){const r=Math.max(e-dU,0);return lN(n-t(r),e-r)}const Df=.001,fU=.01,pU=10,mU=.05,gU=1;function yU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=pi(mU,gU,o),t=pi(fU,pU,fr(t)),o<1?(i=u=>{const h=u*o,f=h*t,m=h-n,y=bm(u,o),b=Math.exp(-f);return Df-m/y*b},s=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-h),b=bm(Math.pow(u,2),o);return(-i(u)+Df>0?-1:1)*((f-m)*y)/b}):(i=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-Df+h*f},s=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const a=5/t,c=bU(i,s,a);if(t=Yi(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const vU=12;function bU(t,e,n){let r=n;for(let i=1;i<vU;i++)r=r-t(r)/e(r);return r}function bm(t,e){return t*Math.sqrt(1-e*e)}const wU=["duration","bounce"],xU=["stiffness","damping","mass"];function E1(t,e){return e.some(n=>t[n]!==void 0)}function SU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!E1(t,xU)&&E1(t,wU)){const n=yU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function uN({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=SU({...r,velocity:-fr(r.velocity||0)}),y=f||0,b=c/(2*Math.sqrt(a*u)),N=s-i,R=fr(Math.sqrt(a/u)),S=Math.abs(N)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let v;if(b<1){const E=bm(R,b);v=P=>{const L=Math.exp(-b*R*P);return s-L*((y+b*R*N)/E*Math.sin(E*P)+N*Math.cos(E*P))}}else if(b===1)v=E=>s-Math.exp(-R*E)*(N+(y+R*N)*E);else{const E=R*Math.sqrt(b*b-1);v=P=>{const L=Math.exp(-b*R*P),U=Math.min(E*P,300);return s-L*((y+b*R*N)*Math.sinh(U)+E*N*Math.cosh(U))/E}}return{calculatedDuration:m&&h||null,next:E=>{const P=v(E);if(m)o.done=E>=h;else{let L=y;E!==0&&(b<1?L=cN(v,E,P):L=0);const U=Math.abs(L)<=n,k=Math.abs(s-P)<=e;o.done=U&&k}return o.value=o.done?s:P,o}}}function T1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=w=>a!==void 0&&w<a||c!==void 0&&w>c,b=w=>a===void 0?c:c===void 0||Math.abs(a-w)<Math.abs(c-w)?a:c;let N=n*e;const R=f+N,S=o===void 0?R:o(R);S!==R&&(N=S-f);const v=w=>-N*Math.exp(-w/r),E=w=>S+v(w),P=w=>{const T=v(w),I=E(w);m.done=Math.abs(T)<=u,m.value=m.done?S:I};let L,U;const k=w=>{y(m.value)&&(L=w,U=uN({keyframes:[m.value,b(m.value)],velocity:cN(E,w,m.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return k(0),{calculatedDuration:null,next:w=>{let T=!1;return!U&&L===void 0&&(T=!0,P(w),k(w)),L!==void 0&&w>L?U.next(w-L):(!T&&P(w),m)}}}const EU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ce.update(e,!0),stop:()=>Sr(e),now:()=>mt.isProcessing?mt.timestamp:performance.now()}},k1=2e4;function C1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<k1;)e+=n,r=t.next(e);return e>=k1?1/0:e}const TU={decay:T1,inertia:T1,tween:rh,keyframes:rh,spring:uN};function ih({autoplay:t=!0,delay:e=0,driver:n=EU,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:f,...m}){let y=1,b=!1,N,R;const S=()=>{R=new Promise(Q=>{N=Q})};S();let v;const E=TU[i]||rh;let P;E!==rh&&typeof r[0]!="number"&&(P=aN([0,100],r,{clamp:!1}),r=[0,100]);const L=E({...m,keyframes:r});let U;a==="mirror"&&(U=E({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let k="idle",w=null,T=null,I=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=C1(L));const{calculatedDuration:_}=L;let A=1/0,C=1/0;_!==null&&(A=_+o,C=A*(s+1)-o);let ce=0;const pe=Q=>{if(T===null)return;y>0&&(T=Math.min(T,Q)),y<0&&(T=Math.min(Q-C/y,T)),w!==null?ce=w:ce=Math.round(Q-T)*y;const re=ce-e*(y>=0?1:-1),Ie=y>=0?re<0:re>C;ce=Math.max(re,0),k==="finished"&&w===null&&(ce=C);let Zt=ce,en=L;if(s){const Ro=Math.min(ce,C)/A;let Yn=Math.floor(Ro),tn=Ro%1;!tn&&Ro>=1&&(tn=1),tn===1&&Yn--,Yn=Math.min(Yn,s+1),Yn%2&&(a==="reverse"?(tn=1-tn,o&&(tn-=o/A)):a==="mirror"&&(en=U)),Zt=pi(0,1,tn)*A}const xt=Ie?{done:!1,value:r[0]}:en.next(Zt);P&&(xt.value=P(xt.value));let{done:Bt}=xt;!Ie&&_!==null&&(Bt=y>=0?ce>=C:ce<=0);const ld=w===null&&(k==="finished"||k==="running"&&Bt);return f&&f(xt.value),ld&&$(),xt},Ge=()=>{v&&v.stop(),v=void 0},We=()=>{k="idle",Ge(),N(),S(),T=I=null},$=()=>{k="finished",h&&h(),Ge(),N()},K=()=>{if(b)return;v||(v=n(pe));const Q=v.now();c&&c(),w!==null?T=Q-w:(!T||k==="finished")&&(T=Q),k==="finished"&&S(),I=T,w=null,k="running",v.start()};t&&K();const Z={then(Q,re){return R.then(Q,re)},get time(){return fr(ce)},set time(Q){Q=Yi(Q),ce=Q,w!==null||!v||y===0?w=Q:T=v.now()-Q/y},get duration(){const Q=L.calculatedDuration===null?C1(L):L.calculatedDuration;return fr(Q)},get speed(){return y},set speed(Q){Q===y||!v||(y=Q,Z.time=fr(ce))},get state(){return k},play:K,pause:()=>{k="paused",w=ce},stop:()=>{b=!0,k!=="idle"&&(k="idle",u&&u(),We())},cancel:()=>{I!==null&&pe(I),We()},complete:()=>{k="finished"},sample:Q=>(T=0,pe(Q))};return Z}function kU(t){let e;return()=>(e===void 0&&(e=t()),e)}const CU=kU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_c=10,NU=2e4,_U=(t,e)=>e.type==="spring"||t==="backgroundColor"||!zI(e.ease);function AU(t,e,{onUpdate:n,onComplete:r,...i}){if(!(CU()&&IU.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,o,a,c=!1;const u=()=>{a=new Promise(S=>{o=S})};u();let{keyframes:h,duration:f=300,ease:m,times:y}=i;if(_U(e,i)){const S=ih({...i,repeat:0,delay:0});let v={done:!1,value:h[0]};const E=[];let P=0;for(;!v.done&&P<NU;)v=S.sample(P),E.push(v.value),P+=_c;y=void 0,h=E,f=P-_c,m="linear"}const b=U6(t.owner.current,e,h,{...i,duration:f,ease:m,times:y}),N=()=>{c=!1,b.cancel()},R=()=>{c=!0,Ce.update(N),o(),u()};return b.onfinish=()=>{c||(t.set(V6(h,i)),r&&r(),R())},{then(S,v){return a.then(S,v)},attachTimeline(S){return b.timeline=S,b.onfinish=null,Fe},get time(){return fr(b.currentTime||0)},set time(S){b.currentTime=Yi(S)},get speed(){return b.playbackRate},set speed(S){b.playbackRate=S},get duration(){return fr(f)},play:()=>{s||(b.play(),Sr(N))},pause:()=>b.pause(),stop:()=>{if(s=!0,b.playState==="idle")return;const{currentTime:S}=b;if(S){const v=ih({...i,autoplay:!1});t.setWithVelocity(v.sample(S-_c).value,v.sample(S).value,_c)}R()},complete:()=>{c||b.finish()},cancel:R}}function PU({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Fe,pause:Fe,stop:Fe,then:s=>(s(),Promise.resolve()),cancel:Fe,complete:Fe});return e?ih({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const RU={type:"spring",stiffness:500,damping:25,restSpeed:10},DU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OU={type:"keyframes",duration:.8},MU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LU=(t,{keyframes:e})=>e.length>2?OU:ms.has(t)?t.startsWith("scale")?DU(e[1]):RU:MU,wm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url(")),jU=new Set(["brightness","contrast","saturate","opacity"]);function FU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sd)||[];if(!r)return t;const i=n.replace(r,"");let s=jU.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const UU=/([a-z-]*)\(.*?\)/g,xm={...mi,getAnimatableNone:t=>{const e=t.match(UU);return e?e.map(FU).join(" "):t}},VU={...kI,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:xm,WebkitFilter:xm},Gy=t=>VU[t];function hN(t,e){let n=Gy(t);return n!==xm&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dN=t=>/^0[^.\s]+$/.test(t);function zU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||dN(t)}function BU(t,e,n,r){const i=wm(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const c=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),zU(s[u])&&c.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];s[h]=hN(e,a)}return s}function $U({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Wy(t,e){return t[e]||t.default||t}const qU={skipAnimations:!1},Ky=(t,e,n,r={})=>i=>{const s=Wy(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Yi(o);const c=BU(e,t,n,s),u=c[0],h=c[c.length-1],f=wm(t,u),m=wm(t,h);let y={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:b=>{e.set(b),s.onUpdate&&s.onUpdate(b)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if($U(s)||(y={...y,...LU(t,y)}),y.duration&&(y.duration=Yi(y.duration)),y.repeatDelay&&(y.repeatDelay=Yi(y.repeatDelay)),!f||!m||F6.current||s.type===!1||qU.skipAnimations)return PU(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=AU(e,t,y);if(b)return b}return ih(y)};function sh(t){return!!(zt(t)&&t.add)}const fN=t=>/^\-?\d*\.?\d+$/.test(t);function Qy(t,e){t.indexOf(e)===-1&&t.push(e)}function Yy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Xy{constructor(){this.subscriptions=[]}add(e){return Qy(this.subscriptions,e),()=>Yy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const HU=t=>!isNaN(parseFloat(t));class GU{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=mt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=HU(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Xy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?lN(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yo(t,e){return new GU(t,e)}const pN=t=>e=>e.test(t),WU={test:t=>t==="auto",parse:t=>t},mN=[gs,Y,Hn,Dr,ZF,JF,WU],la=t=>mN.find(pN(t)),KU=[...mN,kt,mi],QU=t=>KU.find(pN(t));function YU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yo(n))}function XU(t,e){const n=ad(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=p6(s[o]);YU(t,o,a)}}function JU(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const c=s[a],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=n[c])!==null&&r!==void 0?r:t.readValue(c))!==null&&i!==void 0?i:e[c]),h!=null&&(typeof h=="string"&&(fN(h)||dN(h))?h=parseFloat(h):!QU(h)&&mi.test(u)&&(h=hN(c,u)),t.addValue(c,yo(h,{owner:t})),n[c]===void 0&&(n[c]=h),h!==null&&t.setBaseTarget(c,h))}}function ZU(t,e){return e?(e[t]||e.default||e).from:void 0}function eV(t,e,n){const r={};for(const i in t){const s=ZU(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function tV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nV(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function gN(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(s=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const m=t.getValue(f),y=a[f];if(!m||y===void 0||h&&tV(h,f))continue;const b={delay:n,elapsed:0,...Wy(s||{},f)};if(window.HandoffAppearAnimations){const S=t.getProps()[yI];if(S){const v=window.HandoffAppearAnimations(S,f,m,Ce);v!==null&&(b.elapsed=v,b.isHandoff=!0)}}let N=!b.isHandoff&&!nV(m,y);if(b.type==="spring"&&(m.getVelocity()||b.velocity)&&(N=!1),m.animation&&(N=!1),N)continue;m.start(Ky(f,m,y,t.shouldReduceMotion&&ms.has(f)?{type:!1}:b));const R=m.animation;sh(c)&&(c.add(f),R.then(()=>c.remove(f))),u.push(R)}return o&&Promise.all(u).then(()=>{o&&XU(t,o)}),u}function Sm(t,e,n={}){const r=ad(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(gN(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=i;return rV(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function rV(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(iV).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Sm(u,e,{...s,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function iV(t,e){return t.sortNodePosition(e)}function sV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Sm(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Sm(t,e,n);else{const i=typeof e=="function"?ad(t,e,n.custom):e;r=Promise.all(gN(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const oV=[...Dy].reverse(),aV=Dy.length;function lV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sV(t,n,r)))}function cV(t){let e=lV(t);const n=hV();let r=!0;const i=(c,u)=>{const h=ad(t,u);if(h){const{transition:f,transitionEnd:m,...y}=h;c={...c,...y,...m}}return c};function s(c){e=c(t)}function o(c,u){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],y=new Set;let b={},N=1/0;for(let S=0;S<aV;S++){const v=oV[S],E=n[v],P=h[v]!==void 0?h[v]:f[v],L=pl(P),U=v===u?E.isActive:null;U===!1&&(N=S);let k=P===f[v]&&P!==h[v]&&L;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),E.protectedKeys={...b},!E.isActive&&U===null||!P&&!E.prevProp||rd(P)||typeof P=="boolean")continue;let w=uV(E.prevProp,P)||v===u&&E.isActive&&!k&&L||S>N&&L,T=!1;const I=Array.isArray(P)?P:[P];let _=I.reduce(i,{});U===!1&&(_={});const{prevResolvedValues:A={}}=E,C={...A,..._},ce=pe=>{w=!0,y.has(pe)&&(T=!0,y.delete(pe)),E.needsAnimating[pe]=!0};for(const pe in C){const Ge=_[pe],We=A[pe];if(b.hasOwnProperty(pe))continue;let $=!1;th(Ge)&&th(We)?$=!UI(Ge,We):$=Ge!==We,$?Ge!==void 0?ce(pe):y.add(pe):Ge!==void 0&&y.has(pe)?ce(pe):E.protectedKeys[pe]=!0}E.prevProp=P,E.prevResolvedValues=_,E.isActive&&(b={...b,..._}),r&&t.blockInitialAnimation&&(w=!1),w&&(!k||T)&&m.push(...I.map(pe=>({animation:pe,options:{type:v,...c}})))}if(y.size){const S={};y.forEach(v=>{const E=t.getBaseTarget(v);E!==void 0&&(S[v]=E)}),m.push({animation:S})}let R=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(m):Promise.resolve()}function a(c,u,h){var f;if(n[c].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(y=>{var b;return(b=y.animationState)===null||b===void 0?void 0:b.setActive(c,u)}),n[c].isActive=u;const m=o(h,c);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function uV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UI(e,t):!1}function Ai(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hV(){return{animate:Ai(!0),whileInView:Ai(),whileHover:Ai(),whileTap:Ai(),whileDrag:Ai(),whileFocus:Ai(),exit:Ai()}}class dV extends Si{constructor(e){super(e),e.animationState||(e.animationState=cV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),rd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let fV=0;class pV extends Si{constructor(){super(...arguments),this.id=fV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const mV={animation:{Feature:dV},exit:{Feature:pV}},I1=(t,e)=>Math.abs(t-e);function gV(t,e){const n=I1(t.x,e.x),r=I1(t.y,e.y);return Math.sqrt(n**2+r**2)}class yN{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Mf(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=gV(f.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:b}=f,{timestamp:N}=mt;this.history.push({...b,timestamp:N});const{onStart:R,onMove:S}=this.handlers;m||(R&&R(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Of(m,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Mf(f.type==="pointercancel"?this.lastMoveEventInfo:Of(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,R),b&&b(f,R)},!OI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=od(e),a=Of(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=mt;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Mf(a,this.history)),this.removeListeners=ri(dr(this.contextWindow,"pointermove",this.handlePointerMove),dr(this.contextWindow,"pointerup",this.handlePointerUp),dr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sr(this.updatePoint)}}function Of(t,e){return e?{point:e(t.point)}:t}function N1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Mf({point:t},e){return{point:t,delta:N1(t,vN(e)),offset:N1(t,yV(e)),velocity:vV(e,.1)}}function yV(t){return t[0]}function vN(t){return t[t.length-1]}function vV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vN(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Yi(e)));)n--;if(!r)return{x:0,y:0};const s=fr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Yt(t){return t.max-t.min}function Em(t,e=0,n=.01){return Math.abs(t-e)<=n}function _1(t,e,n,r=.5){t.origin=r,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),(Em(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ae(n.min,n.max,t.origin)-t.originPoint,(Em(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Va(t,e,n,r){_1(t.x,e.x,n.x,r?r.originX:void 0),_1(t.y,e.y,n.y,r?r.originY:void 0)}function A1(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function bV(t,e,n){A1(t.x,e.x,n.x),A1(t.y,e.y,n.y)}function P1(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function za(t,e,n){P1(t.x,e.x,n.x),P1(t.y,e.y,n.y)}function wV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ae(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ae(n,t,r.max):Math.min(t,n)),t}function R1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xV(t,{top:e,left:n,bottom:r,right:i}){return{x:R1(t.x,n,i),y:R1(t.y,e,r)}}function D1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function SV(t,e){return{x:D1(t.x,e.x),y:D1(t.y,e.y)}}function EV(t,e){let n=.5;const r=Yt(t),i=Yt(e);return i>r?n=gl(e.min,e.max-r,t.min):r>i&&(n=gl(t.min,t.max-i,e.min)),pi(0,1,n)}function TV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Tm=.35;function kV(t=Tm){return t===!1?t=0:t===!0&&(t=Tm),{x:O1(t,"left","right"),y:O1(t,"top","bottom")}}function O1(t,e,n){return{min:M1(t,e),max:M1(t,n)}}function M1(t,e){return typeof t=="number"?t:t[e]||0}const L1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bs=()=>({x:L1(),y:L1()}),j1=()=>({min:0,max:0}),Be=()=>({x:j1(),y:j1()});function rn(t){return[t("x"),t("y")]}function bN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function CV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function IV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Lf(t){return t===void 0||t===1}function km({scale:t,scaleX:e,scaleY:n}){return!Lf(t)||!Lf(e)||!Lf(n)}function Oi(t){return km(t)||wN(t)||t.z||t.rotate||t.rotateX||t.rotateY}function wN(t){return F1(t.x)||F1(t.y)}function F1(t){return t&&t!=="0%"}function oh(t,e,n){const r=t-n,i=e*r;return n+i}function U1(t,e,n,r,i){return i!==void 0&&(t=oh(t,i,r)),oh(t,n,r)+e}function Cm(t,e=0,n=1,r,i){t.min=U1(t.min,e,n,r,i),t.max=U1(t.max,e,n,r,i)}function xN(t,{x:e,y:n}){Cm(t.x,e.translate,e.scale,e.originPoint),Cm(t.y,n.translate,n.scale,n.originPoint)}function NV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&$s(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xN(t,o)),r&&Oi(s.latestValues)&&$s(t,s.latestValues))}e.x=V1(e.x),e.y=V1(e.y)}function V1(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Lr(t,e){t.min=t.min+e,t.max=t.max+e}function z1(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Ae(t.min,t.max,s);Cm(t,e[n],e[r],o,e.scale)}const _V=["x","scaleX","originX"],AV=["y","scaleY","originY"];function $s(t,e){z1(t.x,e,_V),z1(t.y,e,AV)}function SN(t,e){return bN(IV(t.getBoundingClientRect(),e))}function PV(t,e,n){const r=SN(t,n),{scroll:i}=e;return i&&(Lr(r.x,i.offset.x),Lr(r.y,i.offset.y)),r}const EN=({current:t})=>t?t.ownerDocument.defaultView:null,RV=new WeakMap;class DV{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Be(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(od(h,"page").point)},s=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:b}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=LI(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rn(R=>{let S=this.getAxisMotionValue(R).get()||0;if(Hn.test(S)){const{projection:v}=this.visualElement;if(v&&v.layout){const E=v.layout.layoutBox[R];E&&(S=Yt(E)*(parseFloat(S)/100))}}this.originPoint[R]=S}),b&&Ce.update(()=>b(h,f),!1,!0);const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:b,onDrag:N}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:R}=f;if(y&&this.currentDirection===null){this.currentDirection=OV(R),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,R),this.updateAxis("y",f.point,R),this.visualElement.render(),N&&N(h,f)},a=(h,f)=>this.stop(h,f),c=()=>rn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new yN(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:EN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ce.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ac(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=wV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Vs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=xV(i.layoutBox,n):this.constraints=!1,this.elastic=kV(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=TV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Vs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=PV(r,i.root,this.visualElement.getTransformPagePoint());let o=SV(i.layout.layoutBox,s);if(n){const a=n(CV(o));this.hasMutatedConstraints=!!a,a&&(o=bN(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=rn(h=>{if(!Ac(h,n,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,b={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Ky(e,r,0,n))}stopAnimation(){rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps();return r[n]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){rn(n=>{const{drag:r}=this.getProps();if(!Ac(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};rn(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();i[o]=EV({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),rn(o=>{if(!Ac(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Ae(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;RV.set(this.visualElement,this);const e=this.visualElement.current,n=dr(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Vs(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=lr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(rn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Tm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ac(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function OV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class MV extends Si{constructor(e){super(e),this.removeGroupControls=Fe,this.removeListeners=Fe,this.controls=new DV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fe}unmount(){this.removeGroupControls(),this.removeListeners()}}const B1=t=>(e,n)=>{t&&Ce.update(()=>t(e,n))};class LV extends Si{constructor(){super(...arguments),this.removePointerDownListener=Fe}onPointerDown(e){this.session=new yN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:B1(e),onStart:B1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ce.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=dr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jV(){const t=z.useContext(Py);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=z.useId();return z.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const su={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ca={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=$1(t,e.target.x),r=$1(t,e.target.y);return`${n}% ${r}%`}},FV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=mi.parse(t);if(i.length>5)return r;const s=mi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const u=Ae(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class UV extends ch.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;HF(VV),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),su.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TN(t){const[e,n]=jV(),r=z.useContext(bI);return ch.createElement(UV,{...t,layoutGroup:r,switchLayoutGroup:z.useContext(wI),isPresent:e,safeToRemove:n})}const VV={borderRadius:{...ca,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ca,borderTopRightRadius:ca,borderBottomLeftRadius:ca,borderBottomRightRadius:ca,boxShadow:FV},kN=["TopLeft","TopRight","BottomLeft","BottomRight"],zV=kN.length,q1=t=>typeof t=="string"?parseFloat(t):t,H1=t=>typeof t=="number"||Y.test(t);function BV(t,e,n,r,i,s){i?(t.opacity=Ae(0,n.opacity!==void 0?n.opacity:1,$V(r)),t.opacityExit=Ae(e.opacity!==void 0?e.opacity:1,0,qV(r))):s&&(t.opacity=Ae(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<zV;o++){const a=`border${kN[o]}Radius`;let c=G1(e,a),u=G1(n,a);c===void 0&&u===void 0||(c||(c=0),u||(u=0),c===0||u===0||H1(c)===H1(u)?(t[a]=Math.max(Ae(q1(c),q1(u),r),0),(Hn.test(u)||Hn.test(c))&&(t[a]+="%")):t[a]=u)}(e.rotate||n.rotate)&&(t.rotate=Ae(e.rotate||0,n.rotate||0,r))}function G1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $V=CN(0,.5,KI),qV=CN(.5,.95,Fe);function CN(t,e,n){return r=>r<t?0:r>e?1:n(gl(t,e,r))}function W1(t,e){t.min=e.min,t.max=e.max}function nn(t,e){W1(t.x,e.x),W1(t.y,e.y)}function K1(t,e,n,r,i){return t-=e,t=oh(t,1/n,r),i!==void 0&&(t=oh(t,1/i,r)),t}function HV(t,e=0,n=1,r=.5,i,s=t,o=t){if(Hn.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ae(s.min,s.max,r);t===s&&(a-=e),t.min=K1(t.min,e,n,a,i),t.max=K1(t.max,e,n,a,i)}function Q1(t,e,[n,r,i],s,o){HV(t,e[n],e[r],e[i],e.scale,s,o)}const GV=["x","scaleX","originX"],WV=["y","scaleY","originY"];function Y1(t,e,n,r){Q1(t.x,e,GV,n?n.x:void 0,r?r.x:void 0),Q1(t.y,e,WV,n?n.y:void 0,r?r.y:void 0)}function X1(t){return t.translate===0&&t.scale===1}function IN(t){return X1(t.x)&&X1(t.y)}function KV(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function NN(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function J1(t){return Yt(t.x)/Yt(t.y)}class QV{constructor(){this.members=[]}add(e){Qy(this.members,e),e.scheduleRender()}remove(e){if(Yy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Z1(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const YV=(t,e)=>t.depth-e.depth;class XV{constructor(){this.children=[],this.isDirty=!1}add(e){Qy(this.children,e),this.isDirty=!0}remove(e){Yy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YV),this.isDirty=!1,this.children.forEach(e)}}function JV(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Sr(r),t(s-e))};return Ce.read(r,!0),()=>Sr(r)}function ZV(t){window.MotionDebug&&window.MotionDebug.record(t)}function e9(t){return t instanceof SVGElement&&t.tagName!=="svg"}function t9(t,e,n){const r=zt(t)?t:yo(t);return r.start(Ky("",r,e,n)),r.animation}const ex=["","X","Y","Z"],n9={visibility:"hidden"},tx=1e3;let r9=0;const Mi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _N({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=r9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mi.totalNodes=Mi.resolvedTargetDeltas=Mi.recalculatedProjection=0,this.nodes.forEach(o9),this.nodes.forEach(h9),this.nodes.forEach(d9),this.nodes.forEach(a9),ZV(Mi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new XV)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Xy),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const a=this.eventHandlers.get(s);a&&a.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=e9(s),this.instance=s;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||a)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=JV(f,250),su.hasAnimatedSinceResize&&(su.hasAnimatedSinceResize=!1,this.nodes.forEach(rx))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||y9,{onLayoutAnimationStart:N,onLayoutAnimationComplete:R}=u.getProps(),S=!this.targetLayout||!NN(this.targetLayout,y)||m,v=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const E={...Wy(b,"layout"),onPlay:N,onComplete:R};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||rx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Sr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(f9),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nx);return}this.isUpdating||this.nodes.forEach(c9),this.isUpdating=!1,this.nodes.forEach(u9),this.nodes.forEach(i9),this.nodes.forEach(s9),this.clearAllSnapshots();const s=performance.now();mt.delta=pi(0,1e3/60,s-mt.timestamp),mt.timestamp=s,mt.isProcessing=!0,Cf.update.process(mt),Cf.preRender.process(mt),Cf.render.process(mt),mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(l9),this.sharedNodes.forEach(p9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!IN(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&(o||Oi(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return s&&(a=this.removeTransform(a)),v9(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Be();const o=s.measureViewportBox(),{scroll:a}=this.root;return a&&(Lr(o.x,a.offset.x),Lr(o.y,a.offset.y)),o}removeElementScroll(s){const o=Be();nn(o,s);for(let a=0;a<this.path.length;a++){const c=this.path[a],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){nn(o,s);const{scroll:f}=this.root;f&&(Lr(o.x,-f.offset.x),Lr(o.y,-f.offset.y))}Lr(o.x,u.offset.x),Lr(o.y,u.offset.y)}}return o}applyTransform(s,o=!1){const a=Be();nn(a,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&$s(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Oi(u.latestValues)&&$s(a,u.latestValues)}return Oi(this.latestValues)&&$s(a,this.latestValues),a}removeTransform(s){const o=Be();nn(o,s);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!Oi(c.latestValues))continue;km(c.latestValues)&&c.updateSnapshot();const u=Be(),h=c.measurePageBox();nn(u,h),Y1(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Oi(this.latestValues)&&Y1(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=mt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),za(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Be(),this.targetWithTransforms=Be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nn(this.target,this.layout.layoutBox),xN(this.target,this.targetDelta)):nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),za(this.relativeTargetOrigin,this.target,f.target),nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||km(this.parent.latestValues)||wN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===mt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;nn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;NV(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:y}=o;if(!y){this.projectionTransform&&(this.projectionDelta=Bs(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Bs(),this.projectionDeltaWithTransform=Bs());const b=this.projectionTransform;Va(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=Z1(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Mi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,o=!1){const a=this.snapshot,c=a?a.latestValues:{},u={...this.latestValues},h=Bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Be(),m=a?a.source:void 0,y=this.layout?this.layout.source:void 0,b=m!==y,N=this.getStack(),R=!N||N.members.length<=1,S=!!(b&&!R&&this.options.crossfade===!0&&!this.path.some(g9));this.animationProgress=0;let v;this.mixTargetDelta=E=>{const P=E/1e3;ix(h.x,s.x,P),ix(h.y,s.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(za(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m9(this.relativeTarget,this.relativeTargetOrigin,f,P),v&&KV(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Be()),nn(v,this.relativeTarget)),b&&(this.animationValues=u,BV(u,c,this.latestValues,P,S,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{su.hasAnimatedSinceResize=!0,this.currentAnimation=t9(0,tx,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:a,layout:c,latestValues:u}=s;if(!(!o||!a||!c)){if(this!==s&&this.layout&&c&&AN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||Be();const h=Yt(this.layout.layoutBox.x);a.x.min=s.target.x.min,a.x.max=a.x.min+h;const f=Yt(this.layout.layoutBox.y);a.y.min=s.target.y.min,a.y.max=a.y.min+f}nn(o,a),$s(o,u),Va(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new QV),this.sharedNodes.get(s).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:a}=s;if((a.rotate||a.rotateX||a.rotateY||a.rotateZ)&&(o=!0),!o)return;const c={};for(let u=0;u<ex.length;u++){const h="rotate"+ex[u];a[h]&&(c[h]=a[h],s.setStaticValue(h,0))}s.render();for(const u in c)s.setStaticValue(u,c[u]);s.scheduleRender()}getProjectionStyles(s){var o,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return n9;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=iu(s==null?void 0:s.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=iu(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Oi(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Z1(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(a=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Zu){if(f[b]===void 0)continue;const{correct:N,applyTo:R}=Zu[b],S=c.transform==="none"?f[b]:N(f[b],h);if(R){const v=R.length;for(let E=0;E<v;E++)c[R[E]]=S}else c[b]=S}return this.options.layoutId&&(c.pointerEvents=h===this?iu(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(nx),this.root.sharedNodes.clear()}}}function i9(t){t.updateLayout()}function s9(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?rn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Yt(m);m.min=r[f].min,m.max=m.min+y}):AN(s,n.layoutBox,r)&&rn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Yt(r[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const a=Bs();Va(a,r,n.layoutBox);const c=Bs();o?Va(c,t.applyTransform(i,!0),n.measuredBox):Va(c,r,n.layoutBox);const u=!IN(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const b=Be();za(b,n.layoutBox,m.layoutBox);const N=Be();za(N,r,y.layoutBox),NN(b,N)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function o9(t){Mi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function a9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function l9(t){t.clearSnapshot()}function nx(t){t.clearMeasurements()}function c9(t){t.isLayoutDirty=!1}function u9(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function h9(t){t.resolveTargetDelta()}function d9(t){t.calcProjection()}function f9(t){t.resetRotation()}function p9(t){t.removeLeadSnapshot()}function ix(t,e,n){t.translate=Ae(e.translate,0,n),t.scale=Ae(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sx(t,e,n,r){t.min=Ae(e.min,n.min,r),t.max=Ae(e.max,n.max,r)}function m9(t,e,n,r){sx(t.x,e.x,n.x,r),sx(t.y,e.y,n.y,r)}function g9(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const y9={duration:.45,ease:[.4,0,.1,1]},ox=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),ax=ox("applewebkit/")&&!ox("chrome/")?Math.round:Fe;function lx(t){t.min=ax(t.min),t.max=ax(t.max)}function v9(t){lx(t.x),lx(t.y)}function AN(t,e,n){return t==="position"||t==="preserve-aspect"&&!Em(J1(e),J1(n),.2)}const b9=_N({attachResizeListener:(t,e)=>lr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jf={current:void 0},PN=_N({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!jf.current){const t=new b9({});t.mount(window),t.setOptions({layoutScroll:!0}),jf.current=t}return jf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),w9={pan:{Feature:LV},drag:{Feature:MV,ProjectionNode:PN,MeasureLayout:TN}},x9=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function S9(t){const e=x9.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Im(t,e,n=1){const[r,i]=S9(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return fN(o)?parseFloat(o):o}else return gm(i)?Im(i,e,n+1):i}function E9(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!gm(s))return;const o=Im(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!gm(s))continue;const o=Im(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const T9=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),RN=t=>T9.has(t),k9=t=>Object.keys(t).some(RN),cx=t=>t===gs||t===Y,ux=(t,e)=>parseFloat(t.split(", ")[e]),hx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return ux(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?ux(s[1],t):0}},C9=new Set(["x","y","z"]),I9=Ll.filter(t=>!C9.has(t));function N9(t){const e=[];return I9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const vo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:hx(4,13),y:hx(5,14)};vo.translateX=vo.x;vo.translateY=vo.y;const _9=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=vo[u](r,s)}),e.render();const c=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=vo[u](c,s)}),t},A9=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(RN);let s=[],o=!1;const a=[];if(i.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let h=n[c],f=la(h);const m=e[c];let y;if(th(m)){const b=m.length,N=m[0]===null?1:0;h=m[N],f=la(h);for(let R=N;R<b&&m[R]!==null;R++)y?By(la(m[R])===y):y=la(m[R])}else y=la(m);if(f!==y)if(cx(f)&&cx(y)){const b=u.get();typeof b=="string"&&u.set(parseFloat(b)),typeof m=="string"?e[c]=parseFloat(m):Array.isArray(m)&&y===Y&&(e[c]=m.map(parseFloat))}else f!=null&&f.transform&&y!=null&&y.transform&&(h===0||m===0)?h===0?u.set(y.transform(h)):e[c]=f.transform(m):(o||(s=N9(t),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=_9(e,t,a);return s.length&&s.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),nd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function P9(t,e,n,r){return k9(e)?A9(t,e,n,r):{target:e,transitionEnd:r}}const R9=(t,e,n,r)=>{const i=E9(t,e,r);return e=i.target,r=i.transitionEnd,P9(t,e,n,r)},Nm={current:null},DN={current:!1};function D9(){if(DN.current=!0,!!nd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Nm.current=t.matches;t.addListener(e),e()}else Nm.current=!1}function O9(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(zt(s))t.addValue(i,s),sh(r)&&r.add(i);else if(zt(o))t.addValue(i,yo(s,{owner:t})),sh(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,yo(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const dx=new WeakMap,ON=Object.keys(ml),M9=ON.length,fx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],L9=Oy.length;class j9{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ce.render(this.render,!1,!0);const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=id(n),this.isVariantNode=vI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&zt(m)&&(m.set(a[f],!1),sh(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,dx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DN.current||D9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Nm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dx.delete(this.current),this.projection&&this.projection.unmount(),Sr(this.notifyUpdate),Sr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ms.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ce.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let c=0;c<M9;c++){const u=ON[c],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:y}=ml[u];m&&(o=m),h(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||f&&Vs(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Be()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fx.length;r++){const i=fx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=O9(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<L9;r++){const i=Oy[r],s=this.props[i];(pl(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yo(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=zy(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!zt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Xy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class MN extends j9{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=eV(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){JU(this,r,o);const a=R9(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function F9(t){return window.getComputedStyle(t)}class U9 extends MN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ms.has(n)){const r=Gy(n);return r&&r.default||0}else{const r=F9(e),i=(EI(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return SN(e,n)}build(e,n,r,i){Ly(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Vy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){_I(e,n,r,i)}}class V9 extends MN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ms.has(n)){const r=Gy(n);return r&&r.default||0}return n=AI.has(n)?n:Ry(n),e.getAttribute(n)}measureInstanceViewportBox(){return Be()}scrapeMotionValuesFromProps(e,n){return RI(e,n)}build(e,n,r,i){Fy(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){PI(e,n,r,i)}mount(e){this.isSVGTag=Uy(e.tagName),super.mount(e)}}const z9=(t,e)=>My(t)?new V9(e,{enableHardwareAcceleration:!1}):new U9(e,{enableHardwareAcceleration:!0}),B9={layout:{ProjectionNode:PN,MeasureLayout:TN}},$9={...mV,...M6,...w9,...B9},ee=$F((t,e)=>S6(t,e,$9,z9));/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var q9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const H9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(t,e)=>{const n=z.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:c,...u},h)=>z.createElement("svg",{ref:h,...q9,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${H9(t)}`,a].join(" "),...u},[...e.map(([f,m])=>z.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ff=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const px=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const G9=ye("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Je=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const W9=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const K9=ye("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mx=ye("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q9=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const gx=ye("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Y9=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const X9=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J9=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Z9=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yx=ye("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ez=ye("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tz=ye("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vx=ye("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nz=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bx=ye("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rz=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const iz=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sz=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const wx=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oz=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Uf=ye("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vf=ye("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const az=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lz=ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function cz({onGetStarted:t,onTryMastering:e}){const n={hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.3,staggerChildren:.2}}},r={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},i=[{icon:g.jsx(G9,{className:"w-6 h-6"}),title:"African Music Expertise",description:"Built specifically for African music styles - Afrobeats, Gospel, Hip-Hop, and more. Our algorithms understand the cultural nuances and sonic characteristics that make African music unique.",features:["Genre-specific optimization","Cultural understanding","Local music patterns","Traditional rhythm recognition"]},{icon:g.jsx(lz,{className:"w-6 h-6"}),title:"Lightning Fast Processing",description:"Professional mastering in 5-10 minutes depending on audio size. No more waiting days or weeks for studio availability. Get your tracks ready for release instantly.",features:["5-10 minute processing","Real-time preview","Instant downloads","No waiting queues"]},{icon:g.jsx(rz,{className:"w-6 h-6"}),title:"Industry Standard Quality",description:"Professional loudness levels (-14 LUFS) perfect for Spotify, Apple Music, YouTube, and radio broadcast. Meet all streaming platform requirements.",features:["-14 LUFS compliance","Multi-platform optimization","Broadcast-ready output","Professional standards"]},{icon:g.jsx(oz,{className:"w-6 h-6"}),title:"Community-Driven",description:"Built by African artists, for African artists. Our platform grows with feedback from the community, ensuring we meet real needs of African creators.",features:["Community feedback","Local artist input","Continuous improvement","Cultural relevance"]},{icon:g.jsx(X9,{className:"w-6 h-6"}),title:"Global Reach, Local Heart",description:"While optimized for African music, our platform serves creators worldwide. Export in multiple formats for global distribution.",features:["Global distribution","Multiple formats","International standards","Local optimization"]},{icon:g.jsx(sz,{className:"w-6 h-6"}),title:"Affordable Excellence",description:"Professional studio-quality mastering at a fraction of the cost. No expensive studio bookings or equipment investments required.",features:["Cost-effective","No equipment needed","Professional results","Accessible pricing"]}],s=[{number:"5-10",label:"Minutes Processing",suffix:""},{number:"99",label:"Artist Satisfaction",suffix:"%"},{number:"10",label:"Countries Served",suffix:""},{number:"15",label:"Years Combined Experience",suffix:""}];return g.jsxs("section",{className:"bg-gradient-to-br from-crys-black via-crys-charcoal to-crys-black relative py-20 overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-crys-gold/5 via-transparent to-crys-gold/5"}),g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx("div",{className:"w-full h-full",style:{backgroundImage:`
                linear-gradient(to right, rgba(212, 175, 55, 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(212, 175, 55, 0.1) 1px, transparent 1px)
              `,backgroundSize:"60px 60px"}})}),[...Array(6)].map((o,a)=>g.jsx(ee.div,{className:"absolute w-2 h-2 bg-crys-gold/30 rounded-full",style:{top:`${20+a*15}%`,left:`${10+a*15}%`},animate:{y:[0,-30,0],opacity:[.3,.8,.3]},transition:{duration:4+a,repeat:1/0,ease:"easeInOut"}},`float-${a}`))]}),g.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[g.jsxs(ee.div,{className:"text-center mb-16",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[g.jsx(Li,{variant:"secondary",className:"bg-crys-gold/20 text-crys-gold mb-4",children:"Why Choose Crys Garage"}),g.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-crys-white mb-6",children:["The African Music",g.jsx("span",{className:"block text-transparent bg-gradient-to-r from-crys-gold via-yellow-400 to-crys-gold bg-clip-text",children:"Mastering Revolution"})]}),g.jsx("p",{className:"text-xl text-crys-light-grey max-w-3xl mx-auto leading-relaxed",children:"We're not just another mastering platform. We're the first and only platform built specifically for African music creators, by African music creators."})]}),g.jsx(ee.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:s.map((o,a)=>g.jsx(ee.div,{className:"text-center",whileHover:{scale:1.05},transition:{duration:.3},children:g.jsxs("div",{className:"bg-gradient-to-br from-crys-gold/10 to-crys-gold/5 rounded-xl p-6 border border-crys-gold/20 backdrop-blur-sm",children:[g.jsxs(ee.div,{className:"text-3xl md:text-4xl font-bold text-crys-gold mb-2",initial:{scale:0},whileInView:{scale:1},transition:{duration:.8,delay:.4+a*.1},viewport:{once:!0},children:[o.number,o.suffix]}),g.jsx("div",{className:"text-crys-light-grey text-sm font-medium",children:o.label})]})},a))}),g.jsx(ee.div,{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",variants:n,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:i.map((o,a)=>g.jsx(ee.div,{variants:r,whileHover:{y:-10},transition:{duration:.3},children:g.jsx(qi,{className:"bg-audio-panel-bg/80 border-audio-panel-border hover:border-crys-gold/50 transition-all duration-300 h-full backdrop-blur-sm group",children:g.jsxs(Hi,{className:"p-4",children:[g.jsx(ee.div,{className:"w-10 h-10 bg-gradient-to-br from-crys-gold/20 to-crys-gold/10 rounded-lg flex items-center justify-center text-crys-gold mb-3 group-hover:scale-110 transition-transform duration-300",whileHover:{rotate:360},transition:{duration:.5},children:o.icon}),g.jsx("h3",{className:"text-crys-white font-semibold text-base mb-2 group-hover:text-crys-gold transition-colors duration-300",children:o.title}),g.jsx("p",{className:"text-crys-light-grey mb-3 leading-relaxed text-sm",children:o.description}),g.jsx("ul",{className:"space-y-1",children:o.features.map((c,u)=>g.jsxs("li",{className:"flex items-center gap-2 text-crys-light-grey text-xs",children:[g.jsx(Je,{className:"w-3 h-3 text-crys-gold flex-shrink-0"}),g.jsx("span",{children:c})]},u))})]})})},a))})]})]})}function uz({onGetStarted:t,onTryAnalyzer:e,onTryNormalizer:n}){const r={hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.3,staggerChildren:.2}}},i={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return g.jsxs("div",{className:"min-h-screen",children:[g.jsxs("section",{className:"relative overflow-hidden min-h-screen flex items-center bg-gradient-to-br from-crys-black via-crys-graphite to-crys-black",style:{marginTop:"-80px",paddingTop:"80px"},children:[g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-crys-black via-crys-charcoal to-crys-black"}),g.jsxs("div",{className:"absolute inset-0 opacity-30",children:[[...Array(8)].map((s,o)=>g.jsx(ee.div,{className:"absolute h-1 bg-gradient-to-r from-transparent via-crys-gold to-transparent",style:{width:`${60+o*10}%`,top:`${15+o*10}%`,left:`${-20+o*5}%`},animate:{x:["-100%","100%"],opacity:[0,.6,0]},transition:{duration:4+o*.5,repeat:1/0,delay:o*.3,ease:"easeInOut"}},`wave-large-${o}`)),[...Array(12)].map((s,o)=>g.jsx(ee.div,{className:"absolute h-px bg-gradient-to-r from-transparent via-crys-gold/60 to-transparent",style:{width:`${30+o*8}%`,top:`${5+o*7}%`,right:`${-10+o*3}%`},animate:{x:["100%","-100%"],opacity:[0,.4,0]},transition:{duration:3+o*.3,repeat:1/0,delay:o*.2,ease:"linear"}},`wave-medium-${o}`))]}),g.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full opacity-20",children:g.jsx("div",{className:"flex items-end justify-center h-full gap-1 px-8",children:[...Array(32)].map((s,o)=>g.jsx(ee.div,{className:"bg-gradient-to-t from-crys-gold/80 to-crys-gold/20 w-2",animate:{height:[`${Math.random()*20+10}%`,`${Math.random()*80+20}%`,`${Math.random()*20+10}%`]},transition:{duration:1.5+Math.random()*2,repeat:1/0,ease:"easeInOut"}},`bar-${o}`))})}),g.jsx("div",{className:"absolute top-1/2 left-1/4 -translate-x-1/2 -translate-y-1/2",children:[...Array(4)].map((s,o)=>g.jsx(ee.div,{className:"absolute border border-crys-gold/20 rounded-full",style:{width:`${(o+1)*150}px`,height:`${(o+1)*150}px`,top:`${-(o+1)*75}px`,left:`${-(o+1)*75}px`},animate:{scale:[1,1.5,1],opacity:[.6,.1,.6]},transition:{duration:3,repeat:1/0,delay:o*.5,ease:"easeInOut"}},`ripple-${o}`))}),g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx("div",{className:"w-full h-full",style:{backgroundImage:`
                  linear-gradient(to right, rgba(212, 175, 55, 0.1) 1px, transparent 1px),
                  linear-gradient(to bottom, rgba(212, 175, 55, 0.1) 1px, transparent 1px)
                `,backgroundSize:"40px 40px"}})}),g.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((s,o)=>g.jsx(ee.div,{className:"absolute w-2 h-2 bg-crys-gold/40 rounded-full",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`},animate:{y:[0,-100,0],x:[0,Math.random()*50-25,0],opacity:[0,1,0]},transition:{duration:8+Math.random()*4,repeat:1/0,delay:Math.random()*5,ease:"easeInOut"}},`particle-${o}`))}),g.jsx("div",{className:"absolute bottom-0 left-0 w-full h-32 opacity-25",children:[...Array(200)].map((s,o)=>g.jsx(ee.div,{className:"absolute bottom-0 bg-gradient-to-t from-crys-gold to-transparent",style:{left:`${o/200*100}%`,width:"2px"},animate:{height:[`${Math.random()*20+5}%`,`${Math.random()*60+10}%`,`${Math.random()*20+5}%`]},transition:{duration:2+Math.random()*3,repeat:1/0,ease:"easeInOut"}},`freq-${o}`))})]}),g.jsx("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:g.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center max-w-7xl mx-auto",children:[g.jsxs(ee.div,{className:"max-w-2xl relative",variants:r,initial:"hidden",animate:"visible",children:[g.jsx(ee.div,{className:"absolute -top-4 -right-4 text-2xl text-crys-gold musical-sparkle",initial:{opacity:0},animate:{opacity:1},transition:{duration:2,delay:1},children:"🎵"}),g.jsx(ee.div,{className:"absolute -bottom-4 -left-4 text-xl text-crys-gold musical-sparkle",initial:{opacity:0},animate:{opacity:1},transition:{duration:2,delay:1.5},children:"🎚️"}),g.jsx(ee.div,{className:"absolute top-1/2 -right-8 text-lg text-crys-gold musical-sparkle",initial:{opacity:0},animate:{opacity:1},transition:{duration:2,delay:2},children:"🎧"}),g.jsxs(ee.h1,{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-crys-white mb-6 leading-tight",variants:i,children:[g.jsx(ee.span,{className:"block font-musical musical-glow text-4xl md:text-5xl lg:text-6xl",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.2},children:"Craft the Sound,"}),g.jsx(ee.span,{className:"block font-audiowide text-transparent bg-gradient-to-r from-crys-gold via-yellow-400 to-crys-gold-muted bg-clip-text text-3xl md:text-4xl lg:text-5xl musical-pulse whitespace-nowrap mt-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.4},children:"Unleash the Future"})]}),g.jsx(ee.p,{className:"text-xl md:text-2xl text-crys-light-grey mb-4 max-w-2xl leading-relaxed",variants:i,children:"Professional audio mastering platform designed for Africa by Africans. Get studio-quality masters in minutes, not hours."}),g.jsxs(ee.div,{className:"flex flex-col sm:flex-row gap-4 mb-12",variants:i,children:[g.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:g.jsxs(It,{size:"lg",onClick:t,className:"bg-crys-gold hover:bg-crys-gold-muted text-crys-black px-8 py-4 text-lg",children:[g.jsx(vx,{className:"w-5 h-5 mr-2"}),"Try Our Mastering App",g.jsx(px,{className:"w-5 h-5 ml-2"})]})}),g.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:g.jsxs(It,{variant:"outline",size:"lg",onClick:t,className:"border-crys-gold/30 text-crys-gold hover:bg-crys-gold/10 px-8 py-4 text-lg backdrop-blur-sm",children:[g.jsx(yx,{className:"w-5 h-5 mr-2"}),"View Studio"]})})]})]}),g.jsx(ee.div,{className:"relative",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute -inset-4 bg-crys-gold/20 rounded-2xl blur-xl"}),g.jsx("div",{className:"relative z-10 bg-gradient-to-br from-crys-gold/10 to-crys-gold/5 rounded-2xl border border-crys-gold/30 overflow-hidden backdrop-blur-sm p-8",children:g.jsxs("div",{className:"aspect-[4/3] relative flex flex-col items-center justify-center",children:[g.jsxs("div",{className:"relative w-full h-48 mb-6",children:[g.jsx("div",{className:"flex items-end justify-center h-full gap-2",children:[...Array(16)].map((s,o)=>g.jsx(ee.div,{className:"bg-gradient-to-t from-crys-gold to-crys-gold/30 w-4 rounded-t",animate:{height:[`${30+Math.random()*20}%`,`${50+Math.random()*50}%`,`${30+Math.random()*20}%`]},transition:{duration:1+Math.random()*2,repeat:1/0,ease:"easeInOut"}},`eq-bar-${o}`))}),g.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:g.jsxs("div",{className:"relative",children:[[...Array(3)].map((s,o)=>g.jsx(ee.div,{className:"absolute border border-crys-gold/40 rounded-full",style:{width:`${(o+1)*80}px`,height:`${(o+1)*80}px`,top:`${-(o+1)*40}px`,left:`${-(o+1)*40}px`},animate:{scale:[1,1.2,1],opacity:[.4,.8,.4]},transition:{duration:2+o*.5,repeat:1/0,ease:"easeInOut"}},`circle-${o}`)),g.jsx("div",{className:"w-6 h-6 bg-crys-gold rounded-full flex items-center justify-center",children:g.jsx(Uf,{className:"w-3 h-3 text-crys-black"})})]})})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("h3",{className:"text-crys-white text-xl font-semibold mb-2",children:"Professional Audio Mastering"}),g.jsx("p",{className:"text-crys-light-grey text-sm leading-relaxed",children:"Real-time audio analysis and processing visualization"}),g.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4 text-xs text-crys-gold",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-2 h-2 bg-crys-gold rounded-full pulse-gold"}),g.jsx("span",{children:"Processing"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(Vf,{className:"w-3 h-3"}),g.jsx("span",{children:"44.1kHz/24-bit"})]})]})]})]})})]})})]})})]}),g.jsx("section",{className:"bg-crys-charcoal/30 relative py-20",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[g.jsxs(ee.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[g.jsxs(Li,{variant:"secondary",className:"bg-crys-gold/20 text-crys-gold mb-6 px-4 py-2 text-sm",children:[g.jsx(Uf,{className:"w-4 h-4 mr-2"}),"Mastering Requirements"]}),g.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-crys-white mb-6",children:["Prepare Your Audio for",g.jsx("span",{className:"block text-crys-gold bg-gradient-to-r from-crys-gold to-yellow-400 bg-clip-text text-transparent",children:"Professional Mastering"})]}),g.jsx("p",{className:"text-xl text-crys-light-grey max-w-3xl mx-auto",children:"Follow these guidelines to ensure your tracks get the best possible mastering results"})]}),g.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[g.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1},viewport:{once:!0},children:g.jsx(qi,{className:"bg-audio-panel-bg border border-crys-graphite hover:border-crys-gold/50 transition-all duration-300 hover:scale-105 group h-full",children:g.jsxs(Hi,{className:"p-6 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-crys-gold/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-crys-gold/30 transition-colors",children:g.jsx(Vf,{className:"w-8 h-8 text-crys-gold"})}),g.jsx("h3",{className:"text-xl font-bold text-crys-white mb-3",children:"Headroom Requirements"}),g.jsxs("div",{className:"space-y-3 text-crys-light-grey",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm",children:"Minimum:"}),g.jsx(Li,{variant:"outline",className:"border-red-500/30 text-red-400",children:"-8 dB"})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm",children:"Maximum:"}),g.jsx(Li,{variant:"outline",className:"border-yellow-500/30 text-yellow-400",children:"-4 dB"})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm",children:"Best Result:"}),g.jsx(Li,{variant:"outline",className:"border-crys-gold text-crys-gold",children:"-6 dB"})]})]}),g.jsx("p",{className:"text-xs text-crys-light-grey mt-4",children:"Ensure your mix has adequate headroom for optimal mastering results"})]})})}),g.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},viewport:{once:!0},children:g.jsx(qi,{className:"bg-audio-panel-bg border border-crys-graphite hover:border-crys-gold/50 transition-all duration-300 hover:scale-105 group h-full",children:g.jsxs(Hi,{className:"p-6 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-crys-gold/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-crys-gold/30 transition-colors",children:g.jsx(mx,{className:"w-8 h-8 text-crys-gold"})}),g.jsx("h3",{className:"text-xl font-bold text-crys-white mb-3",children:"Audio Normalization"}),g.jsxs("div",{className:"space-y-3 text-crys-light-grey",children:[g.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"Normalize your audio"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"Avoid clipping"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"Maintain dynamics"})]})]}),g.jsx("p",{className:"text-xs text-crys-light-grey mt-4",children:"Proper normalization ensures consistent levels and prevents distortion"})]})})}),g.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3},viewport:{once:!0},children:g.jsx(qi,{className:"bg-audio-panel-bg border border-crys-graphite hover:border-crys-gold/50 transition-all duration-300 hover:scale-105 group h-full",children:g.jsxs(Hi,{className:"p-6 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-crys-gold/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-crys-gold/30 transition-colors",children:g.jsx(ez,{className:"w-8 h-8 text-crys-gold"})}),g.jsx("h3",{className:"text-xl font-bold text-crys-white mb-3",children:"Format Requirements"}),g.jsxs("div",{className:"space-y-3 text-crys-light-grey",children:[g.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"WAV or MP3 format"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"44.1kHz or higher"})]}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold"}),g.jsx("span",{className:"text-sm",children:"16-bit or higher"})]})]}),g.jsx("p",{className:"text-xs text-crys-light-grey mt-4",children:"High-quality source files ensure the best mastering results"})]})})})]}),g.jsx(ee.div,{className:"mt-12 text-center",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.4},viewport:{once:!0},children:g.jsxs("div",{className:"bg-gradient-to-r from-crys-gold/10 to-crys-gold/5 border border-crys-gold/20 rounded-2xl p-6 max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[g.jsx(bx,{className:"w-6 h-6 text-crys-gold"}),g.jsx("h3",{className:"text-lg font-semibold text-crys-white",children:"Pro Tip"})]}),g.jsxs("p",{className:"text-crys-light-grey",children:[g.jsx("span",{className:"text-crys-gold font-semibold",children:"-6 dB headroom"})," is the sweet spot for mastering. This gives our Crys Garage Engine enough room to work with while maintaining your mix's dynamics and character."]})]})})]})}),g.jsx("section",{className:"bg-crys-black relative py-20",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[g.jsxs(ee.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[g.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-crys-white mb-6",children:"Free Professional Tools"}),g.jsx("p",{className:"text-xl text-crys-light-grey max-w-3xl mx-auto",children:"Access our powerful audio analysis and normalization tools completely free. Perfect for preparing your tracks before mastering."})]}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[g.jsxs(ee.div,{className:"bg-gradient-to-br from-crys-charcoal to-crys-graphite rounded-2xl p-8 border border-crys-gold/20 hover:border-crys-gold/40 transition-all duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-12 h-12 bg-crys-gold/20 rounded-xl flex items-center justify-center mr-4",children:g.jsx(Vf,{className:"w-6 h-6 text-crys-gold"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-bold text-crys-white",children:"Audio Analyzer"}),g.jsx("p",{className:"text-crys-gold text-sm font-medium",children:"Free Professional Tool"})]})]}),g.jsx("p",{className:"text-crys-light-grey mb-6",children:"Professional real-time audio analysis with ITU-R BS.1770 LUFS measurement, frequency content analysis, and comprehensive audio insights."}),g.jsxs("div",{className:"space-y-3 mb-6",children:[g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"ITU-R BS.1770 LUFS measurement"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Real-time frequency content (Bass/Mid/High)"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Professional waveform display"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"3-second meter hold system"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"RMS, Peak, and Stereo width analysis"})]})]}),g.jsx(It,{onClick:e,className:"w-full bg-crys-gold hover:bg-crys-gold/90 text-crys-black font-semibold py-3 rounded-xl transition-all duration-300",children:"Try Audio Analyzer"})]}),g.jsxs(ee.div,{className:"bg-gradient-to-br from-crys-charcoal to-crys-graphite rounded-2xl p-8 border border-crys-gold/20 hover:border-crys-gold/40 transition-all duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.4},viewport:{once:!0},children:[g.jsxs("div",{className:"flex items-center mb-6",children:[g.jsx("div",{className:"w-12 h-12 bg-crys-gold/20 rounded-xl flex items-center justify-center mr-4",children:g.jsx(Uf,{className:"w-6 h-6 text-crys-gold"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-bold text-crys-white",children:"Audio Normalizer"}),g.jsx("p",{className:"text-crys-gold text-sm font-medium",children:"Free Professional Tool"})]})]}),g.jsx("p",{className:"text-crys-light-grey mb-6",children:"Professional audio normalization with customizable target levels (-3dB, -6dB, -9dB). Perfect for preparing tracks before mastering."}),g.jsxs("div",{className:"space-y-3 mb-6",children:[g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Customizable target levels (-3dB, -6dB, -9dB)"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Professional peak normalization"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Dynamic range preservation"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Multiple format support"})]}),g.jsxs("div",{className:"flex items-center text-crys-light-grey",children:[g.jsx(Je,{className:"w-5 h-5 text-crys-gold mr-3"}),g.jsx("span",{children:"Instant processing and download"})]})]}),g.jsx(It,{onClick:n,className:"w-full bg-crys-gold hover:bg-crys-gold/90 text-crys-black font-semibold py-3 rounded-xl transition-all duration-300",children:"Try Audio Normalizer"})]})]})]})}),g.jsx(cz,{onGetStarted:t,onTryMastering:t}),g.jsxs("section",{className:"bg-crys-charcoal/50 relative pt-16 pb-16",children:[g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx(kf,{src:"https://images.unsplash.com/photo-1571974599782-87624638275b?w=1920&h=1080&fit=crop",alt:"Professional audio setup",className:"w-full h-full object-cover opacity-10"}),g.jsx("div",{className:"absolute inset-0 bg-crys-charcoal/80"})]}),g.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[g.jsxs(ee.div,{className:"text-center mb-16",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[g.jsx(Li,{variant:"secondary",className:"bg-crys-gold/20 text-crys-gold mb-4",children:"Who We Serve"}),g.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-crys-white mb-6",children:"Perfect For Every Creator"})]}),g.jsx(ee.div,{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",variants:r,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:[{title:"Independent Artists",icon:g.jsx(yx,{className:"w-8 h-8"}),benefits:["Affordable professional mastering","Quick turnaround","Multiple format options","No studio booking"],image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=200&fit=crop"},{title:"Music Producers",icon:g.jsx(tz,{className:"w-8 h-8"}),benefits:["Real-time preview","Professional tools","Genre optimization","Client-ready output"],image:"https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=200&fit=crop"},{title:"Content Creators",icon:g.jsx(bx,{className:"w-8 h-8"}),benefits:["Podcast mastering","Video audio enhancement","Social media optimization","Quick processing"],image:"https://images.unsplash.com/photo-1590602847861-f357a9332bbc?w=400&h=200&fit=crop"},{title:"API & Distribution",icon:g.jsx(mx,{className:"w-8 h-8"}),benefits:["RESTful API integration","White-label solutions","Bulk processing endpoints","Developer-friendly SDKs"],image:"https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=400&h=200&fit=crop"}].map((s,o)=>g.jsx(ee.div,{variants:i,whileHover:{scale:1.05},children:g.jsxs(qi,{className:"bg-audio-panel-bg/80 border-audio-panel-border hover:border-crys-gold/50 transition-all duration-300 overflow-hidden h-full backdrop-blur-sm",children:[g.jsxs("div",{className:"aspect-[2/1] relative overflow-hidden",children:[g.jsx(kf,{src:s.image,alt:s.title,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-crys-black/80 via-crys-black/40 to-transparent"}),g.jsx(ee.div,{className:"absolute top-4 right-4 w-10 h-10 bg-crys-gold/20 rounded-lg flex items-center justify-center text-crys-gold backdrop-blur-sm",whileHover:{rotate:360},transition:{duration:.5},children:s.icon})]}),g.jsxs(Hi,{className:"p-6",children:[g.jsx("h3",{className:"text-crys-white font-semibold mb-4",children:s.title}),g.jsx("ul",{className:"space-y-2",children:s.benefits.map((a,c)=>g.jsxs("li",{className:"flex items-start gap-2 text-crys-light-grey text-sm",children:[g.jsx(Je,{className:"w-4 h-4 text-crys-gold flex-shrink-0 mt-0.5"}),g.jsx("span",{children:a})]},c))})]})]})},o))})]})]}),g.jsxs("section",{className:"bg-gradient-to-r from-crys-gold/10 via-crys-gold/5 to-crys-gold/10 relative overflow-hidden pt-16 pb-16",children:[g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx(kf,{src:"/studio.jpg",alt:"Studio background",className:"w-full h-full object-cover opacity-15"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-crys-gold/20 via-crys-gold/10 to-crys-gold/20"})]}),g.jsx("div",{className:"max-w-7xl mx-auto px-6 text-center relative z-10",children:g.jsxs(ee.div,{className:"max-w-3xl mx-auto",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[g.jsxs(ee.h2,{className:"text-4xl md:text-6xl font-bold text-crys-white mb-6 leading-tight",initial:{scale:.9},whileInView:{scale:1},transition:{duration:.8,delay:.2},viewport:{once:!0},children:[g.jsx("span",{className:"bg-gradient-to-r from-crys-gold via-yellow-400 to-crys-gold bg-clip-text text-transparent animate-pulse",children:"Craft the Sound,"}),g.jsx("br",{}),g.jsx("span",{className:"bg-gradient-to-r from-purple-400 via-pink-500 to-crys-gold bg-clip-text text-transparent",children:"Unleash the Future"})]}),g.jsxs(ee.p,{className:"text-xl md:text-2xl text-crys-light-grey mb-8 font-medium italic",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,delay:.4},viewport:{once:!0},children:[g.jsx("span",{className:"text-crys-gold",children:"♪"})," Can you make it?",g.jsx("span",{className:"text-crys-gold",children:"♫"})," Craft the sound,",g.jsx("span",{className:"text-crys-gold",children:"♪"})," Unleash the future",g.jsx("span",{className:"text-crys-gold",children:"♫"})]}),g.jsxs(ee.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.6},viewport:{once:!0},children:[g.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:g.jsxs(It,{size:"lg",onClick:t,className:"bg-crys-gold hover:bg-crys-gold-muted text-crys-black px-8 py-4 text-lg",children:[g.jsx(vx,{className:"w-5 h-5 mr-2"}),"Try Mastering Now",g.jsx(px,{className:"w-5 h-5 ml-2"})]})}),g.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:g.jsx(It,{variant:"outline",size:"lg",onClick:t,className:"border-crys-gold/30 text-crys-gold hover:bg-crys-gold/10 px-8 py-4 text-lg backdrop-blur-sm",children:"Get Started"})})]}),g.jsx(ee.div,{className:"mt-8 text-crys-light-grey text-sm",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,delay:.8},viewport:{once:!0},children:"Free tier available • No credit card required • Professional results in minutes"})]})})]})]})}function hz({size:t=64,className:e="",onClick:n,style:r}){const[i,s]=ch.useState(!1);return g.jsx("div",{className:`relative ${n?"cursor-pointer":""} ${e}`,onClick:n,style:{width:t,height:t,...r},children:i?g.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-crys-gold to-crys-gold-muted rounded-lg",style:{width:t,height:t},children:g.jsx("span",{className:"text-crys-black font-extrabold text-lg",children:"G"})}):g.jsx("img",{src:"/CRG_Logo_svg.svg",alt:"Crys Garage Logo",className:"w-full h-full object-contain",style:{width:t,height:t},onError:()=>s(!0)})})}const dz=`
  @keyframes pulse-gold {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.1);
    }
  }
  
  .pulse-gold {
    animation: pulse-gold 2s ease-in-out infinite;
  }
`;if(typeof document<"u"){const t="crys-garage-logo-styles";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=dz,document.head.appendChild(e)}}function fz({onNavigate:t}){var e;const{user:n,logout:r}=Sy(),[i,s]=z.useState(!1);if(!n)return null;const o=async()=>{await r(),s(!1)},a=h=>{t(h),s(!1)},c=()=>{switch(n.tier){case"pro":return g.jsx(gx,{className:"w-4 h-4 text-crys-gold"});case"advanced":return g.jsx(gx,{className:"w-4 h-4 text-purple-400"});default:return g.jsx(wx,{className:"w-4 h-4 text-crys-gold"})}},u=()=>{switch(n.tier){case"pro":return"text-crys-gold";case"advanced":return"text-purple-400";default:return"text-crys-gold"}};return g.jsxs("div",{className:"relative",children:[g.jsxs(It,{onClick:()=>s(!i),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-crys-gold/10 hover:bg-crys-gold/20 transition-colors",children:[g.jsx("div",{className:"w-8 h-8 bg-crys-gold/20 rounded-full flex items-center justify-center overflow-hidden",children:n.profile_picture?g.jsx("img",{src:n.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):c()}),g.jsx("span",{className:"text-crys-white text-sm hidden lg:block",children:((e=n.name)==null?void 0:e.split(" ")[0])||"User"}),g.jsx(W9,{className:"w-4 h-4 text-crys-gold"})]}),i&&g.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-audio-panel-bg border border-crys-graphite rounded-lg shadow-lg z-50",children:[g.jsx("div",{className:"p-4 border-b border-crys-graphite",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 bg-crys-gold/20 rounded-full flex items-center justify-center overflow-hidden",children:n.profile_picture?g.jsx("img",{src:n.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):c()}),g.jsxs("div",{children:[g.jsx("div",{className:"text-crys-white font-medium",children:n.name}),g.jsx("div",{className:"text-crys-light-grey text-sm",children:n.email}),g.jsxs("div",{className:`text-xs font-medium ${u()}`,children:[n.tier==="pro"?"Professional":n.tier.charAt(0).toUpperCase()+n.tier.slice(1)," Tier"]})]})]})}),g.jsx("div",{className:"p-3 border-b border-crys-graphite",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Y9,{className:"w-4 h-4 text-crys-gold"}),g.jsx("span",{className:"text-crys-white text-sm",children:"Credits"})]}),g.jsx("span",{className:"text-crys-gold font-semibold",children:n.credits})]})}),g.jsxs("div",{className:"p-2",children:[g.jsxs("button",{onClick:()=>a("profile"),className:"w-full flex items-center gap-3 px-3 py-2 text-crys-white hover:bg-crys-gold/10 rounded-lg transition-colors text-left",children:[g.jsx(wx,{className:"w-4 h-4"}),g.jsx("span",{children:"Profile & KYC"})]}),g.jsxs("button",{onClick:()=>a("billing"),className:"w-full flex items-center gap-3 px-3 py-2 text-crys-white hover:bg-crys-gold/10 rounded-lg transition-colors text-left",children:[g.jsx(Q9,{className:"w-4 h-4"}),g.jsx("span",{children:"Billing & Wallet"})]}),g.jsx("div",{className:"border-t border-crys-graphite my-2"}),g.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-3 py-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-left",children:[g.jsx(J9,{className:"w-4 h-4"}),g.jsx("span",{children:"Sign Out"})]})]})]})]})}z.createContext(void 0);class pz{constructor(){ah(this,"baseUrl"),this.baseUrl=window.location.hostname==="localhost"?"http://localhost:8002":"https://crysgarage.studio"}async getCreditBalance(e){try{if(ta())return console.log("🧪 Dev Mode: Returning infinite credits"),{current:Number.POSITIVE_INFINITY,total_purchased:0,total_used:0};try{const r=localStorage.getItem("user");if(r){const i=JSON.parse(r),s=((i==null?void 0:i.tier)||"").toString().toLowerCase();if(s==="pro"||s==="professional"||s==="developer")return{current:Number.POSITIVE_INFINITY,total_purchased:Number.POSITIVE_INFINITY,total_used:0}}}catch{}const n=await fetch(`${this.baseUrl}/credits/balance/${e}`);if(!n.ok)throw new Error("Failed to fetch credit balance");if(!(n.headers.get("content-type")||"").includes("application/json"))throw new Error("Unexpected content-type");return await n.json()}catch(n){return console.error("Error fetching credit balance:",n),{current:Number.POSITIVE_INFINITY,total_purchased:0,total_used:0}}}async useCredits(e,n=1,r="Audio processing"){try{if(ta())return console.log("🧪 Dev Mode: Bypassing credit deduction"),{id:`dev-${Date.now()}`,userId:e,type:"usage",amount:0,description:`DEV_MODE bypass: ${r}`,timestamp:new Date};const i=await fetch(`${this.baseUrl}/credits/use`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,amount:n,description:r})});if(!i.ok){const s=await i.json();throw new Error(s.detail||"Failed to use credits")}return await i.json()}catch(i){throw console.error("Error using credits:",i),i}}async addCredits(e,n,r,i){try{if(ta())return console.log("🧪 Dev Mode: Bypassing credit addition"),{id:`dev-add-${Date.now()}`,userId:e,type:"bonus",amount:n,description:`DEV_MODE: added credits for ${r}`,timestamp:new Date,tier:r};const s=await fetch(`${this.baseUrl}/credits/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,amount:n,tier:r,transaction_id:i,description:`Credits purchased for ${r} tier`})});if(!s.ok){const o=await s.json();throw new Error(o.detail||"Failed to add credits")}return await s.json()}catch(s){throw console.error("Error adding credits:",s),s}}async hasEnoughCredits(e,n=1){try{if(ta())return console.log("🧪 Dev Mode: Credit check bypassed - returning true"),!0;try{const s=localStorage.getItem("user");if(s){const o=JSON.parse(s),a=((o==null?void 0:o.tier)||"").toString().toLowerCase();if(a==="pro"||a==="professional"||a==="developer")return console.log(`🎯 Tier ${a}: Unlimited credits - returning true`),!0}}catch{}try{const s=JSON.parse(localStorage.getItem("user")||"{}"),o=((s==null?void 0:s.tier)||"").toString().toLowerCase();if(o==="pro"||o==="professional"||o==="developer")return console.log(`🎯 Current user tier ${o}: Unlimited credits - returning true`),!0}catch{}const r=await this.getCreditBalance(e),i=r.current>=n;return console.log(`💳 Credit check: ${r.current} >= ${n} = ${i}`),i}catch(r){return console.error("Error checking credits:",r),!0}}async getCreditHistory(e,n=50){try{const r=await fetch(`${this.baseUrl}/credits/history/${e}?limit=${n}`);if(!r.ok)throw new Error("Failed to fetch credit history");return await r.json()}catch(r){return console.error("Error fetching credit history:",r),[]}}handleCreditExhaustion(e){if(ta()){console.log("🧪 Dev Mode: Suppressing credit exhaustion notification");return}const n={type:"warning",title:"Credits Exhausted",message:"You have used all your free credits. Purchase more credits to continue processing audio.",action:"Purchase Credits",onAction:e};window.dispatchEvent(new CustomEvent("credit-exhaustion",{detail:n})),"Notification"in window&&Notification.permission==="granted"&&new Notification("Credits Exhausted",{body:"You have used all your free credits. Purchase more to continue.",icon:"/favicon.ico"})}formatCredits(e){return e===0?"No credits":e===1?"1 credit":`${e} credits`}getTierCreditInfo(e){const n={free:{initialCredits:0,description:"Pay per download",costPerCredit:5},pro:{initialCredits:Number.POSITIVE_INFINITY,description:"Unlimited credits",costPerCredit:0},advanced:{initialCredits:2,description:"2 free credits + purchase more",costPerCredit:3}};return n[e]||n.free}}const mz=new pz;function gz({onPurchaseClick:t,showPurchaseButton:e=!0,className:n=""}){const{user:r}=Sy(),[i,s]=z.useState(it?Number.POSITIVE_INFINITY:0),o=it||(r==null?void 0:r.id)==="dev-user"||(r==null?void 0:r.email)==="dev@local.test"||typeof(r==null?void 0:r.credits)=="number"&&!Number.isFinite(r.credits),[a,c]=z.useState(!0),[u,h]=z.useState(null);z.useEffect(()=>{if(o){s(Number.POSITIVE_INFINITY),c(!1),h(null);return}r!=null&&r.id&&f()},[r==null?void 0:r.id]);const f=async()=>{if(o){s(Number.POSITIVE_INFINITY),h(null),c(!1);return}if(r!=null&&r.id)try{c(!0);const N=await mz.getCreditBalance(r.id);s(N.current),h(null)}catch(N){console.error("Failed to fetch credit balance:",N),h("Failed to load credits"),s(r.credits||0)}finally{c(!1)}},m=()=>{t?t():o||(window.location.href="/billing")},y=(()=>i===0?{status:"exhausted",color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",icon:Ff,message:"No credits remaining"}:i<=2?{status:"low",color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",icon:Ff,message:"Credits running low"}:{status:"good",color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",icon:K9,message:o?"Dev Mode: Unlimited credits":"Credits available"})(),b=y.icon;return o?null:a?g.jsx(qi,{className:`bg-crys-graphite border-crys-graphite ${n}`,children:g.jsx(Hi,{className:"p-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 border-2 border-crys-gold border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-crys-light-grey",children:"Loading credits..."})]})})}):g.jsx(qi,{className:`bg-crys-graphite border-crys-graphite ${n}`,children:g.jsxs(Hi,{className:"p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`p-2 rounded-lg ${y.bgColor} ${y.borderColor} border`,children:g.jsx(b,{className:`w-4 h-4 ${y.color}`})}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-crys-white font-medium",children:[i," Credit",i!==1?"s":""]}),g.jsx(Li,{variant:"outline",className:`${y.color} ${y.borderColor} border`,children:y.message})]}),u&&g.jsx("p",{className:"text-red-400 text-xs mt-1",children:u})]})]}),e&&!o&&g.jsxs(It,{onClick:m,size:"sm",className:"bg-crys-gold hover:bg-crys-gold/90 text-crys-black",children:[g.jsx(nz,{className:"w-4 h-4 mr-1"}),"Buy Credits"]})]}),i===0&&!o&&g.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[g.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[g.jsx(Ff,{className:"w-4 h-4"}),g.jsx("span",{children:"You have no credits remaining. Purchase credits to continue processing audio."})]}),g.jsxs(It,{onClick:m,size:"sm",className:"mt-2 bg-crys-gold hover:bg-crys-gold/90 text-crys-black",children:[g.jsx(iz,{className:"w-4 h-4 mr-1"}),"Purchase Credits"]})]})]})})}function yz({onNavigate:t,onShowProfile:e,onDownloadAttempt:n,onShowAuthModal:r}){const{user:i,isAuthenticated:s}=Sy(),[o,a]=z.useState(!1),c=it||(i==null?void 0:i.id)==="dev-user"||(i==null?void 0:i.email)==="dev@local.test"||typeof(i==null?void 0:i.credits)=="number"&&!Number.isFinite(i.credits),u=[{id:"landing",label:"Home"},{id:"studio",label:"Studio"},{id:"community",label:"Community"},{id:"about",label:"About"},{id:"help",label:"Help"}];return g.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 bg-crys-black/95 backdrop-blur-sm border-b border-crys-graphite",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsx("div",{className:"flex items-center",children:g.jsxs(It,{variant:"ghost",onClick:()=>t("landing"),className:"flex items-center text-crys-white hover:text-crys-gold transition-colors",children:[g.jsx("div",{className:"flex items-center justify-center mt-3 -mr-4",children:g.jsx(hz,{className:"w-4 h-4"})}),g.jsx("span",{className:"font-bold text-lg",children:"Crys Garage"})]})}),g.jsx("nav",{className:"hidden md:flex items-center space-x-4",children:u.map(h=>g.jsx(It,{variant:"ghost",onClick:()=>t(h.id),className:"text-crys-light-grey hover:text-crys-white transition-colors px-3 py-2",children:h.label},h.id))}),g.jsxs("div",{className:"flex items-center space-x-4",children:[s?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"hidden lg:block",children:c?g.jsx("span",{className:"px-3 py-2 rounded-lg bg-green-500/10 border border-green-500/20 text-green-400 text-sm",children:"Dev Mode: Unlimited credits"}):g.jsx(gz,{onPurchaseClick:()=>t("billing"),className:"min-w-[200px]"})}),g.jsx(fz,{onNavigate:t})]}):g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(It,{variant:"ghost",onClick:r,className:"text-crys-light-grey hover:text-crys-white transition-colors",children:"Get Started"}),g.jsx(It,{onClick:r,className:"bg-crys-gold hover:bg-crys-gold/90 text-crys-black font-medium",children:"Try Free"})]}),g.jsx(It,{variant:"ghost",size:"sm",onClick:()=>a(!o),className:"md:hidden text-crys-light-grey hover:text-crys-white",children:o?g.jsx(az,{className:"w-5 h-5"}):g.jsx(Z9,{className:"w-5 h-5"})})]})]}),o&&g.jsx("div",{className:"md:hidden border-t border-crys-graphite py-4",children:g.jsx("div",{className:"space-y-2",children:u.map(h=>g.jsx(It,{variant:"ghost",onClick:()=>{t(h.id),a(!1)},className:"w-full justify-center text-crys-light-grey hover:text-crys-white transition-colors py-3",children:h.label},h.id))})})]})})}function vz(){const[t,e]=z.useState("landing"),n=s=>{e(s)},r=()=>{console.log("Show profile")},i=()=>{console.log("Show auth modal")};return g.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[g.jsx(yz,{onNavigate:n,onShowProfile:r,onShowAuthModal:i,onDownloadAttempt:()=>!0}),t==="landing"&&g.jsx(uz,{onGetStarted:()=>e("studio"),onTryAnalyzer:()=>console.log("Analyzer"),onTryNormalizer:()=>console.log("Normalizer")}),t==="studio"&&g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Studio"}),g.jsx("p",{children:"Studio functionality coming soon..."})]}),t==="pricing"&&g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Pricing"}),g.jsx("p",{children:"Pricing information coming soon..."})]})]})}function bz(){return g.jsx(P3,{children:g.jsx(K5,{children:g.jsx(vz,{})})})}zf.createRoot(document.getElementById("root")).render(g.jsx(ch.StrictMode,{children:g.jsx(bz,{})}));
